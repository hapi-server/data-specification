<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>HAPI-data-access-spec-dev</title>
  <link id="favicon" rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%220.9em%22 font-size=%22100%22>📖</text></svg>">
  <link id="hljs-css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">
  <style>
    #toc>ol ol {
      display: none
    }

    body {
      background-image: url("https://rweigel.github.io/biedit/img/paper.png")
    }

    .body {
      display: flex;
      min-width: 50%;
      max-height: 100%;
      position: absolute;
      background-image: url("https://rweigel.github.io/biedit/img/paper.png");
    }

    #toc {
      flex: 0 1 auto;
      margin-top: 0em;
      margin-right: 1em;
      max-width: 12em;
      overflow: hidden auto;
    }

    #toc .toctext {
      color: darkblue;
    }

    #toc .toctext-empty {
      min-width: 1em;
      border-bottom: 1px solid blue;
    }

    #toc ol {
      list-style-type: decimal;
      margin: 0.25em 0em 0em 0.25em;
      padding-inline-start: 1em;
    }

    #toc a {
      text-decoration: none;
    }

    #display {
      flex: 1 1 80%;
      overflow: hidden auto;
      overflow-wrap: break-word;
    }

    #display .abstract {
      text-align: center;
      font-size: 100%;
      font-weight: bold;
      color: black;
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }

    #display .title {
      text-align: center;
      font-size: 150%;
      font-weight: bold;
      color: black;
      margin-top: 0.2em;
      margin-bottom: 0.2em;
    }

    #display .subtitle {
      text-align: center;
      font-size: 120%;
      font-weight: bold;
      color: black;
      margin-top: 0.2em;
    }

    #display .date {
      text-align: right;
      color: black;
    }

    #display .block {
      display: flex;
      flex: 1 1 auto;
    }

    #display .block>.comment {
      display: none;
    }

    #display .hr {
      width: 100%;
      height: 1px;
      display: block;
      margin: 0.5em;
      border-top: 1px solid black;
    }

    #display a {
      text-decoration-line: none;
      text-decoration-color: black;
      color: darkblue;
    }

    #display a.broken-internal-link {
      text-decoration-line: underline;
      text-decoration-style: wavy;
      text-underline-offset: 2px;
      text-decoration-color: red;
    }

    #display span.broken-internal-link {
      font-size: 0.75em;
      color: red;
    }

    #display a:focus-visible {
      outline: none;
      background-color: yellow;
    }

    #display p {
      width: 100%;
      display: block;
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }

    #display pre {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }

    #display h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      width: 100%;
      text-decoration: none;
      color: inherit;
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }

    #display h1 {
      color: darkblue;
      border-bottom: 2px solid darkblue;
    }

    #display h2 {
      border-bottom: 1px solid black;
    }

    #display h3 {
      border-bottom: 1px dotted black;
    }

    #display img {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
      max-width: 100%;
    }

    figure {
      display: block;
      margin-block: 0em;
      margin-inline: 0px;
    }

    details>summary {
      font-weight: bold;
    }

    details {
      padding-left: 0.5em;
    }

    details[open] {
      border: 1px solid black;
      padding: 0em 0em 0em 0.5em;
    }

    table {
      padding: 0px;
      display: block;
      width: 100%;
    }

    table tr {
      border-top: 1px solid rgb(204, 204, 204);
      background-color: white;
      margin: 0px;
      padding: 0px;
    }

    table tr:nth-child(2n) {
      background-color: rgb(248, 248, 248);
    }

    table tr th {
      font-weight: bold;
      border: 1px solid rgb(204, 204, 204);
      text-align: left;
      margin: 0px;
      padding: 6px 13px;
    }

    table tr td {
      border: 1px solid rgb(204, 204, 204);
      text-align: left;
      margin: 0px;
      padding: 6px 13px;
    }

    table tr th :first-child,
    table tr td :first-child {
      margin-top: 0px;
    }

    table tr th :last-child,
    table tr td :last-child {
      margin-bottom: 0px;
    }

    #display code {
      width: 100%;
      background-color: rgba(0, 0, 0, 0.03);
      border-radius: 0px;
      white-space: pre-wrap;
    }

    #display code~.line-number {
      margin-top: 3px;
      margin-right: 3px;
    }

    #display pre {
      width: 100%;
      text-indent: 0.75em;
      margin: 0.5em 0px;
      white-space: pre-wrap;
      border-left: 3px solid black;
      background-color: rgba(0, 0, 0, 0.03);
      line-height: 1.25;
      overflow-x: clip;
    }

    #display pre code {
      background-color: rgba(0, 0, 0, 0);
      margin-top: 0.25em;
      margin-bottom: 0.25em;
    }

    #display pre.language-python {}

    #display li>div {
      display: flex;
    }

    #display li {
      min-height: 1em;
      width: 100%;
    }

    #display ul {
      width: 100%;
      margin-top: 0.5em;
      margin-bottom: 0.5em;
      margin-left: 1em;
      padding-left: 0.35em;
    }

    #display ul.compact {
      margin-top: 0.25em;
      margin-bottom: 0.25em;
    }

    #display ol {
      width: 100%;
      margin-left: 1em;
      padding-left: 0.5em;
    }

    #display>.section>.block &>ol.compact {
      margin-top: 0.25em;
      margin-bottom: 0.25em;
    }

    #display>.section>.block>ol.loose {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }

    #display>.section>.block>ol.compact {
      margin-top: 0.25em;
      margin-bottom: 0.25em;
    }

    #display ol.compact p {
      margin-top: 0.25em;
      margin-bottom: 0.25em;
    }

    #display ol.loose p {
      margin-top: 0.25em;
      margin-bottom: 0.25em;
    }

    #display ul.compact p {
      margin-top: 0.25em;
      margin-bottom: 0.25em;
    }

    #display ul.loose p {
      margin-top: 0.25em;
      margin-bottom: 0.25em;
    }

    .inline-html .block .block-info {
      display: none;
    }

    .inline-html {
      width: 100%;
    }

    .section>.block ol~.block-info {}

    .section>.block ul~.block-info {}

    .section>.block pre~.block-info {}

    .section>.block code~.block-info {}

    pre .block-info {
      font-size: 8px;
      text-align: right;
      text-indent: 0px;
    }

    .block-info {
      text-align: right;
      width: 24px;
      font-family: monospace;
      white-space: pre-line;
      overflow-wrap: break-word;
      font-size: 8px;
      border-top: 1px solid black;
      border-bottom: 1px solid black;
      border-right: 1px solid black;
    }

    .blockquote {
      width: 100%;
      display: block;
      margin: 1em;
      border: 1px solid black;
      padding: 1em;
      border-radius: 0.5em;
    }

    .inline {
      margin-top: 0.5em;
      margin-bottom: 0.5em;
    }

    .latex-underline {
      text-decoration: underline;
    }

    .katex {
      font-size: inherit !important;
    }

    .katex-warning {
      border-right: 0.5em solid red;
    }

    .katex-display {
      text-align: center;
      margin: 0em;
      font-size: 1em !important;
    }

    .katex-display.fleqn>.katex {
      padding-left: 0em;
      margin: 0em;
    }

    .page-break {
      break-after: page;
      width: 100%;
      font-size: 0px;
      border-top: 1px dotted black;
    }

    .solutionsfalse {
      display: none;
    }

    .solutionstrue {
      display: block;
    }

    @media print {
      * {
        overflow: visible !important;
      }

      @page {
        size: auto;
        margin: 0.5in 0.75in 0.75in;
      }

      .katex .hide-tail {
        overflow: hidden !important;
      }

      .page-break {
        border-top: none;
      }

      .body {
        display: inline;
        position: relative;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        width: 100%;
        margin-block: 0.1em;
      }

      h1 {
        font-size: 1.25em;
        color: black;
        border-bottom: 2px solid black;
      }

      h2 {
        font-size: 1.15em;
        border-bottom: 1px solid black;
      }

      h3 {
        font-size: 1.1em;
      }

      h4,
      h5,
      h6 {
        font-size: 1.05em;
      }

      .md-toc {
        break-inside: avoid;
        font-size: 14px;
      }

      pre {
        break-inside: avoid;
      }

      p {
        margin-top: 0.5em;
        margin-bottom: 0.5em;
      }

      #toc {
        display: none;
        font-size: 100%;
        margin: 0px;
        width: 100%;
        overflow-y: hidden;
        padding-left: 0px;
        padding-right: 0px;
      }

      #display {
        margin-left: 0em;
        width: 100%;
        padding-left: 0px;
        padding-right: 0px;
        border: none;
        overflow-wrap: break-word;
      }

      .katex {
        font: 1em / 1.1 KaTeX_Main, "Times New Roman", serif;
        white-space: nowrap;
        text-indent: 0px;
        text-rendering: auto;
      }

      .katex-display {
        margin-top: 0px !important;
        font-size: 1em !important;
      }
    }
  </style>
  <script>
    function tocClickListen() {
      let hs = document.querySelectorAll('#toc > ol ol');
      let el, ns;
      for (let i = 0; i < hs.length; i++) {
        if (hs[i].previousElementSibling) {
          el = hs[i].previousElementSibling.firstElementChild;
          if (el.length == 0) {
            continue;
          }
          el.addEventListener('click', event => {
            ns = event.target.parentNode.nextElementSibling;
            if (!ns) return;
            if (ns.style.display === 'none') {
    ns.style.display = 'block';
            } else
            {
    ns.style.display = 'none';}
          });
        }
      }
    }
    if (
        document.readyState === "complete" ||
        (document.readyState !== "loading" && 
          !document.documentElement.doScroll)
    ) {
      tocClickListen();
    } else {
      document.addEventListener("DOMContentLoaded", tocClickListen);
    }
  </script>
</head>

<body class="body">
  <div id="toc" style="min-width: 5em;">
    <ol>
      <li>
        <a href="#1-significant-changes-to-specification" raw="# 1 Significant Changes to Specification" lo="71">
          <span class="toctext">Significant Changes to Specification</span>
        </a>
        <ol class="toc" style="display: none;">
          <li>
            <a href="#11-v2-to-v3-api-changes" raw="## 1.1 v2 to v3 API Changes" lo="75">
              <span class="toctext">v2 to v3 API Changes</span>
            </a>
          </li>
          <li>
            <a href="#12-v2-to-v3-schema-changes" raw="## 1.2 v2 to v3 Schema Changes" lo="84">
              <span class="toctext">v2 to v3 Schema Changes</span>
            </a>
          </li>
          <li>
            <a href="#13-additions-to31" raw="## 1.3 Additions to 3.1" lo="91">
              <span class="toctext">Additions to 3.1</span>
            </a>
          </li>
        </ol>
      </li>
      <li>
        <a href="#2-introduction" raw="# 2 Introduction" lo="100">
          <span class="toctext">Introduction</span>
        </a>
        <ol class="toc" style="display: none;">
          <li>
            <a href="#21-overview" raw="## 2.1 Overview " lo="102">
              <span class="toctext">Overview</span>
            </a>
          </li>
          <li>
            <a href="#22-facilitating-adoption" raw="## 2.2 Facilitating Adoption" lo="129">
              <span class="toctext">Facilitating Adoption</span>
            </a>
          </li>
          <li>
            <a href="#23-limitations" raw="## 2.3 Limitations" lo="143">
              <span class="toctext">Limitations</span>
            </a>
          </li>
        </ol>
      </li>
      <li>
        <a href="#3-endpoints" raw="# 3 Endpoints" lo="149">
          <span class="toctext">Endpoints</span>
        </a>
        <ol class="toc" style="display: none;">
          <li>
            <a href="#31-overview" raw="## 3.1 Overview" lo="151">
              <span class="toctext">Overview</span>
            </a>
          </li>
          <li>
            <a href="#32-hapi" raw="## 3.2 `hapi`" lo="188">
              <span class="toctext"><code type="md">hapi</code></span>
            </a>
          </li>
          <li>
            <a href="#33-about" raw="## 3.3 `about`" lo="220">
              <span class="toctext"><code type="md">about</code></span>
            </a>
          </li>
          <li>
            <a href="#34-capabilities" raw="## 3.4 `capabilities`" lo="265">
              <span class="toctext"><code type="md">capabilities</code></span>
            </a>
          </li>
          <li>
            <a href="#35-catalog" raw="## 3.5 `catalog`" lo="314" class="highlighted">
              <span class="toctext"><code type="md">catalog</code></span>
            </a>
          </li>
          <li>
            <a href="#36-info" raw="## 3.6 `info`" lo="404">
              <span class="toctext"><code type="md">info</code></span>
            </a>
            <ol class="toc" style="display: none;">
              <li>
                <a href="#361-request-parameters" raw="### 3.6.1 Request Parameters" lo="422">
                  <span class="toctext">Request Parameters</span>
                </a>
              </li>
              <li>
                <a href="#362-info-response-object" raw="### 3.6.2 Info Response Object" lo="435">
                  <span class="toctext">Info Response Object</span>
                </a>
              </li>
              <li>
                <a href="#363-unitsschema-details" raw="### 3.6.3 `unitsSchema` Details" lo="463">
                  <span class="toctext"><code type="md">unitsSchema</code> Details</span>
                </a>
              </li>
              <li>
                <a href="#364-coordinatesystemschema-details" raw="### 3.6.4 `coordinateSystemSchema` Details" lo="480">
                  <span class="toctext"><code type="md">coordinateSystemSchema</code> Details</span>
                </a>
              </li>
              <li>
                <a href="#365-additional-metadata-object" raw="### 3.6.5 Additional Metadata Object" lo="503">
                  <span class="toctext">Additional Metadata Object</span>
                </a>
              </li>
              <li>
                <a href="#366-parameter-object" raw="### 3.6.6 Parameter Object" lo="563">
                  <span class="toctext">Parameter Object</span>
                </a>
              </li>
              <li>
                <a href="#367-size-details" raw="### 3.6.7 size Details" lo="626">
                  <span class="toctext">size Details</span>
                </a>
              </li>
              <li>
                <a href="#368-fill-details" raw="### 3.6.8 fill Details" lo="640">
                  <span class="toctext">fill Details</span>
                </a>
              </li>
              <li>
                <a href="#369-unit-and-label-arrays" raw="### 3.6.9 Unit and Label Arrays" lo="644">
                  <span class="toctext">Unit and Label Arrays</span>
                </a>
              </li>
              <li>
                <a href="#3610-specifying-vectorcomponents" raw="### 3.6.10 Specifying vectorComponents" lo="743">
                  <span class="toctext">Specifying vectorComponents</span>
                </a>
              </li>
              <li>
                <a href="#3611-bins-object" raw="### 3.6.11 Bins Object" lo="843">
                  <span class="toctext">Bins Object</span>
                </a>
              </li>
              <li>
                <a href="#3612-subsetting-parameters" raw="### 3.6.12 Subsetting Parameters" lo="867">
                  <span class="toctext">Subsetting Parameters</span>
                </a>
              </li>
              <li>
                <a href="#3613-json-references" raw="### 3.6.13 JSON References" lo="902">
                  <span class="toctext">JSON References</span>
                </a>
              </li>
              <li>
                <a href="#3614-time-varying-bins" raw="### 3.6.14 Time-Varying Bins" lo="1043">
                  <span class="toctext">Time-Varying Bins</span>
                </a>
              </li>
              <li>
                <a href="#3615-time-varying-size" raw="### 3.6.15 Time-Varying size" lo="1114">
                  <span class="toctext">Time-Varying size</span>
                </a>
              </li>
            </ol>
          </li>
          <li>
            <a href="#37-data" raw="## 3.7 `data`" lo="1136">
              <span class="toctext"><code type="md">data</code></span>
            </a>
            <ol class="toc" style="display: none;">
              <li>
                <a href="#371-request-parameters" raw="### 3.7.1 Request Parameters" lo="1142">
                  <span class="toctext">Request Parameters</span>
                </a>
              </li>
              <li>
                <a href="#372-response" raw="### 3.7.2 Response" lo="1155">
                  <span class="toctext">Response</span>
                </a>
              </li>
              <li>
                <a href="#373-examples" raw="### 3.7.3 Examples" lo="1233">
                  <span class="toctext">Examples</span>
                </a>
                <ol class="toc" style="display: none;">
                  <li>
                    <a href="#3731-data-with-header" raw="#### 3.7.3.1 Data with Header" lo="1237">
                      <span class="toctext">Data with Header</span>
                    </a>
                  </li>
                  <li>
                    <a href="#3732-data-only" raw="#### 3.7.3.2 Data Only" lo="1290">
                      <span class="toctext">Data Only</span>
                    </a>
                  </li>
                </ol>
              </li>
              <li>
                <a href="#374-response-formats" raw="### 3.7.4 Response formats" lo="1313">
                  <span class="toctext">Response formats</span>
                </a>
                <ol class="toc" style="display: none;">
                  <li>
                    <a href="#3741-csv" raw="#### 3.7.4.1 CSV" lo="1317">
                      <span class="toctext">CSV</span>
                    </a>
                  </li>
                  <li>
                    <a href="#3742-binary" raw="#### 3.7.4.2 Binary" lo="1325">
                      <span class="toctext">Binary</span>
                    </a>
                  </li>
                  <li>
                    <a href="#3743-json" raw="#### 3.7.4.3 JSON" lo="1331">
                      <span class="toctext">JSON</span>
                    </a>
                  </li>
                </ol>
              </li>
              <li>
                <a href="#375-errors-while-streaming" raw="### 3.7.5 Errors While Streaming" lo="1362">
                  <span class="toctext">Errors While Streaming</span>
                </a>
              </li>
              <li>
                <a href="#376-representation-of-time" raw="### 3.7.6 Representation of Time" lo="1366">
                  <span class="toctext">Representation of Time</span>
                </a>
                <ol class="toc" style="display: none;">
                  <li>
                    <a href="#3761-incoming-time-values" raw="#### 3.7.6.1 Incoming time values" lo="1386">
                      <span class="toctext">Incoming time values</span>
                    </a>
                  </li>
                  <li>
                    <a href="#3762-outgoing-time-values" raw="#### 3.7.6.2 Outgoing time values" lo="1401">
                      <span class="toctext">Outgoing time values</span>
                    </a>
                  </li>
                  <li>
                    <a href="#3763-time-range-with-no-data" raw="#### 3.7.6.3 Time Range With No Data" lo="1415">
                      <span class="toctext">Time Range With No Data</span>
                    </a>
                  </li>
                  <li>
                    <a href="#3764-time-range-with-all-fill-values" raw="#### 3.7.6.4 Time Range With All Fill Values" lo="1433">
                      <span class="toctext">Time Range With All Fill Values</span>
                    </a>
                  </li>
                </ol>
              </li>
            </ol>
          </li>
        </ol>
      </li>
      <li>
        <a href="#4-status-codes" raw="# 4 Status Codes" lo="1437">
          <span class="toctext">Status Codes</span>
        </a>
        <ol class="toc" style="display: none;">
          <li>
            <a href="#41-status-object" raw="## 4.1 `status` Object" lo="1458">
              <span class="toctext"><code type="md">status</code> Object</span>
            </a>
          </li>
          <li>
            <a href="#42-status-error-codes" raw="## 4.2 `status` Error Codes" lo="1481">
              <span class="toctext"><code type="md">status</code> Error Codes</span>
            </a>
          </li>
          <li>
            <a href="#43-client-error-handling" raw="## 4.3 Client Error Handling" lo="1521">
              <span class="toctext">Client Error Handling</span>
            </a>
          </li>
        </ol>
      </li>
      <li>
        <a href="#5-implementation-details" raw="# 5 Implementation Details" lo="1535">
          <span class="toctext">Implementation Details</span>
        </a>
        <ol class="toc" style="display: none;">
          <li>
            <a href="#51-cross-origin-resource-sharing" raw="## 5.1 Cross-Origin Resource Sharing" lo="1537">
              <span class="toctext">Cross-Origin Resource Sharing</span>
            </a>
          </li>
          <li>
            <a href="#52-security-notes" raw="## 5.2 Security Notes" lo="1547">
              <span class="toctext">Security Notes</span>
            </a>
          </li>
          <li>
            <a href="#53-head-requests-and-efficiency" raw="## 5.3 HEAD Requests and Efficiency" lo="1561">
              <span class="toctext">HEAD Requests and Efficiency</span>
            </a>
          </li>
        </ol>
      </li>
      <li>
        <a href="#6-references" raw="# 6 References" lo="1570">
          <span class="toctext">References</span>
        </a>
      </li>
      <li>
        <a href="#7-contact" raw="# 7 Contact" lo="1578">
          <span class="toctext">Contact</span>
        </a>
      </li>
      <li>
        <a href="#8-appendix" raw="# 8 Appendix" lo="1589">
          <span class="toctext">Appendix</span>
        </a>
        <ol class="toc" style="display: none;">
          <li>
            <a href="#81-sample-landing-page" raw="## 8.1 Sample Landing Page" lo="1591">
              <span class="toctext">Sample Landing Page</span>
            </a>
          </li>
          <li>
            <a href="#82-allowed-characters-in-id-dataset-and-parameter" raw="## 8.2 Allowed Characters in `id`, `dataset`, and `parameter`" lo="1595">
              <span class="toctext">Allowed Characters in <code type="md">id</code>, <code type="md">dataset</code>, and <code type="md">parameter</code></span>
            </a>
          </li>
          <li>
            <a href="#83-json-object-of-status-codes" raw="## 8.3 JSON Object of Status Codes" lo="1614">
              <span class="toctext">JSON Object of Status Codes</span>
            </a>
          </li>
          <li>
            <a href="#84-examples" raw="## 8.4 Examples" lo="1638">
              <span class="toctext">Examples</span>
            </a>
          </li>
        </ol>
      </li>
    </ol>
  </div>
  <div id="display">
    <div class="section">
      <div class="block">
        <div class="comment" lo="1" lf="1">
          <!-- TOC -->
        </div>
        <div class="block-info" style="display: none;"><span class="line-numbers">1</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="2" lf="62"><a href="#1-significant-changes-to-specification">1 Significant Changes to Specification</a><br> &nbsp;&nbsp;&nbsp;<a href="#11-v2-to-v3-api-changes">1.1 v2 to v3 API Changes</a><br> &nbsp;&nbsp;&nbsp;<a href="#12-v2-to-v3-schema-changes">1.2 v2 to v3 Schema Changes</a><br> &nbsp;&nbsp;&nbsp;<a href="#13-additions-to-31" class="broken-internal-link">1.3 Additions to 3.1</a><br>
          <a href="#2-introduction">2 Introduction</a><br> &nbsp;&nbsp;&nbsp;<a href="#21-overview">2.1 Overview</a><br> &nbsp;&nbsp;&nbsp;<a href="#22-facilitating-adoption">2.2 Facilitating Adoption</a><br> &nbsp;&nbsp;&nbsp;<a href="#23-limitations">2.3 Limitations</a><br>
          <a href="#3-endpoints">3 Endpoints</a><br> &nbsp;&nbsp;&nbsp;<a href="#31-overview">3.1 Overview</a><br> &nbsp;&nbsp;&nbsp;<a href="#32-hapi">3.2 hapi</a><br> &nbsp;&nbsp;&nbsp;<a href="#33-about">3.3 about</a><br> &nbsp;&nbsp;&nbsp;<a href="#34-capabilities">3.4 capabilities</a><br> &nbsp;&nbsp;&nbsp;<a href="#35-catalog">3.5 catalog</a><br> &nbsp;&nbsp;&nbsp;<a href="#36-info">3.6 info</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#361-request-parameters">3.6.1 Request Parameters</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#362-info-response-object">3.6.2 Info Response Object</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#363-unitsschema-details">3.6.3 unitsSchema Details</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#364-coordinatesystemschema-details">3.6.4 coordinateSystemSchema Details</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#365-additional-metadata-object">3.6.5 Additional Metadata Object</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#366-parameter-object">3.6.6 Parameter Object</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#367-size-details">3.6.7 size Details</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#368-fill-details">3.6.8 fill Details</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#369-unit-and-label-arrays">3.6.9 Unit and Label Arrays</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#3610-specifying-vectorcomponents">3.6.10 Specifying vectorComponents</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#3611-bins-object">3.6.11 Bins Object</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#3612-subsetting-parameters">3.6.12 Subsetting Parameters</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#3613-json-references">3.6.13 JSON References</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#3614-time-varying-bins">3.6.14 Time-Varying Bins</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#3615-time-varying-size">3.6.15 Time-Varying size</a><br> &nbsp;&nbsp;&nbsp;<a href="#37-data">3.7 data</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#371-request-parameters">3.7.1 Request Parameters</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#372-response">3.7.2 Response</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#373-examples">3.7.3 Examples</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#3731-data-with-header">3.7.3.1 Data with Header</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#3732-data-only">3.7.3.2 Data Only</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#374-response-formats">3.7.4 Response formats</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#3741-csv">3.7.4.1 CSV</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#3742-binary">3.7.4.2 Binary</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#3743-json">3.7.4.3 JSON</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#375-errors-while-streaming">3.7.5 Errors While Streaming</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#376-representation-of-time">3.7.6 Representation of Time</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#3761-incoming-time-values">3.7.6.1 Incoming time values</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#3762-outgoing-time-values">3.7.6.2 Outgoing time values</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#3763-time-range-with-no-data">3.7.6.3 Time Range With No Data</a><br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#3764-time-range-with-all-fill-values">3.7.6.4 Time Range With All Fill Values</a><br>
          <a href="#4-status-codes">4 Status Codes</a><br> &nbsp;&nbsp;&nbsp;<a href="#41-status-object">4.1 status Object</a><br> &nbsp;&nbsp;&nbsp;<a href="#42-status-error-codes">4.2 status Error Codes</a><br> &nbsp;&nbsp;&nbsp;<a href="#43-client-error-handling">4.3 Client Error Handling</a><br>
          <a href="#5-implementation-details">5 Implementation Details</a><br> &nbsp;&nbsp;&nbsp;<a href="#51-cross-origin-resource-sharing">5.1 Cross-Origin Resource Sharing</a><br> &nbsp;&nbsp;&nbsp;<a href="#52-security-notes">5.2 Security Notes</a><br> &nbsp;&nbsp;&nbsp;<a href="#53-head-requests-and-efficiency">5.3 HEAD Requests and Efficiency</a><br>
          <a href="#6-references">6 References</a><br>
          <a href="#7-contact">7 Contact</a><br>
          <a href="#8-appendix">8 Appendix</a><br> &nbsp;&nbsp;&nbsp;<a href="#81-sample-landing-page">8.1 Sample Landing Page</a><br> &nbsp;&nbsp;&nbsp;<a href="#82-allowed-characters-in-id-dataset-and-parameter">8.2 Allowed Characters in id, dataset, and parameter</a><br> &nbsp;&nbsp;&nbsp;<a href="#83-json-object-of-status-codes">8.3 JSON Object of Status Codes</a><br> &nbsp;&nbsp;&nbsp;<a href="#84-examples">8.4 Examples</a>
        </p>
        <div class="block-info" style="display: none;"><span class="line-numbers">2-62</span></div>
      </div>
      <div class="block">
        <div class="comment" lo="63" lf="63">
          <!-- \TOC -->
        </div>
        <div class="block-info" style="display: none;"><span class="line-numbers">63</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="65" lf="65">Version 3.2.0-dev | Heliophysics Data and Model Consortium (HDMC) |</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">65</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="67" lf="67"><strong type="md">This is the development version of the HAPI Data Access Specification.</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">67</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="69" lf="69">The most recent stable release is <a href="https://github.com/hapi-server/data-specification/tree/master/hapi-3.1.0">Version 3.1.0</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">69</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h1 lo="71" lf="71"><a name="1-significant-changes-to-specification" number="1" lo="71" raw="# 1 Significant Changes to Specification" class="anchor hanchor" href="#1-significant-changes-to-specification"><span class="hnumber">1</span>&nbsp;<span class="htext">Significant Changes to Specification</span></a></h1>
        <div class="block-info" style="display: none;"><span class="line-numbers">71</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="73" lf="73">Note that version 3.0 introduced some breaking changes. They are listed here and are documented as issues in the <a href="https://github.com/hapi-server/data-specification/milestone/4?closed=1">3.0 Milestone list</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">73</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="75" lf="75"><a name="11-v2-to-v3-api-changes" number="1.1" lo="75" raw="## 1.1 v2 to v3 API Changes" class="anchor hanchor" href="#11-v2-to-v3-api-changes"><span class="hnumber">1.1</span>&nbsp;<span class="htext">v2 to v3 API Changes</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">75</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="77" lf="77">Non-backward compatible changes introduced to the request interface in HAPI 3.0:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">77</span></div>
      </div>
      <div class="block">
        <ol lo="78" lf="80" class="compact">
          <li markerlength="3" padlength="0" lo="78" lf="78">
            <div class="block">
              <p padlength="0" lo="78" lf="78">The URL parameter <code type="md">id</code> was replaced with <code type="md">dataset</code>. </p>
              <div class="block-info" style="display: none;"><span class="line-numbers">78</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="79" lf="79">
            <div class="block">
              <p padlength="0" lo="79" lf="79"><code type="md">time.min</code> and <code type="md">time.max</code> were replaced with <code type="md">start</code> and <code type="md">stop</code>, respectively.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">79</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="80" lf="82">
            <div class="block">
              <p padlength="0" lo="80" lf="80">Addition of a new endpoint, “<a href="#33-about">about</a>“, for server description metadata.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">80</span></div>
            </div>
          </li>
        </ol>
        <div class="block-info" style="display: none;"><span class="line-numbers">78-80</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="82" lf="82">These changes were discussed in issue <a href="https://github.com/hapi-server/data-specification/issues/77">#77</a>. HAPI 3 servers must accept both the old and these new parameter names, but the HAPI 2 specification requires an error response if the new URL parameter names are used. In a future version, the deprecated older names will no longer be valid.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">82</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="84" lf="84"><a name="12-v2-to-v3-schema-changes" number="1.2" lo="84" raw="## 1.2 v2 to v3 Schema Changes" class="anchor hanchor" href="#12-v2-to-v3-schema-changes"><span class="hnumber">1.2</span>&nbsp;<span class="htext">v2 to v3 Schema Changes</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">84</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="86" lf="86">This list captures new optional elements that can be included in the <code type="md">info</code> response as of 3.0:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">86</span></div>
      </div>
      <div class="block">
        <ol lo="87" lf="89" class="compact">
          <li markerlength="3" padlength="0" lo="87" lf="87">
            <div class="block">
              <p padlength="0" lo="87" lf="87">Ability to specify time-varying bins (<a href="https://github.com/hapi-server/data-specification/issues/83">#83</a>)</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">87</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="88" lf="88">
            <div class="block">
              <p padlength="0" lo="88" lf="88">Ability to use JSON references in <code type="md">info</code> response (<a href="https://github.com/hapi-server/data-specification/issues/82">#82</a>)</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">88</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="89" lf="91">
            <div class="block">
              <p padlength="0" lo="89" lf="89">Ability to indicate a units schema (if one is being used for <code type="md">units</code> strings) (<a href="https://github.com/hapi-server/data-specification/issues/81">#81</a>)</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">89</span></div>
            </div>
          </li>
        </ol>
        <div class="block-info" style="display: none;"><span class="line-numbers">87-89</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="91" lf="91"><a name="13-additions-to31" number="1.3" lo="91" raw="## 1.3 Additions to 3.1" class="anchor hanchor" href="#13-additions-to31"><span class="hnumber">1.3</span>&nbsp;<span class="htext">Additions to 3.1</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">91</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="93" lf="93">Note: 3.1 is fully backward compatible with 3.0 and 3.0.1</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">93</span></div>
      </div>
      <div class="block">
        <ol lo="95" lf="97" class="compact">
          <li markerlength="3" padlength="0" lo="95" lf="95">
            <div class="block">
              <p padlength="0" lo="95" lf="95">support for vector quantities: parameters that are vector quantities can optionally specify a coordinate system and can identify vector components as such; datsaets can optionally specify a coordinate system schema (<a href="https://github.com/hapi-server/data-specification/issues/115">#115</a>)</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">95</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="96" lf="96">
            <div class="block">
              <p padlength="0" lo="96" lf="96">a dataset may optionally include other types of metadata inside a separate block (<a href="https://github.com/hapi-server/data-specification/issues/117">#117</a>)</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">96</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="97" lf="100">
            <div class="block">
              <p padlength="0" lo="97" lf="97">each dataset may optionally indicate a maximum time range to request data (<a href="https://github.com/hapi-server/data-specification/issues/136">#136</a>)</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">97</span></div>
            </div>
          </li>
        </ol>
        <div class="block-info" style="display: none;"><span class="line-numbers">95-97</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h1 lo="100" lf="100"><a name="2-introduction" number="2" lo="100" raw="# 2 Introduction" class="anchor hanchor" href="#2-introduction"><span class="hnumber">2</span>&nbsp;<span class="htext">Introduction</span></a></h1>
        <div class="block-info" style="display: none;"><span class="line-numbers">100</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="102" lf="102"><a name="21-overview" number="2.1" lo="102" raw="## 2.1 Overview " class="anchor hanchor" href="#21-overview"><span class="hnumber">2.1</span>&nbsp;<span class="htext">Overview</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">102</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="104" lf="104">This document describes the Heliophysics Application Programmer’s Interface (HAPI) specification, which is an API, metadata, and data streaming format specification for time-series data. The intent of this specification is to enhance interoperability among time series data providers. The objective of this specification is to capture features available from many existing data providers and to codify implementation details so that providers can use a common API. This will make it possible to obtain time series science data content seamlessly from many sources and use a variety of programming languages.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">104</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="106" lf="106">This document is intended to be used by two groups of people: first by data providers who want to make time-series data available through a HAPI server, and second by data users who want to understand how data is made available from a HAPI server, or perhaps to write client software to obtain data from an existing HAPI server.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">106</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="108" lf="108">HAPI constitutes a minimum but complete set of capabilities needed for a server to allow access to the time series data values within one or more data collections. Because of its focus on data access, the HAPI metadata standard is not intended for complex search and discovery. However, the metadata schema allows ways to indicate where further descriptive details for any dataset could be found and the metadata contains enough information to enable its use by complex search and discovery software.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">108</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="110" lf="110">The HAPI API is based on REpresentational State Transfer (REST) principles, which emphasize that URLs are stable endpoints through which clients can request data. Because it is based on well-established HTTP request and response rules, a wide range of HTTP clients can be used to interact with HAPI servers.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">110</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="112" lf="112">Key definitions for terms used in this document include</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">112</span></div>
      </div>
      <div class="block">
        <ul lo="114" lf="127" class="loose">
          <li markerlength="2" padlength="0" lo="114" lf="114">
            <div class="block">
              <p padlength="0" lo="114" lf="114"><strong type="md">parameter</strong> – a measured science quantity or a related ancillary quantity at one instant in time; may be scalar or a multi-dimensional array as a function; must have units and must have a fill value that indicates no measurement was available or absent information</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">114</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="115" lf="115">
            <div class="block">
              <p padlength="0" lo="115" lf="115"><strong type="md">record</strong> – all the parameters and an associated time value</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">115</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="116" lf="117">
            <div class="block">
              <p padlength="0" lo="116" lf="117"><strong type="md">dataset</strong> – a collection of records with the same parameters; a HAPI service presents a dataset as a seamless collection of time-ordered records such that it or a subset of it can be retrieved without knowledge of the actual storage details</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">116-117</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="118" lf="118">
            <div class="block">
              <p padlength="0" lo="118" lf="118"><strong type="md">catalog</strong> - a collection of datasets</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">118</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="119" lf="129">
            <div class="block">
              <p padlength="0" lo="119" lf="120"><strong type="md">request parameter</strong> – keywords that appear after the <code type="md">?</code> in a URL</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">119-120</span></div>
            </div>
            <div class="block">
              <p padlength="2" lo="121" lf="121">For example, in the request (see <a href="#1-significant-changes-to-specification">change notes</a>)</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">121</span></div>
            </div>
            <div class="block">
              <p padlength="2" lo="123" lf="123"><code type="md">http://server/hapi/data?dataset=alpha&amp;start=2016-07-13&amp;stop=2016-07-14</code></p>
              <div class="block-info" style="display: none;"><span class="line-numbers">123</span></div>
            </div>
            <div class="block">
              <p padlength="2" lo="125" lf="125">the three request parameters are <code type="md">dataset</code> (corresponding to the identifier of the dataset), <code type="md">start</code>, and <code type="md">stop</code>. They have values of <code type="md">alpha</code>, <code type="md">2016-07-13</code>, and <code type="md">2016-07-14</code>, respectively. This document will always use the full phrase “request parameter” to refer to these URL elements to distinguish them from the parameters in a dataset.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">125</span></div>
            </div>
            <div class="block">
              <p padlength="2" lo="127" lf="127">In the above URL, the segment represented as <code type="md">server</code> captures the hostname for the HAPI server as well as any prefix path elements before the required <code type="md">hapi</code> element. For example, in <code type="md">http://example.com/public/data/hapi</code> the <code type="md">server</code> element is <code type="md">example.com/public/data</code>.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">127</span></div>
            </div>
          </li>
        </ul>
        <div class="block-info" style="display: none;"><span class="line-numbers">114-127</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="129" lf="129"><a name="22-facilitating-adoption" number="2.2" lo="129" raw="## 2.2 Facilitating Adoption" class="anchor hanchor" href="#22-facilitating-adoption"><span class="hnumber">2.2</span>&nbsp;<span class="htext">Facilitating Adoption</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">129</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="131" lf="131">The text from this section was taken from <a href="https://dx.doi.org/10.1029/2021JA029534">Weigel et al., 2021</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">131</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="133" lf="133">The HAPI specification is designed to provide a standardized way to provide streaming services that many time-series data providers already offer. The use of the common aspects of existing features of HP data providers means that data providers can, with minimal effort, modify existing streaming servers to make them HAPI compliant.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">133</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="135" lf="135">In addition, several tools have been developed to facilitate adoption.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">135</span></div>
      </div>
      <div class="block">
        <ol lo="137" lf="141" class="loose">
          <li markerlength="3" padlength="0" lo="137" lf="138">
            <div class="block">
              <p padlength="0" lo="137" lf="138">Although the HAPI streaming formats are simple enough that only 10-20 lines of code are needed to read a basic HAPI response, there are error conditions and other optimizations to consider (such as caching and parallelization of requests); a robust and comprehensive client implementation is beyond what should be expected of science users or even software developers who want to create tools that use HAPI data. Mature HAPI server client libraries are available from <a href="https://github.com/hapi-server?q=client-*">open-source HAPI projects</a> for Java, IDL, MATLAB, and Python, so most users can begin with these libraries. These clients read a HAPI response into a data structure appropriate for the given language (e.g., in Python, the response is read into a NumPy N-D array with timestamps converted to Python <code type="md">datetime</code> objects). Work is underway to incorporate HAPI readers into existing popular analysis frameworks, such as <a href="http://spedas.org">SPEDAS in IDL and Python</a>, <a href="http://autoplot.org">Autoplot in Java</a>, <a href="https://sunpy.org">SunPy in Python</a>, and <a href="http://spedas.org">SpacePy in Python</a>.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">137-138</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="139" lf="140">
            <div class="block">
              <p padlength="0" lo="139" lf="140">To assist server developers with adoption, <a href="https://github.com/hapi-server/server-nodejs">a cross-platform reference server</a> has been developed. With this server, a data provider only needs to provide HAPI JSON metadata and a command-line program that emits HAPI CSV given inputs of a dataset identifier and start/stop times. The server handles HAPI error responses, request validation, and logging.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">139-140</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="141" lf="143">
            <div class="block">
              <p padlength="0" lo="141" lf="142">A <a href="https://hapi-server.org/verify">validator/verifier</a> has been developed that runs many tests on a server. The server executes a comprehensive suite of tests for compliance with the specification. By either downloading and running the test software locally, or by entering the URL of a HAPI server into a website, data providers can test most aspects of their HAPI implementation, with detailed results indicating warnings or errors. This has proven to be a very effective way to assist developers, and it helps ensure that new HAPI servers are fully functional. The tests include checks of JSON responses against the HAPI metadata schema, verifying that the server handles different allowed start/stop time representations (e.g, year, day-of-year and year, month day with varying amounts of additional time precision), error responses and message, timeouts, and testing that output is independent of the output format. Also, the validator/verifier makes recommendations. For example, if a server does not include cross-origin request sharing headers or respond with compressed data when gzip is specified in the <code type="md">Accept-Encoding</code> request header, it emits a message noting their advantages and a link to information on how to enable or implement these features.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">141-142</span></div>
            </div>
          </li>
        </ol>
        <div class="block-info" style="display: none;"><span class="line-numbers">137-141</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="143" lf="143"><a name="23-limitations" number="2.3" lo="143" raw="## 2.3 Limitations" class="anchor hanchor" href="#23-limitations"><span class="hnumber">2.3</span>&nbsp;<span class="htext">Limitations</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">143</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="145" lf="145">Because HAPI requires a single time column to be the first column, this requires each record (one row of data) to be associated with one time value (the first value in the row). This has implications for serving files with multiple time arrays in them. Supposed a file contains 1-second data, 3-second data, and 5-second data, all from the same measurement but averaged differently. A HAPI server could expose this data, but not as a single dataset. To a HAPI server, each time resolution could be presented as a separate dataset, each with its own unique time array.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">145</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="147" lf="147">Note that there are only a few supported data types: <code type="md">isotime</code>, <code type="md">string</code>, <code type="md">integer</code>, and <code type="md">double</code>. This is intended to keep the client code simple in terms of dealing with the data stream. However, the spec may be expanded in the future to include other types, such as 4-byte floating-point values (which would be called float), or 2-byte integers (which would be called short).</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">147</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h1 lo="149" lf="149"><a name="3-endpoints" number="3" lo="149" raw="# 3 Endpoints" class="anchor hanchor" href="#3-endpoints"><span class="hnumber">3</span>&nbsp;<span class="htext">Endpoints</span></a></h1>
        <div class="block-info" style="display: none;"><span class="line-numbers">149</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="151" lf="151"><a name="31-overview" number="3.1" lo="151" raw="## 3.1 Overview" class="anchor hanchor" href="#31-overview"><span class="hnumber">3.1</span>&nbsp;<span class="htext">Overview</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">151</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="153" lf="153">The HAPI specification has five required endpoints that give clients a precise way to first determine the data holdings of the server and then to request data. The functionality of the required endpoints is as follows:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">153</span></div>
      </div>
      <div class="block">
        <ol lo="155" lf="163" class="loose">
          <li markerlength="3" padlength="0" lo="155" lf="156">
            <div class="block">
              <p padlength="1" lo="155" lf="156"><code type="md">/hapi/capabilities</code> lists the output formats the server can stream (<code type="md">csv</code>, <code type="md">binary</code>, or <code type="md">json</code>, <a href="#374-response-formats">described below</a>).</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">155-156</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="157" lf="158">
            <div class="block">
              <p padlength="1" lo="157" lf="158"><code type="md">/hapi/about</code> lists the server id and title, contact information, and a brief description of the datasets served (this endpoint is new in the version 3 HAPI specification).</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">157-158</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="159" lf="160">
            <div class="block">
              <p padlength="1" lo="159" lf="160"><code type="md">/hapi/catalog</code> lists the catalog of available datasets; each dataset is associated with a unique id and may optionally have a title.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">159-160</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="161" lf="162">
            <div class="block">
              <p padlength="1" lo="161" lf="162"><code type="md">/hapi/info</code> lists information about a dataset with a given id; a primary component of the description is the list of parameters in the dataset.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">161-162</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="163" lf="165">
            <div class="block">
              <p padlength="1" lo="163" lf="164"><code type="md">/hapi/data</code> streams data for a dataset of a given id and over a given time range; a subset of parameters in a dataset may be requested (default is all parameters).</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">163-164</span></div>
            </div>
          </li>
        </ol>
        <div class="block-info" style="display: none;"><span class="line-numbers">155-163</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="165" lf="165">There is also an optional landing page endpoint <code type="md">/hapi</code> that returns human-readable HTML. Although there is recommended content for this landing page, it is not essential to the functioning of the server.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">165</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="167" lf="167">The five required endpoints are REST-style in that the resulting HTTP response is the complete response for each endpoint. In particular, the <code type="md">/data</code> endpoint does not give URLs for file or links to where the data can be downloaded; instead, it streams the data contained in the HTTP response body. The full specification for each endpoint is described below.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">167</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="169" lf="169">All endpoints must have a <code type="md">/hapi</code> path element in the URL, and only the <code type="md">/info</code> and <code type="md">/data</code> endpoints take query parameters:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">169</span></div>
      </div>
      <div class="block">
        <pre lo="171" lf="178"><div class="block"><code lo="172">http://server/hapi (Optional HTML landing page)</code><div class="line-number">1</div></div><div class="block"><code lo="173">http://server/hapi/capabilities</code><div class="line-number">2</div></div><div class="block"><code lo="174">http://server/hapi/about</code><div class="line-number">3</div></div><div class="block"><code lo="175">http://server/hapi/catalog</code><div class="line-number">4</div></div><div class="block"><code lo="176">http://server/hapi/info?dataset=...[&amp;...]</code><div class="line-number">5</div></div><div class="block"><code lo="177">http://server/hapi/data?dataset=...&amp;...</code><div class="line-number">6</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">171-178</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="180" lf="180">Requests to a HAPI server must not change the server state. Therefore, all HAPI endpoints must respond only to HTTP HEAD and GET requests.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">180</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="182" lf="182">The request parameters and their allowed values must be strictly enforced by the server. <strong type="md">HAPI servers must not add additional request parameters beyond those in the specification.</strong> If a request URL contains any unrecognized or misspelled request parameters, a HAPI server must respond with an error status (see <a href="#4-status-codes">HAPI Status Codes</a> for more details). The principle being followed is that the server must not silently ignore unrecognized request parameters because this would falsely indicate to clients that the request parameter was understood and was taken into account when creating the output. That is, if a server is given a request parameter that is not part of the HAPI specification, such as <code type="md">averagingInterval=5s</code>, the server must report an error for two reasons: 1. additional request parameters are not allowed, and 2. the server will not do any averaging.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">182</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="184" lf="184">The outputs from a HAPI server to the <code type="md">about</code>, <code type="md">catalog</code>, <code type="md">capabilities</code>, and <code type="md">info</code> endpoints are JSON objects, the formats of which are described below in the sections detailing each endpoint. The <code type="md">data</code> endpoint must be able to deliver Comma Separated Value (CSV) data following the RFC 4180 standard [<a href="#6-references">1</a>], but may optionally deliver data content in binary format or JSON format. The response stream formats are described in the <a href="#374-response-formats">Data Stream Content</a> section.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">184</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="186" lf="186">The following is the detailed specification for the five main HAPI endpoints as well as the optional landing page endpoint.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">186</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="188" lf="188"><a name="32-hapi" number="3.2" lo="188" raw="## 3.2 `hapi`" class="anchor hanchor" href="#32-hapi"><span class="hnumber">3.2</span>&nbsp;<span class="htext"><code type="md">hapi</code></span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">188</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="190" lf="190">This root endpoint is optional and should provide a human-readable landing page for the server. Unlike the other endpoints, there is no strict definition for the output, but if present, it should include a brief description of the data and other endpoints and links to documentation on how to use the server. An example landing page that can be easily customized for a new server is given in <a href="#81-sample-landing-page">the Appendix</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">190</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="192" lf="192">There are many options for landing page content, such as an HTML view of the catalog or links to commonly requested data.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">192</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="194" lf="194"><strong type="md">Sample Invocation</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">194</span></div>
      </div>
      <div class="block">
        <pre lo="196" lf="198">http://server/hapi</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">196-198</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="200" lf="200"><strong type="md">Request Parameters</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">200</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="202" lf="202">None</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">202</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="204" lf="204"><strong type="md">Response</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">204</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="206" lf="206">The response is in HTML format with a mime type of <code type="md">text/html</code>. There is no specification for the content but should provide an overview that is useful for science users.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">206</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="208" lf="208"><strong type="md">Example</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">208</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="210" lf="210">Retrieve the landing page for this server.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">210</span></div>
      </div>
      <div class="block">
        <pre lo="212" lf="214">http://server/hapi</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">212-214</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="216" lf="216"><strong type="md">Example Response</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">216</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="218" lf="218">See <a href="#81-sample-landing-page">the Appendix</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">218</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="220" lf="220"><a name="33-about" number="3.3" lo="220" raw="## 3.3 `about`" class="anchor hanchor" href="#33-about"><span class="hnumber">3.3</span>&nbsp;<span class="htext"><code type="md">about</code></span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">220</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="222" lf="222"><strong type="md">Sample Invocation</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">222</span></div>
      </div>
      <div class="block">
        <pre lo="224" lf="226">http://server/hapi/about</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">224-226</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="228" lf="228"><strong type="md">Request Parameters</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">228</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="230" lf="230">None</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">230</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="232" lf="232"><strong type="md">Response</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">232</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="234" lf="234">The server’s response to this endpoint must be in JSON format [<a href="#6-references">3</a>] as defined by RFC-7159, and the response must indicate a mime type of <code type="md">application/json</code>. Server attributes are described using keyword-value pairs, with the required and optional keywords described in the following table.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">234</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="236" lf="236"><strong type="md">About Object</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">236</span></div>
      </div>
      <div class="block">
        <table lo="238" lf="245">
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">id</code></td>
              <td>string</td>
              <td><strong type="md">Required</strong> A unique ID for the server. Ideally, this ID has the organization name in it, e.g., NASA/SPDF/SSCWeb, NASA/SPDF/CDAWeb, INTERMAGNET, UniversityIowa/VanAllen, LASP/TSI, etc.</td>
            </tr>
            <tr>
              <td><code type="md">title</code></td>
              <td>string</td>
              <td><strong type="md">Required</strong> A short human-readable name for the server. The suggested maximum length is 40 characters.</td>
            </tr>
            <tr>
              <td><code type="md">contact</code></td>
              <td>string</td>
              <td><strong type="md">Required</strong> Contact information or email address for server issues. HAPI clients should show this contact information when it is certain that an error is due to a problem with the server (as opposed to the client). Ideally, a HAPI client will recommend that the user check their connection and try again at least once before contacting the server contact.</td>
            </tr>
            <tr>
              <td><code type="md">description</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> A brief description of the type of data the server provides.</td>
            </tr>
            <tr>
              <td><code type="md">contactID</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> The identifier in the discovery system for information about the contact. For example, a SPASE ID of a person identified in the <code type="md">contact</code> string.</td>
            </tr>
            <tr>
              <td><code type="md">citation</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> How to cite data server. An actionable DOI is preferred (e.g., <a href="https://doi.org/">https://doi.org/</a>…). This <code type="md">citation</code> differs from the <code type="md">citation</code> in an <code type="md">/info</code> response. Here the citation is for the entity that maintains the data server.</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="block">
        <p padlength="0" lo="247" lf="247"><strong type="md">Example</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">247</span></div>
      </div>
      <div class="block">
        <pre lo="249" lf="251">http://server/hapi/about</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">249-251</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="253" lf="253"><strong type="md">Example Response:</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">253</span></div>
      </div>
      <div class="block">
        <pre lo="255" lf="263" class="language-javascript"><div class="block"><code lo="256">{</code><div class="line-number">1</div></div><div class="block"><code lo="257">  <span class="hljs-string">"HAPI"</span>: <span class="hljs-string">"3.1"</span>,</code><div class="line-number">2</div></div><div class="block"><code lo="258">  <span class="hljs-string">"status"</span>: {<span class="hljs-string">"code"</span>: <span class="hljs-number">1200</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"OK"</span>},</code><div class="line-number">3</div></div><div class="block"><code lo="259">  <span class="hljs-string">"id"</span>: <span class="hljs-string">"TestData3.0"</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="260">  <span class="hljs-string">"title"</span>: <span class="hljs-string">"HAPI 3.0 Test Data and Metadata"</span>,</code><div class="line-number">5</div></div><div class="block"><code lo="261">  <span class="hljs-string">"contact"</span>: <span class="hljs-string">"examplel@example.org"</span></code><div class="line-number">6</div></div><div class="block"><code lo="262">}</code><div class="line-number">7</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">255-263</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="265" lf="265"><a name="34-capabilities" number="3.4" lo="265" raw="## 3.4 `capabilities`" class="anchor hanchor" href="#34-capabilities"><span class="hnumber">3.4</span>&nbsp;<span class="htext"><code type="md">capabilities</code></span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">265</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="267" lf="267">This endpoint describes relevant implementation capabilities for this server. Currently, the only possible variability from server to server is the list of output formats that are supported.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">267</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="269" lf="269">A server must support the <code type="md">csv</code> output format, but <code type="md">binary</code> output format and <code type="md">json</code> output may optionally be supported. Servers may support custom output formats, which would be advertised here. All custom formats listed by a server must begin with the string <code type="md">x_</code> to indicate that they are custom formats and avoid naming conflicts with possible future additions to the specification.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">269</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="271" lf="271"><strong type="md">Sample Invocation</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">271</span></div>
      </div>
      <div class="block">
        <pre lo="273" lf="275">http://server/hapi/capabilities</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">273-275</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="277" lf="277"><strong type="md">Request Parameters</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">277</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="279" lf="279">None</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">279</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="281" lf="281"><strong type="md">Response</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">281</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="283" lf="283">The server’s response to this endpoint must be in JSON format [<a href="#6-references">3</a>] as defined by RFC 7159, and the response must indicate a mime type of <code type="md">application/json</code>. Server capabilities are described using keyword-value pairs, with <code type="md">outputFormats</code> being the only keyword currently in use.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">283</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="285" lf="285"><strong type="md">Capabilities Object</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">285</span></div>
      </div>
      <div class="block">
        <table lo="287" lf="291">
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">HAPI</code></td>
              <td>string</td>
              <td><strong type="md">Required</strong> The version number of the HAPI specification this description complies with.</td>
            </tr>
            <tr>
              <td><code type="md">status</code></td>
              <td>Status object</td>
              <td><strong type="md">Required</strong> Server response status for this request.</td>
            </tr>
            <tr>
              <td><code type="md">outputFormats</code></td>
              <td>string array</td>
              <td><strong type="md">Required</strong> The list of output formats the server can emit. All HAPI servers must support at least <code type="md">csv</code> output format, with <code type="md">binary</code> and <code type="md">json</code> output formats being optional.</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="block">
        <p padlength="0" lo="293" lf="293"><strong type="md">Example</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">293</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="295" lf="295">Retrieve a listing of capabilities of this server.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">295</span></div>
      </div>
      <div class="block">
        <pre lo="297" lf="299">http://server/hapi/capabilities</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">297-299</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="301" lf="301"><strong type="md">Example Response:</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">301</span></div>
      </div>
      <div class="block">
        <pre lo="303" lf="309" class="language-javascript"><div class="block"><code lo="304">{</code><div class="line-number">1</div></div><div class="block"><code lo="305">  <span class="hljs-string">"HAPI"</span>: <span class="hljs-string">"3.1"</span>,</code><div class="line-number">2</div></div><div class="block"><code lo="306">  <span class="hljs-string">"status"</span>: {<span class="hljs-string">"code"</span>: <span class="hljs-number">1200</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"OK"</span>},</code><div class="line-number">3</div></div><div class="block"><code lo="307">  <span class="hljs-string">"outputFormats"</span>: [<span class="hljs-string">"csv"</span>, <span class="hljs-string">"binary"</span>, <span class="hljs-string">"json"</span>]</code><div class="line-number">4</div></div><div class="block"><code lo="308">}</code><div class="line-number">5</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">303-309</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="311" lf="312">If a server only reports an output format of <code type="md">csv</code>, then requesting <code type="md">binary</code> data should cause the server to respond with an error status of <code type="md">1409 "Bad request - unsupported output format"</code> with a corresponding HTTP response code of 400. <a href="#4-status-codes">See below</a> for more about error responses.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">311-312</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="314" lf="314" class="highlighted"><a name="35-catalog" number="3.5" lo="314" raw="## 3.5 `catalog`" class="anchor hanchor" href="#35-catalog"><span class="hnumber">3.5</span>&nbsp;<span class="htext"><code type="md">catalog</code></span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">314</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="316" lf="316">This endpoint provides a list of datasets available from the server.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">316</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="318" lf="318"><strong type="md">Sample Invocation</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">318</span></div>
      </div>
      <div class="block">
        <pre lo="320" lf="322">http://server/hapi/catalog</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">320-322</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="324" lf="324"><strong type="md">Request Parameters</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">324</span></div>
      </div>
      <div class="block">
        <table lo="326" lf="328">
          <thead>
            <tr>
              <th>Name</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">include</code></td>
              <td><strong type="md">Optional</strong> For each dataset, include the metadata that would be obtained from an <code type="md">/info</code> response for that dataset</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="block">
        <p padlength="0" lo="330" lf="330"><strong type="md">Response</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">330</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="332" lf="333">The response is in JSON format [<a href="#6-references">3</a>] as defined by RFC-7159 and has a MIME type of <code type="md">application/json</code>. The catalog is a simple listing of identifiers for the datasets available from the server. Additional metadata about each dataset is available through the <code type="md">info</code> endpoint (described below). The catalog takes no query parameters and always lists the full catalog.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">332-333</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="335" lf="335"><strong type="md">Catalog Object</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">335</span></div>
      </div>
      <div class="block">
        <table lo="337" lf="341">
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">HAPI</code></td>
              <td>string</td>
              <td><strong type="md">Required</strong> The version number of the HAPI specification this description complies with.</td>
            </tr>
            <tr>
              <td><code type="md">status</code></td>
              <td>object</td>
              <td><strong type="md">Required</strong> Server response status for this request. (see <a href="#4-status-codes">HAPI Status Codes</a>)</td>
            </tr>
            <tr>
              <td><code type="md">catalog</code></td>
              <td>array of Dataset</td>
              <td><strong type="md">Required</strong> A list of datasets available from this server.</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="block">
        <p padlength="0" lo="343" lf="343"><strong type="md">Dataset Object</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">343</span></div>
      </div>
      <div class="block">
        <table lo="345" lf="349">
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">id</code></td>
              <td>string</td>
              <td><strong type="md">Required</strong> The computer-friendly identifier (<a href="#82-allowed-characters-in-id-dataset-and-parameter">allowed characters</a>) that the host system uses to locate the dataset. Each identifier must be unique within the HAPI server where it is provided.</td>
            </tr>
            <tr>
              <td><code type="md">title</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> A short human-readable name for the dataset. If none is given, it defaults to the id. The suggested maximum length is 40 characters.</td>
            </tr>
            <tr>
              <td><code type="md">info</code></td>
              <td>object</td>
              <td><strong type="md">Optional</strong> but required for <code type="md">include=all</code> requests. This object should be identical in content to what is returned by a <code type="md">/info?dataset=id</code> request.</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="block">
        <p padlength="0" lo="351" lf="351"><strong type="md">Example</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">351</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="353" lf="353">Retrieve a listing of datasets shared by this server.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">353</span></div>
      </div>
      <div class="block">
        <pre lo="355" lf="357">http://server/hapi/catalog</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">355-357</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="359" lf="359"><strong type="md">Example Response:</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">359</span></div>
      </div>
      <div class="block">
        <pre lo="361" lf="373" class="language-javascript"><div class="block"><code lo="362">{</code><div class="line-number">1</div></div><div class="block"><code lo="363">   <span class="hljs-string">"HAPI"</span> : <span class="hljs-string">"3.1"</span>,</code><div class="line-number">2</div></div><div class="block"><code lo="364">   <span class="hljs-string">"status"</span>: {<span class="hljs-string">"code"</span>: <span class="hljs-number">1200</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"OK"</span>},</code><div class="line-number">3</div></div><div class="block"><code lo="365">   <span class="hljs-string">"catalog"</span>: </code><div class="line-number">4</div></div><div class="block"><code lo="366">               [</code><div class="line-number">5</div></div><div class="block"><code lo="367">                  {<span class="hljs-string">"id"</span>: <span class="hljs-string">"ACE_MAG"</span>, <span class="hljs-attr">title</span>:<span class="hljs-string">"ACE Magnetometer data"</span>},</code><div class="line-number">6</div></div><div class="block"><code lo="368">                  {<span class="hljs-string">"id"</span>: <span class="hljs-string">"data/IBEX/ENA/AVG5MIN"</span>},</code><div class="line-number">7</div></div><div class="block"><code lo="369">                  {<span class="hljs-string">"id"</span>: <span class="hljs-string">"data/CRUISE/PLS"</span>},</code><div class="line-number">8</div></div><div class="block"><code lo="370">                  {<span class="hljs-string">"id"</span>: <span class="hljs-string">"any_identifier_here"</span>}</code><div class="line-number">9</div></div><div class="block"><code lo="371">               ]</code><div class="line-number">10</div></div><div class="block"><code lo="372" class="">}</code><div class="line-number">11</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">361-373</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="375" lf="375" class=""><strong type="md">Example</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">375</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="377" lf="377">Retrieve a listing of datasets shared by this server.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">377</span></div>
      </div>
      <div class="block">
        <pre lo="379" lf="381">http://server/hapi/catalog?include=all</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">379-381</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="383" lf="383"><strong type="md">Example Response:</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">383</span></div>
      </div>
      <div class="block">
        <pre lo="385" lf="414" class="language-javascript"><div class="block"><code lo="386" class="">{</code><div class="line-number">1</div></div><div class="block"><code lo="387" class="">   "HAPI" : "3.1",</code><div class="line-number">2</div></div><div class="block"><code lo="388" class="">   "status": {"code": 1200, "message": "OK"},</code><div class="line-number">3</div></div><div class="block"><code lo="389" class="">   "catalog": </code><div class="line-number">4</div></div><div class="block"><code lo="390" class="">               [</code><div class="line-number">5</div></div><div class="block"><code lo="391" class="">                  {</code><div class="line-number">6</div></div><div class="block"><code lo="392" class="">                   "id": "MAG1", title:"Magnetometer data",</code><div class="line-number">7</div></div><div class="block"><code lo="393" class="">                   "info": {</code><div class="line-number">8</div></div><div class="block"><code lo="394" class="">                     "startDate": 2010-01-01T00:00:00Z",</code><div class="line-number">9</div></div><div class="block"><code lo="395" class="">                     "stopDate": 2020-01-02T00:00:00Z",</code><div class="line-number">10</div></div><div class="block"><code lo="396" class="">                     "parameters": [{"name": "Time", ...}]</code><div class="line-number">11</div></div><div class="block"><code lo="397" class="">                     ...</code><div class="line-number">12</div></div><div class="block"><code lo="398" class="">                    }</code><div class="line-number">13</div></div><div class="block"><code lo="399" class="">                  },</code><div class="line-number">14</div></div><div class="block"><code lo="400" class="">                  {</code><div class="line-number">15</div></div><div class="block"><code lo="401" class="">                   "id": "MAG2", title:"Magnetometer data",</code><div class="line-number">16</div></div><div class="block"><code lo="402" class="">                   "info": {</code><div class="line-number">17</div></div><div class="block"><code lo="403" class="">                     "startDate": 2000-01-02T00:00:00Z",</code><div class="line-number">18</div></div><div class="block"><code lo="404" class="">                     "stopDate": 2010-01-01T00:00:00Z",</code><div class="line-number">19</div></div><div class="block"><code lo="405" class="">                     "parameters": [{"name": "Time", ...}]</code><div class="line-number">20</div></div><div class="block"><code lo="406" class="">                     ...</code><div class="line-number">21</div></div><div class="block"><code lo="407" class="">                    }</code><div class="line-number">22</div></div><div class="block"><code lo="408" class="">                  },</code><div class="line-number">23</div></div><div class="block"><code lo="409" class="">                  {</code><div class="line-number">24</div></div><div class="block"><code lo="410" class="">                      ...</code><div class="line-number">25</div></div><div class="block"><code lo="411" class="">                  }</code><div class="line-number">26</div></div><div class="block"><code lo="412" class="">               ]</code><div class="line-number">27</div></div><div class="block"><code lo="413" class="">}</code><div class="line-number">28</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">385-414</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="416" lf="416" class="active">where <code type="md">...</code> is a placeholder for additional metadata that has been omitted for clarity.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">416</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="419" lf="419" class="">The identifiers must be unique within a single HAPI server. Also, dataset identifiers in the catalog should be stable over time. Including rapidly changing version numbers or other revolving elements (dates, processing ids, etc.) in the datasets identifiers should be avoided. The intent of the HAPI specification is to allow data to be referenced using RESTful URLs that have a reasonable lifetime.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">419</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="421" lf="421">Identifiers must be limited to the set of characters, including upper and lower case letters, numbers, and the following characters: comma, colon, slash, minus, and plus. See <a href="https://github.com/hapi-server/data-specification/issues/89">89</a> for a discussion of this.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">421</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="423" lf="423"><a name="36-info" number="3.6" lo="423" raw="## 3.6 `info`" class="anchor hanchor" href="#36-info" lf="423"><span class="hnumber">3.6</span>&nbsp;<span class="htext"><code type="md">info</code></span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">423</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="425" lf="425">This endpoint provides a data header for a given dataset. The header is expressed in JSON format [<a href="#6-references">3</a>] as defined by RFC-7159 and has a MIME type of <code type="md">application/json</code>. The specification for the header is that it provides a minimal amount of metadata that allows for the automated reading by a client of the data content that is streamed via the <code type="md">data</code> endpoint. The header must include a list of the parameters in the dataset, as well as the date range covered by the dataset. There are also optional metadata elements for capturing other high-level information, such as a brief description of the dataset, the nominal cadence of the data, and ways to learn more about a dataset. The table below lists all required and optional dataset attributes in the header.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">425</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="427" lf="427">Servers may include additional custom (server-specific) keywords or keyword/value pairs in the header provided that the keywords begin with the prefix <code type="md">x_</code>. While a HAPI server must check all request parameters (servers must return an error code given any unrecognized request parameter as described earlier), the JSON content output by a HAPI server may contain additional, user-defined metadata elements. All non-standard metadata keywords must begin with the prefix <code type="md">x_</code> to indicate to HAPI clients that these are extensions. Custom clients could make use of the additional keywords, but standard clients would ignore the extensions. By using the standard prefix, the custom keywords will not conflict with any future keywords added to the HAPI standard. Servers using these extensions may wish to include additional, domain-specific characters after the <code type="md">x_</code> to avoid possible collisions with extensions from other servers.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">427</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="429" lf="429">Each parameter listed in the header must itself be described by specific metadata elements, and a separate table below describes the required and optional parameter attributes.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">429</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="431" lf="431">By default, the parameter list in the <code type="md">info</code> response will include <em type="md" marker="*">all</em> parameters available in the dataset. However, a client may request a header for just a subset of the parameters. The subset of interest is specified as a comma-separated list via the request parameter called <code type="md">parameters</code>. (Note that the client would have to obtain the parameter names from a prior request.) There must not be any duplicates in the subset list, and the subset list must be arranged according to the ordering in the original, full list of parameters. The reduced header is useful because it is also possible to request a subset of parameters when asking for data (see the <code type="md">data</code> endpoint), and a reduced header can be requested that would then match the subset of parameters in the data. This correspondence of reduced header and reduced data ensures that a data request for a subset of parameters can be interpreted properly even if additional subset requests are made with no header. (Although a way to write a client as safe as possible would be to always request the full header and rely on its parameter ordering to determine the data column ordering.)</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">431</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="433" lf="433">Note that the <code type="md">data</code> endpoint may optionally prepend the <code type="md">info</code> header to the data stream when <code type="md">include=header</code> is included in the request URL. In cases where the <code type="md">data</code> endpoint response includes a header followed by <code type="md">csv</code> or <code type="md">binary</code> data, the header must always end with a newline. This enables the end of the JSON header to be more easily detected.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">433</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="435" lf="435"><strong type="md">Sample Invocation</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">435</span></div>
      </div>
      <div class="block">
        <pre lo="437" lf="439">http://server/hapi/info?dataset=ACE_MAG</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">437-439</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="441" lf="441"><a name="361-request-parameters" number="3.6.1" lo="441" raw="### 3.6.1 Request Parameters" class="anchor hanchor" href="#361-request-parameters" lf="441"><span class="hnumber">3.6.1</span>&nbsp;<span class="htext">Request Parameters</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">441</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="443" lf="443">Items with a * superscript in the following table have been modified from version 2 to 3; see <a href="#1-significant-changes-to-specification">change notes</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">443</span></div>
      </div>
      <div class="block">
        <table lo="445" lf="448">
          <thead>
            <tr>
              <th>Name</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">dataset</code><a href="#1-significant-changes-to-specification"><sup>&nbsp;*&nbsp;</sup></a></td>
              <td><strong type="md">Required</strong> The identifier for the dataset (<a href="#82-allowed-characters-in-id-dataset-and-parameter">allowed characters</a>)</td>
            </tr>
            <tr>
              <td><code type="md">parameters</code></td>
              <td><strong type="md">Optional</strong> A subset of the parameters to include in the header (<a href="#82-allowed-characters-in-id-dataset-and-parameter">allowed characters</a>)</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="block">
        <p padlength="0" lo="450" lf="450"><strong type="md">Response</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">450</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="452" lf="452">The response is in JSON format [<a href="#6-references">3</a>] and provides metadata about one dataset.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">452</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="454" lf="454"><a name="362-info-response-object" number="3.6.2" lo="454" raw="### 3.6.2 Info Response Object" class="anchor hanchor" href="#362-info-response-object" lf="454"><span class="hnumber">3.6.2</span>&nbsp;<span class="htext">Info Response Object</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">454</span></div>
      </div>
      <div class="block">
        <table lo="456" lf="479">
          <thead>
            <tr>
              <th>Dataset Attribute</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">HAPI</code></td>
              <td>string</td>
              <td><strong type="md">Required</strong> The version number of the HAPI specification with which this description complies.</td>
            </tr>
            <tr>
              <td><code type="md">status</code></td>
              <td>object</td>
              <td><strong type="md">Required</strong> Server response status for this request; see <a href="#4-status-codes">HAPI Status Codes</a>.</td>
            </tr>
            <tr>
              <td><code type="md">format</code></td>
              <td>string</td>
              <td><strong type="md">Required</strong> (when the header is prefixed to data stream) Format of the data as <code type="md">csv</code> or <code type="md">binary</code> or <code type="md">json</code>.</td>
            </tr>
            <tr>
              <td><code type="md">parameters</code></td>
              <td>array of Parameter</td>
              <td><strong type="md">Required</strong> Description of the parameters in the data.</td>
            </tr>
            <tr>
              <td><code type="md">startDate</code></td>
              <td>string</td>
              <td><strong type="md">Required</strong> <a href="#376-representation-of-time">Restricted ISO 8601</a> date/time of first record of data in the entire dataset.</td>
            </tr>
            <tr>
              <td><code type="md">stopDate</code></td>
              <td>string</td>
              <td><strong type="md">Required</strong> <a href="#376-representation-of-time">Restricted ISO 8601</a> date/time of the last record of data in the entire dataset. For actively growing datasets, the end date can be approximate, but it is the server’s job to report an accurate end date.</td>
            </tr>
            <tr>
              <td><code type="md">timeStampLocation</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> Indicates the positioning of the timestamp within the measurement window. Must be one of <code type="md">begin</code>, <code type="md">center</code>, <code type="md">end</code> or <code type="md">other</code>. <strong type="md">If this attribute is absent, clients are to assume a default value of <code type="md">center</code>,</strong> which is meant to indicate the exact middle of the measurement window. A value of <code type="md">other</code> indicates that the location of the time stamp in the measurement window is not known or these options cannot be used for an accurate description. See also <a href="https://github.com/hapi-server/data-specification/wiki/implementation-notes">HAPI convention notes</a>. (Note: version 2.0 indicated that these labels were in all upper case. Starting with version 2.1, servers should use all lower case. Clients, however, should be able to handle both all upper case and all lower case versions of these labels.)</td>
            </tr>
            <tr>
              <td><code type="md">cadence</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> Time difference between records as an ISO 8601 duration. This is meant as a guide to the nominal cadence of the data and not a precise statement about the time between measurements. See also <a href="https://github.com/hapi-server/data-specification/wiki/implementation-notes">HAPI convention notes</a>.</td>
            </tr>
            <tr>
              <td><code type="md">sampleStartDate</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> <a href="#376-representation-of-time">Restricted ISO 8601</a> date/time of the start of a sample time period for a dataset, where the time period must contain a manageable, representative example of valid, non-fill data. <strong type="md">Required</strong> if <code type="md">sampleStopDate</code> given.</td>
            </tr>
            <tr>
              <td><code type="md">sampleStopDate</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> <a href="#376-representation-of-time">Restricted ISO 8601</a> date/time of the end of a sample time period for a dataset, where the time period must contain a manageable, representative example of valid, non-fill data. <strong type="md">Required</strong> if <code type="md">sampleStartDate</code> given.</td>
            </tr>
            <tr>
              <td><code type="md">maxRequestDuration</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> An <a href="https://en.wikipedia.org/wiki/ISO_8601#Durations">ISO 8601 duration</a> indicating the maximum duration for a request. This duration should be interpreted by clients as a limit above which a request for all parameters will very likely be rejected with a HAPI 1408 error; requests for fewer parameters and a longer duration may or may not be rejected.</td>
            </tr>
            <tr>
              <td><code type="md">description</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> A brief description of the dataset.</td>
            </tr>
            <tr>
              <td><code type="md">unitsSchema</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> The name of the units convention that describes how to parse all <code type="md">units</code> strings in this dataset. Currently, the only allowed values are: <code type="md">udunits2</code>, <code type="md">astropy3</code>, and <code type="md">cdf-cluster</code>. See below for additional information about these conventions. The list of allowed unit specifications is expected to grow to include other well-documented unit standards.</td>
            </tr>
            <tr>
              <td><code type="md">coordinateSystemSchema</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> The name of the schema or convention that contains a list of coordinate system names and definitions. If this keyword is provided, any <code type="md">coordinateSystemName</code> keyword given in a <a href="#366-parameter-object">parameter</a> definition should follow this schema. <a href="#364-coordinatesystemschema-details">Additional details</a> are below.</td>
            </tr>
            <tr>
              <td><code type="md">resourceURL</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> URL linking to more detailed information about this dataset.</td>
            </tr>
            <tr>
              <td><code type="md">resourceID</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> An identifier by which this data is known in another setting, for example, the SPASE ID.</td>
            </tr>
            <tr>
              <td><code type="md">creationDate</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> <a href="#376-representation-of-time">Restricted ISO 8601</a> date/time of the dataset creation.</td>
            </tr>
            <tr>
              <td><code type="md">citation</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> How to cite the data set. An actionable DOI is preferred (e.g., <a href="https://doi.org/">https://doi.org/</a>…). Note that there is a <code type="md">citation</code> in an <code type="md">/about</code> response that is focused on the server implementation, but this <code type="md">citation</code> is focused on one dataset.</td>
            </tr>
            <tr>
              <td><code type="md">modificationDate</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> <a href="#376-representation-of-time">Restricted ISO 8601</a> date/time of the modification of the any content in the dataset.</td>
            </tr>
            <tr>
              <td><code type="md">contact</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> Relevant contact person name (and possibly contact information) for science questions about the dataset.</td>
            </tr>
            <tr>
              <td><code type="md">contactID</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> The identifier in the discovery system for information about the contact. For example, the SPASE ID or ORCID of the person.</td>
            </tr>
            <tr>
              <td><code type="md">additionalMetadata</code></td>
              <td>object</td>
              <td><strong type="md">Optional</strong> A way to include a block of other (non-HAPI) metadata. See below for a description of the object, which can directly contain the metadata or point to it via a URL.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="482" lf="482"><a name="363-unitsschema-details" number="3.6.3" lo="482" raw="### 3.6.3 `unitsSchema` Details" class="anchor hanchor" href="#363-unitsschema-details" lf="482"><span class="hnumber">3.6.3</span>&nbsp;<span class="htext"><code type="md">unitsSchema</code> Details</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">482</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="484" lf="484">One optional attribute is <code type="md">unitsSchema</code>. This allows a server to specify, for each dataset, what convention is followed for the <code type="md">units</code> strings in the parameters of the dataset. Currently, the only allowed values for <code type="md">unitsSchema</code> are: <code type="md">udunits2</code>, <code type="md">astropy3</code>, and <code type="md">cdf-cluster</code>. These represent the currently known set of unit conventions that also have software available for parsing and interpreting unit strings. Note that only major version numbers (if available) are indicated in the convention name. It is expected that this list will grow over time as needed. Current locations of the official definitions and software tools for interpreting the various unit conventions are in the following table:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">484</span></div>
      </div>
      <div class="block">
        <table lo="486" lf="490">
          <thead>
            <tr>
              <th>Convention Name</th>
              <th>Current URL</th>
              <th>Description (context help if link is broken)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">udunits2</code></td>
              <td><a href="https://www.unidata.ucar.edu/software/udunits">https://www.unidata.ucar.edu/software/udunits</a></td>
              <td>Unidata from UCAR; a C library for units of physical quantities</td>
            </tr>
            <tr>
              <td><code type="md">astropy3</code></td>
              <td><a href="https://docs.astropy.org/en/stable/units/">https://docs.astropy.org/en/stable/units/</a></td>
              <td>package inside <code type="md">astropy</code> that handles defining, converting between, and performing arithmetic with physical quantities, such as meters, seconds, Hz, etc</td>
            </tr>
            <tr>
              <td><code type="md">cdf-cluster</code></td>
              <td><a href="https://caa.esac.esa.int/documents/DS-QMW-TN-0010.pdf">https://caa.esac.esa.int/documents/DS-QMW-TN-0010.pdf</a> which is referenced on this page: <a href="https://www.cosmos.esa.int/web/csa/documentation">https://www.cosmos.esa.int/web/csa/documentation</a></td>
              <td>conventions created and used by ESA’s Cluster mission</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="block">
        <div class="comment" lo="492" lf="496">
          <!--
These are not confirmed since they don't have updated or stable info available online. The PRBEM info is old, and until very recently, the MMS info was behind a password, so it's not clear if it is in a permanent location.
| `cdf-mms`      | https://lasp.colorado.edu/galaxy/display/mms/Units+of+Measure | conventions created and used by NASA's Magnetic Multiscale (MMS) mission |
| `cdf-prbem`    | https://craterre.onera.fr/prbem/home.html | units for particles and fields from the Panel on Radiation Belt Environment Modeling (PRBEM) |
-->
        </div>
        <div class="block-info" style="display: none;"><span class="line-numbers">492-496</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="499" lf="499"><a name="364-coordinatesystemschema-details" number="3.6.4" lo="499" raw="### 3.6.4 `coordinateSystemSchema` Details" class="anchor hanchor" href="#364-coordinatesystemschema-details" lf="499"><span class="hnumber">3.6.4</span>&nbsp;<span class="htext"><code type="md">coordinateSystemSchema</code> Details</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">499</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="501" lf="508">The <code type="md">parameter</code> object (described below) allows for a <code type="md">coordinateSystemName</code> to be associated with any parameter. In order to allow a precise and computer-readable meaning to these coordinate system names, a dataset can have a <code type="md">coordinateSystemSchema</code>. This schema should contain a computer-readable and publically available list of coordinate system names and definitions. Few such schemas exist. One suggested schema designation for Heliophysics is provided in the following table. If more community-approved schemas emerge for coordinate systems, then they could be included in the table, and if these schemas become widely adopted, it might make sense in the future to restrict <code type="md">coordinateSystemSchema</code> to a set of enumerated values, but for now it is unconstrained.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">501-508</span></div>
      </div>
      <div class="block">
        <table lo="510" lf="512">
          <thead>
            <tr>
              <th>Schema Name</th>
              <th>URL</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">spase2.4.1</code></td>
              <td><a href="https://spase-group.org/data/schema/spase-2.4.1.xsd">https://spase-group.org/data/schema/spase-2.4.1.xsd</a></td>
              <td>Schema containing the names and definitions of coordinate systems commonly used in Heliophysics. See also <a href="https://spase-group.org/data/model/spase-2.4.1/spase-2_4_1_xsd.html#CoordinateSystemName">an ΗΤΜL version of relevant section of schema.</a></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="block">
        <p padlength="0" lo="514" lf="514">This schema captures a Heliophysics-specific list of coordinate systems and is part of the larger SPASE metadata model (also Heliophysics-specific). It serves as an example of how a publically accessible list of coordinate frames can be referenced by the <code type="md">coordinateSystemSchema</code> keyword. Different communities can reference their own schemas.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">514</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="516" lf="520">Within the <code type="md">parameter</code> object is the <code type="md">coordinateSystemName</code> keyword, which contains the name of the coordinate system (must be from the schema). There is also the <code type="md">vectorComponents</code> keyword to capture the details about which coordinate components are present in the parameter. See the description below (<a href="#3610-specifying-vectorcomponents">section 3.6.10 Specifying vectorComponents</a>) for details on how to describe parameters that contain directional (i.e., vetor) quantities.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">516-520</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="522" lf="522"><a name="365-additional-metadata-object" number="3.6.5" lo="522" raw="### 3.6.5 Additional Metadata Object" class="anchor hanchor" href="#365-additional-metadata-object" lf="522"><span class="hnumber">3.6.5</span>&nbsp;<span class="htext">Additional Metadata Object</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">522</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="525" lf="525">HAPI allows for bulk inclusion of additional metadata that may exist for a dataset. Additional metadata keywords can be inserted by prefixing them with <code type="md">x_</code> (which indicates that the element is not part of the HAPI standard), but this means any original metadata would have to modify its keywords.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">525</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="527" lf="527">The <code type="md">additionalMetadata</code> object is a list of objects represented by the table below, and allows for one or more sets of additional metadata, which can be isolated from each other and from HAPI keywords.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">527</span></div>
      </div>
      <div class="block">
        <pre lo="529" lf="533" class="language-json"><div class="block"><code lo="530" lf="530">{</code></div><div class="block"><code lo="531" lf="531">  <span class="hljs-attr">"additionalMetadata"</span> : [ md1, md2, md3 ]</code></div><div class="block"><code lo="532" lf="532">}</code></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">529-533</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="535" lf="535">There can be one or more metadata objects (md1, md2, md3, etc above) in the list, and the keywords for these objects are as follows:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">535</span></div>
      </div>
      <div class="block">
        <table lo="537" lf="543">
          <thead>
            <tr>
              <th>Keyword</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">name</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> the name of the additional metadata</td>
            </tr>
            <tr>
              <td><code type="md">content</code></td>
              <td>string or JSON object</td>
              <td><strong type="md">Required</strong> (if no <code type="md">contentURL</code>) either a string with the metadata content (for XML), or a JSON object representing the object tree for the additional metadata</td>
            </tr>
            <tr>
              <td><code type="md">contentURL</code></td>
              <td>string</td>
              <td><strong type="md">Required</strong> (if no <code type="md">content</code>) URL pointing to additional metadata</td>
            </tr>
            <tr>
              <td><code type="md">schemaURL</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> points to computer-readable schema for the additional metadata</td>
            </tr>
            <tr>
              <td><code type="md">aboutURL</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> points to human readable explanation for the metadata</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="block">
        <p padlength="0" lo="545" lf="545">The <code type="md">name</code> is appropriate if the additional metadata follows a known standard that people know about. One of <code type="md">content</code> or <code type="md">contentURL</code> must be present. The <code type="md">content</code> can be a string version of the actual metadata, or it can be a JOSN object tree. If there is a schema reference embedded in the metadata (easy to do with XML and JSON), clients can figure that out, but if no internal schema is in the metadata, then the <code type="md">schemaURL</code> can point to an external schema. The <code type="md">aboutURL</code> is for humans to learn about the given type of additional metadata.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">545</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="547" lf="547">For the <code type="md">name</code>, please use these if appropriate <code type="md">CF</code>, <code type="md">FITS</code>, <code type="md">ISTP</code>, <code type="md">SPASE</code>. Other fields beyond Heliophysics will likely have their own metadata names, which could be listed here if requested.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">547</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="549" lf="549"><strong type="md">Example</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">549</span></div>
      </div>
      <div class="block">
        <pre lo="551" lf="572" class="language-json"><div class="block"><code lo="552" lf="552">{</code><div class="line-number">1</div></div><div class="block"><code lo="553" lf="553"> <span class="hljs-attr">"additionalMetadata"</span> : [</code><div class="line-number">2</div></div><div class="block"><code lo="554" lf="554">    { <span class="hljs-attr">"name"</span> : <span class="hljs-string">"SPASE"</span>,</code><div class="line-number">3</div></div><div class="block"><code lo="555" lf="555">      <span class="hljs-attr">"contentURL"</span>: <span class="hljs-string">"https://hpde.io/NASA/DisplayData/ACE/MAG/27-Day.xml"</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="556" lf="556">      <span class="hljs-attr">"aboutURL"</span>:  <span class="hljs-string">"http://spase-group.org"</span></code><div class="line-number">5</div></div><div class="block"><code lo="557" lf="557">    },</code><div class="line-number">6</div></div><div class="block"><code lo="558" lf="558">    { <span class="hljs-attr">"name"</span> : <span class="hljs-string">"CF"</span>,</code><div class="line-number">7</div></div><div class="block"><code lo="559" lf="559">      <span class="hljs-attr">"content"</span>:  { <span class="hljs-attr">"keyword"</span> : <span class="hljs-string">"value1"</span>, <span class="hljs-attr">"keyword2"</span>: <span class="hljs-string">"value2"</span> },</code><div class="line-number">8</div></div><div class="block"><code lo="560" lf="560">      <span class="hljs-attr">"aboutURL"</span>: <span class="hljs-string">"https://cfconventions.org/"</span></code><div class="line-number">9</div></div><div class="block"><code lo="561" lf="561">    },</code><div class="line-number">10</div></div><div class="block"><code lo="562" lf="562">    { <span class="hljs-attr">"name"</span> : <span class="hljs-string">"ISTP"</span>,</code><div class="line-number">11</div></div><div class="block"><code lo="563" lf="563">      <span class="hljs-attr">"content"</span>:  { <span class="hljs-attr">"json object (not shown) representing the tree of ISTP keyword-value pairs"</span> },</code><div class="line-number">12</div></div><div class="block"><code lo="564" lf="564">      <span class="hljs-attr">"aboutURL"</span>:  <span class="hljs-string">"https://spdf.gsfc.nasa.gov/istp_guide/variables.html"</span></code><div class="line-number">13</div></div><div class="block"><code lo="565" lf="565">     },</code><div class="line-number">14</div></div><div class="block"><code lo="566" lf="566">     {  <span class="hljs-attr">"name"</span> : <span class="hljs-string">"FITS"</span>,</code><div class="line-number">15</div></div><div class="block"><code lo="567" lf="567">        <span class="hljs-attr">"content"</span>:  { <span class="hljs-attr">"fits_header_keyword1"</span> : <span class="hljs-string">"value1"</span>, <span class="hljs-attr">"fits_header_keyword2"</span>: <span class="hljs-string">"value2"</span> },</code><div class="line-number">16</div></div><div class="block"><code lo="568" lf="568">        <span class="hljs-attr">"aboutURL"</span>: <span class="hljs-string">"http://fits.gsfc.nasa.gov"</span></code><div class="line-number">17</div></div><div class="block"><code lo="569" lf="569">     }</code><div class="line-number">18</div></div><div class="block"><code lo="570" lf="570">  ]</code><div class="line-number">19</div></div><div class="block"><code lo="571" lf="571">}</code><div class="line-number">20</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">551-572</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="574" lf="574">Note that no single dataset would be likely have this variety of additional metadata – these are provided for illustration.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">574</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="577" lf="577">Need to move this to after the parameter table.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">577</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="582" lf="582"><a name="366-parameter-object" number="3.6.6" lo="582" raw="### 3.6.6 Parameter Object" class="anchor hanchor" href="#366-parameter-object" lf="582"><span class="hnumber">3.6.6</span>&nbsp;<span class="htext">Parameter Object</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">582</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="584" lf="584">The focus of the header is to list the parameters in a dataset. The first parameter in the list must be a time value. This time column serves as the independent variable for the dataset. The time column parameter may have any name, but its type must be <code type="md">isotime,</code> and there must not be any fill values in the data stream for this column. Note that the HAPI specification does not clarify if the time values given are the start, middle, or end of the measurement intervals. There can be other parameters of type <code type="md">isotime</code> in the parameter list. The table below describes the Parameter items and their allowed types.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">584</span></div>
      </div>
      <div class="block">
        <table lo="586" lf="598">
          <thead>
            <tr>
              <th>Parameter Attribute</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">name</code></td>
              <td>string</td>
              <td><strong type="md">Required</strong> A short name for this parameter. It is recommended that all parameter names start with a letter or underscore, followed by letters, underscores, or numbers. This allows the parameter names to become variable names in computer languages. Parameter names in a dataset must be unique, and names are not allowed to differ only by having a different case. Note that because parameter names can appear in URLs that can serve as permanent links to data, changing them will have negative implications, such as breaking links to data. Therefore, parameter names should be stable over time.</td>
            </tr>
            <tr>
              <td><code type="md">type</code></td>
              <td>string</td>
              <td><strong type="md">Required</strong> One of <code type="md">string</code>, <code type="md">double</code>, <code type="md">integer</code>, <code type="md">isotime</code>. Binary content for <code type="md">double</code> is always 8 bytes in IEEE 754 format, <code type="md">integer</code> is 4 bytes signed little-endian. There is no default length for <code type="md">string</code> and <code type="md">isotime</code> types. String parameters may include UTF-8 encoded Unicode characters.</td>
            </tr>
            <tr>
              <td><code type="md">length</code></td>
              <td>integer</td>
              <td><strong type="md">Required</strong> For type <code type="md">string</code> and <code type="md">isotime</code>; <strong type="md">not allowed for others</strong>. The maximum number of bytes that the string may contain. If the response format is binary and a string has fewer than this maximum number of bytes, the string must be padded with ASCII null bytes. If the string parameter contains only ASCII characters, <code type="md">length</code> means the maximum number of ASCII characters. If the string parameters contains UTF-8 encoded Unicode characters, <code type="md">length</code> means the maximum number of bytes required to represent all of the characters. For example, if a string parameter can be <code type="md">A</code> or <code type="md">α</code> <code type="md">length: 2</code> is required because <code type="md">α</code> in Unicode requires two bytes when encoded as UTF-8. HAPI clients that read CSV output from a HAPI server will generally not need to use the <code type="md">length</code> parameter. However, but for HAPI binary, the <code type="md">length</code> parameter is needed for parsing the stream <a href="#3742-binary">See the description of HAPI binary</a>.</td>
            </tr>
            <tr>
              <td><code type="md">size</code></td>
              <td>array of integers</td>
              <td><strong type="md">Required</strong> For array parameters; <strong type="md">not allowed for others</strong>. Must be a 1-D array whose values are the number of array elements in each dimension of this parameter. For example, <code type="md">"size"=[7]</code> indicates that the value in each record is a 1-D array of length 7. For the <code type="md">csv</code> and <code type="md">binary</code> output, there must be 7 columns for this parameter – one column for each array element, effectively unwinding this array. The <code type="md">json</code> output for this data parameter must contain an actual JSON array (whose elements would be enclosed by <code type="md">[ ]</code>). For arrays 2-D and higher, such as <code type="md">"size"=[2,3]</code>, the later indices are the fastest moving, so that the CSV and binary columns for such a 2 by 3 would be <code type="md">[0,0]</code>, <code type="md">[0,1]</code>, <code type="md">[0,2]</code> and then <code type="md">[1,0]</code>, <code type="md">[1,1]</code>, <code type="md">[1,2]</code>.Note that <code type="md">"size": [1]</code> is allowed but discouraged, because clients may interpret it as either an array of length 1 or as a scalar. Similarly, an array size of 1 in any dimension is discouraged, because of ambiguity in the way clients would treat this structure. Array sizes of arbitrary dimensionality are allowed, but from a practical view, clients typically support up to 3D or 4D arrays. <a href="#367-size-details">See below</a> for more about array sizes.</td>
            </tr>
            <tr>
              <td><code type="md">units</code></td>
              <td>string OR array of string</td>
              <td><strong type="md">Required</strong> The units for the data values represented by this parameter. For dimensionless quantities, the value can be the literal string <code type="md">"dimensionless"</code> or the special JSON value <code type="md">null</code>. Note that an empty string <code type="md">""</code> is not allowed. For <code type="md">isotime</code> parameters, the units must be <code type="md">UTC</code>. If a parameter is a scalar, the units must be a single string. For an array parameter, a <code type="md">units</code> value that is a single string means that the same units apply to all elements in the array. If the elements in the array parameter have different units, then <code type="md">units</code> can be an array of strings to provide specific units strings for each element in the array. Individual values for elements in the array can also be <code type="md">"dimensionless"</code> or <code type="md">null</code> (but not an empty string) to indicate no units for that element. The shape of such a <code type="md">units</code> array must match the shape given by the <code type="md">size</code> of the parameter, and the ordering of multi-dimensional arrays of unit strings is as discussed in the <code type="md">size</code> attribute definition above. See below (the example responses to an <code type="md">info</code> query) for examples of a single string and string array units.</td>
            </tr>
            <tr>
              <td><code type="md">coordinateSystemName</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> Some data represent directional or position information, such as look direction, spacecraft location, or a measured vector quantity. This keyword specifies the name of the coordinate system for these vector quantities. If a <a href="#364-coordinatesystemschema-details"><code type="md">coordinateSystemSchema</code></a> was given for this dataset, then the <code type="md">coordinateSystemName</code> must come from the schema. <a href="#3610-specifying-vectorcomponents">See below</a> for more about coordinate systems.</td>
            </tr>
            <tr>
              <td><code type="md">vectorComponents</code></td>
              <td>string or array of strings</td>
              <td><strong type="md">Optional</strong> The name or list of names of the vector components present in a directional or positional quanitity. For a scalar <code type="md">parameter</code>, only a single string indicating the component type is allowed. For an array <code type="md">parameter</code>, an array of corresponding component names is expected. If not provided, the default value for <code type="md">vectorComponents</code> is <code type="md">["x","y","z"]</code>, which assumes the <code type="md">parameter</code> is an array of length 3. There is an enumeration of allowed names for common vector components. <a href="#3610-specifying-vectorcomponents">See below for details</a> on describing <code type="md">vectorComponents</code>.</td>
            </tr>
            <tr>
              <td><code type="md">fill</code></td>
              <td>string</td>
              <td><strong type="md">Required</strong> A fill value indicates no valid data is present. If a parameter has no fill present for any records in the dataset, this can be indicated by using a JSON null for this attribute as in <code type="md">"fill": null</code> <a href="#368-fill-details">See below</a> for more about fill values, <strong type="md">including the issues related to specifying numeric fill values as strings</strong>. Note that since the primary time column cannot have fill values, it must specify <code type="md">"fill": null</code> in the header.</td>
            </tr>
            <tr>
              <td><code type="md">description</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> A brief, one-sentence description of the parameter.</td>
            </tr>
            <tr>
              <td><code type="md">label</code></td>
              <td>string OR array of string</td>
              <td><strong type="md">Optional</strong> A word or very short phrase that could serve as a label for this parameter (as on a plot axis or in a selection list of parameters). It is intended to be less cryptic than the parameter name. If the parameter is a scalar, this label must be a single string. If the parameter is an array, a single string label or an array of string labels are allowed. A single label string will be applied to all elements in the array, whereas an array of label strings specifies a different label string for each element in the array parameter. The shape of the array of label strings must match the <code type="md">size</code> attribute, and the ordering of multi-dimensional arrays of label strings is as discussed in the <code type="md">size</code> attribute definition above. No <code type="md">null</code> values or the empty string <code type="md">""</code> values are allowed in an array of label strings. See below (the example responses to an <code type="md">info</code> query) for examples of a single string and string array labels.</td>
            </tr>
            <tr>
              <td><code type="md">bins</code></td>
              <td>array of Bins object</td>
              <td><strong type="md">Optional</strong> For array parameters, each object in the <code type="md">bins</code> array corresponds to one of the dimensions of the array and describes values associated with each element in the corresponding dimension of the array. The table below describes all required and optional attributes within each <code type="md">bins</code> object. If the parameter represents a 1-D frequency spectrum, the <code type="md">bins</code> array will have one object describing the frequency values for each frequency bin. Within that object, the <code type="md">centers</code> attribute points to an array of values to use for the central frequency of each channel, and the <code type="md">ranges</code> attribute specifies a range (min to max) associated with each channel. At least one of these must be specified. The bins object has a required <code type="md">units</code> keyword (any string value is allowed), and <code type="md">name</code> is also required. See examples below for a parameter with bins describing an energy spectrum. Note that for 2-D or higher bins, each bin array is still a 1-D array – having bins with 2-D (or higher) dependencies is not currently supported.</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="block">
        <p padlength="0" lo="600" lf="600"><strong type="md">Example</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">600</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="602" lf="602">These examples show an <code type="md">info</code> response for a hypothetical magnetic field dataset.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">602</span></div>
      </div>
      <div class="block">
        <pre lo="604" lf="606">http://server/hapi/info?dataset=ACE_MAG</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">604-606</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="608" lf="608"><strong type="md">Example Response:</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">608</span></div>
      </div>
      <div class="block">
        <pre lo="610" lf="643" class="language-javascript"><div class="block"><code lo="611" lf="611">{</code><div class="line-number">1</div></div><div class="block"><code lo="612" lf="612">    <span class="hljs-string">"HAPI"</span>: <span class="hljs-string">"3.1"</span>,</code><div class="line-number">2</div></div><div class="block"><code lo="613" lf="613">   <span class="hljs-string">"status"</span>: { <span class="hljs-string">"code"</span>: <span class="hljs-number">1200</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"OK"</span>},</code><div class="line-number">3</div></div><div class="block"><code lo="614" lf="614">   <span class="hljs-string">"startDate"</span>: <span class="hljs-string">"1998-001Z"</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="615" lf="615">   <span class="hljs-string">"stopDate"</span> : <span class="hljs-string">"2017-100Z"</span>,</code><div class="line-number">5</div></div><div class="block"><code lo="616" lf="616">   <span class="hljs-string">"coordianteSystemSchema"</span> : { <span class="hljs-string">"schemaName"</span>: <span class="hljs-string">"SPASE"</span>, <span class="hljs-string">"schemaURI"</span>: <span class="hljs-string">"TBD"</span>},</code><div class="line-number">6</div></div><div class="block"><code lo="617" lf="617">   <span class="hljs-string">"parameters"</span>: [</code><div class="line-number">7</div></div><div class="block"><code lo="618" lf="618">       { <span class="hljs-string">"name"</span>: <span class="hljs-string">"Time"</span>,</code><div class="line-number">8</div></div><div class="block"><code lo="619" lf="619">         <span class="hljs-string">"type"</span>: <span class="hljs-string">"isotime"</span>,</code><div class="line-number">9</div></div><div class="block"><code lo="620" lf="620">         <span class="hljs-string">"units"</span>: <span class="hljs-string">"UTC"</span>,</code><div class="line-number">10</div></div><div class="block"><code lo="621" lf="621">         <span class="hljs-string">"fill"</span>: <span class="hljs-literal">null</span>,</code><div class="line-number">11</div></div><div class="block"><code lo="622" lf="622">         <span class="hljs-string">"length"</span>: <span class="hljs-number">24</span> },</code><div class="line-number">12</div></div><div class="block"><code lo="623" lf="623">       { <span class="hljs-string">"name"</span>: <span class="hljs-string">"radial_position"</span>,</code><div class="line-number">13</div></div><div class="block"><code lo="624" lf="624">         <span class="hljs-string">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">14</div></div><div class="block"><code lo="625" lf="625">         <span class="hljs-string">"units"</span>: <span class="hljs-string">"km"</span>,</code><div class="line-number">15</div></div><div class="block"><code lo="626" lf="626">         <span class="hljs-string">"fill"</span>: <span class="hljs-literal">null</span>,</code><div class="line-number">16</div></div><div class="block"><code lo="627" lf="627">         <span class="hljs-string">"description"</span>: <span class="hljs-string">"radial position of the spacecraft"</span>,</code><div class="line-number">17</div></div><div class="block"><code lo="628" lf="628">         <span class="hljs-string">"label"</span>: <span class="hljs-string">"R Position"</span>},</code><div class="line-number">18</div></div><div class="block"><code lo="629" lf="629">       { <span class="hljs-string">"name"</span>: <span class="hljs-string">"quality_flag"</span>,</code><div class="line-number">19</div></div><div class="block"><code lo="630" lf="630">         <span class="hljs-string">"type"</span>: <span class="hljs-string">"integer"</span>,</code><div class="line-number">20</div></div><div class="block"><code lo="631" lf="631">         <span class="hljs-string">"units"</span>: <span class="hljs-string">"none"</span>,</code><div class="line-number">21</div></div><div class="block"><code lo="632" lf="632">         <span class="hljs-string">"fill"</span>: <span class="hljs-literal">null</span>,</code><div class="line-number">22</div></div><div class="block"><code lo="633" lf="633">         <span class="hljs-string">"description "</span>: <span class="hljs-string">"0=OK and 1=bad"</span>},</code><div class="line-number">23</div></div><div class="block"><code lo="634" lf="634">       { <span class="hljs-string">"name"</span>: <span class="hljs-string">"mag_GSE"</span>,</code><div class="line-number">24</div></div><div class="block"><code lo="635" lf="635">         <span class="hljs-string">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">25</div></div><div class="block"><code lo="636" lf="636">         <span class="hljs-string">"units"</span>: <span class="hljs-string">"nT"</span>,</code><div class="line-number">26</div></div><div class="block"><code lo="637" lf="637">         <span class="hljs-string">"fill"</span>: <span class="hljs-string">"-1e31"</span>,</code><div class="line-number">27</div></div><div class="block"><code lo="638" lf="638">         <span class="hljs-string">"size"</span> : [<span class="hljs-number">3</span>],</code><div class="line-number">28</div></div><div class="block"><code lo="639" lf="639">         <span class="hljs-string">"description"</span>: <span class="hljs-string">"hourly average Cartesian magnetic field in nT in GSE"</span>,</code><div class="line-number">29</div></div><div class="block"><code lo="640" lf="640">         <span class="hljs-string">"label"</span>: <span class="hljs-string">"B field in GSE"</span>}</code><div class="line-number">30</div></div><div class="block"><code lo="641" lf="641">   ]</code><div class="line-number">31</div></div><div class="block"><code lo="642" lf="642">}</code><div class="line-number">32</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">610-643</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="645" lf="645"><a name="367-size-details" number="3.6.7" lo="645" raw="### 3.6.7 size Details" class="anchor hanchor" href="#367-size-details" lf="645"><span class="hnumber">3.6.7</span>&nbsp;<span class="htext">size Details</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">645</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="647" lf="649">The <code type="md">size</code> attribute is required for array parameters and not allowed for others. The length of the <code type="md">size</code> array indicates the number of dimensions, and each element in the <code type="md">size</code> array indicates the number of elements in that dimension. For example, the size attribute for a 1-D array would be a 1-D JSON array of length one, with the one element in the JSON array indicating the number of elements in the data array. For a spectrum, this number of elements is the number of wavelengths or energies in the spectrum. Thus <code type="md">"size": [9]</code> refers to a data parameter that is a 1-D array of length 9, and in the <code type="md">csv</code> and <code type="md">binary</code> output formats, there will be 9 columns for this data parameter. In the <code type="md">json</code> output for this data parameter, each record will contain a JSON array of 9 elements (enclosed in brackets <code type="md">[ ]</code>).</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">647-649</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="651" lf="651">For arrays of size 2-D or higher, the column orderings need to be specified for the <code type="md">csv</code> and <code type="md">binary</code> output formats, because for both of these formats, the array needs to be “unrolled” into individual columns. The mapping of 2-D array element to unrolled column index is done so that the later array elements change the fastest. This is illustrated with the following example. Given a 2-D array of <code type="md">"size":[2,5]</code>, the 5 item index changes the most quickly. Items in each record will be ordered like this <code type="md">[0,0] [0,1], [0,2] [0,3] [0,4] [1,0,] [1,1] [1,2] [1,3] [1,4]</code> and the ordering is similarly done for higher dimensions.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">651</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="653" lf="653">No unrolling is needed for JSON arrays because JSON syntax can represent arrays of any dimension. The following example shows one record of data with a time parameter and a single data parameter <code type="md">"size":[2,5]</code> (of type double):</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">653</span></div>
      </div>
      <div class="block">
        <pre lo="655" lf="657">["2017-11-13T12:34:56.789Z", [ [0.0, 1.1, 2.2, 3.3, 4.4] [5.0,6.0,7.0,8.0,9.0] ] ]</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">655-657</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="659" lf="659"><a name="368-fill-details" number="3.6.8" lo="659" raw="### 3.6.8 fill Details" class="anchor hanchor" href="#368-fill-details" lf="659"><span class="hnumber">3.6.8</span>&nbsp;<span class="htext">fill Details</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">659</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="661" lf="661">Note that fill values for all types must be specified as a string (not just as ASCII within the JSON, but as a literal JSON string inside quotes). For <code type="md">double</code> and <code type="md">integer</code> types, the string should correspond to a numeric value. In other words, using a string like <code type="md">invalid_int</code> would not be allowed for an integer fill value. Care should be taken to ensure that the string value given will have an exact numeric representation, and special care should be taken for <code type="md">double</code> values which can suffer from round-off problems. For integers, string fill values must correspond to an integer value that is small enough to fit into a 4-byte signed integer. For <code type="md">double</code> parameters, the fill string must parse to an exact IEEE 754 double representation. One suggestion is to use large negative integers, such as <code type="md">-1.0E30</code>. The string <code type="md">NaN</code> is allowed, in which the case <code type="md">csv</code> output should contain the string <code type="md">NaN</code> for fill values. For <code type="md">binary</code> data output with double NaN values, the bit pattern for quiet NaN should be used, as opposed to the signaling NaN, which should not be used (see [<a href="#6-references">6</a>]). For <code type="md">string</code> and <code type="md">isotime</code> parameters, the string <code type="md">fill</code> value is used at face value, and it should have a length that fits in the length of the data parameter.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">661</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="663" lf="663"><a name="369-unit-and-label-arrays" number="3.6.9" lo="663" raw="### 3.6.9 Unit and Label Arrays" class="anchor hanchor" href="#369-unit-and-label-arrays" lf="663"><span class="hnumber">3.6.9</span>&nbsp;<span class="htext">Unit and Label Arrays</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">663</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="665" lf="665">When a scalar <code type="md">units</code> value is given for an array parameter, the scalar is assumed to apply to all elements in the array – a kind of broadcast application of the single value to all values in the array. For multi-dimensional arrays, the broadcast applies to all elements in every dimension. A partial broadcast to only one dimension in the array is not allowed. Either a full set of unit strings are given to describe every element in the multi-dimensional array, or a single value is given to apply to all elements. This allows for the handling of special cases while keeping the specification simple. The same broadcast rules govern labels.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">665</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="667" lf="667">The previous example included the optional <code type="md">label</code> attribute for some parameters. The use of a single string for the <code type="md">units</code> and <code type="md">label</code> of the array parameter <code type="md">mag_GSE</code> indicates that all elements of the array have the same units and label. The next example shows an <code type="md">info</code> response for a magnetic field dataset where the vector components are assigned distinct units and labels.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">667</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="669" lf="669"><strong type="md">Example</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">669</span></div>
      </div>
      <div class="block">
        <pre lo="671" lf="703" class="language-json"><div class="block"><code lo="672" lf="672">{</code><div class="line-number">1</div></div><div class="block"><code lo="673" lf="673">    <span class="hljs-attr">"HAPI"</span>: <span class="hljs-string">"3.1"</span>,</code><div class="line-number">2</div></div><div class="block"><code lo="674" lf="674">   <span class="hljs-attr">"status"</span>: {<span class="hljs-attr">"code"</span>: <span class="hljs-number">1200</span>, <span class="hljs-attr">"message"</span>: <span class="hljs-string">"OK"</span>},</code><div class="line-number">3</div></div><div class="block"><code lo="675" lf="675">   <span class="hljs-attr">"startDate"</span>: <span class="hljs-string">"1998-001Z"</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="676" lf="676">   <span class="hljs-attr">"stopDate"</span> : <span class="hljs-string">"2017-100Z"</span>,</code><div class="line-number">5</div></div><div class="block"><code lo="677" lf="677">   <span class="hljs-attr">"parameters"</span>: [</code><div class="line-number">6</div></div><div class="block"><code lo="678" lf="678">       { <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Time"</span>,</code><div class="line-number">7</div></div><div class="block"><code lo="679" lf="679">         <span class="hljs-attr">"type"</span>: <span class="hljs-string">"isotime"</span>,</code><div class="line-number">8</div></div><div class="block"><code lo="680" lf="680">         <span class="hljs-attr">"units"</span>: <span class="hljs-string">"UTC"</span>,</code><div class="line-number">9</div></div><div class="block"><code lo="681" lf="681">         <span class="hljs-attr">"fill"</span>: <span class="hljs-literal">null</span>,</code><div class="line-number">10</div></div><div class="block"><code lo="682" lf="682">         <span class="hljs-attr">"length"</span>: <span class="hljs-number">24</span> },</code><div class="line-number">11</div></div><div class="block"><code lo="683" lf="683">       { <span class="hljs-attr">"name"</span>: <span class="hljs-string">"radial_position"</span>,</code><div class="line-number">12</div></div><div class="block"><code lo="684" lf="684">         <span class="hljs-attr">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">13</div></div><div class="block"><code lo="685" lf="685">         <span class="hljs-attr">"units"</span>: <span class="hljs-string">"km"</span>,</code><div class="line-number">14</div></div><div class="block"><code lo="686" lf="686">         <span class="hljs-attr">"fill"</span>: <span class="hljs-literal">null</span>,</code><div class="line-number">15</div></div><div class="block"><code lo="687" lf="687">         <span class="hljs-attr">"description"</span>: <span class="hljs-string">"radial position of the spacecraft"</span>,</code><div class="line-number">16</div></div><div class="block"><code lo="688" lf="688">         <span class="hljs-attr">"label"</span>: <span class="hljs-string">"R Position"</span>},</code><div class="line-number">17</div></div><div class="block"><code lo="689" lf="689">       { <span class="hljs-attr">"name"</span>: <span class="hljs-string">"quality_flag"</span>,</code><div class="line-number">18</div></div><div class="block"><code lo="690" lf="690">         <span class="hljs-attr">"type"</span>: <span class="hljs-string">"integer"</span>,</code><div class="line-number">19</div></div><div class="block"><code lo="691" lf="691">         <span class="hljs-attr">"units"</span>: <span class="hljs-string">"none"</span>,</code><div class="line-number">20</div></div><div class="block"><code lo="692" lf="692">         <span class="hljs-attr">"fill"</span>: <span class="hljs-literal">null</span>,</code><div class="line-number">21</div></div><div class="block"><code lo="693" lf="693">         <span class="hljs-attr">"description "</span>: <span class="hljs-string">"0=OK and 1=bad "</span> },</code><div class="line-number">22</div></div><div class="block"><code lo="694" lf="694">       { <span class="hljs-attr">"name"</span>: <span class="hljs-string">"mag_GSE"</span>,</code><div class="line-number">23</div></div><div class="block"><code lo="695" lf="695">         <span class="hljs-attr">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">24</div></div><div class="block"><code lo="696" lf="696">         <span class="hljs-attr">"units"</span>: [<span class="hljs-string">"nT"</span>,<span class="hljs-string">"degrees"</span>, <span class="hljs-string">"degrees"</span>],</code><div class="line-number">25</div></div><div class="block"><code lo="697" lf="697">         <span class="hljs-attr">"fill"</span>: <span class="hljs-string">"-1e31"</span>,</code><div class="line-number">26</div></div><div class="block"><code lo="698" lf="698">         <span class="hljs-attr">"size"</span> : [<span class="hljs-number">3</span>],</code><div class="line-number">27</div></div><div class="block"><code lo="699" lf="699">         <span class="hljs-attr">"description"</span>: <span class="hljs-string">"B field as magnitude and two angles theta (colatitude) and phi (longitude)"</span>,</code><div class="line-number">28</div></div><div class="block"><code lo="700" lf="700">         <span class="hljs-attr">"label"</span>: [<span class="hljs-string">"B Magnitude"</span>, <span class="hljs-string">"theta"</span>, <span class="hljs-string">"phi"</span>] }</code><div class="line-number">29</div></div><div class="block"><code lo="701" lf="701">   ]</code><div class="line-number">30</div></div><div class="block"><code lo="702" lf="702">}</code><div class="line-number">31</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">671-703</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="705" lf="705">Each element in the string array applies to the corresponding element in the <code type="md">mag_GSE</code> data array.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">705</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="707" lf="707">The following are examples for <code type="md">units</code> and <code type="md">label</code> values for a parameter of <code type="md">size=[2,3]</code>. The parameter is vector velocity from two separate instruments. In a JSON response, the parameter at a given time would have the form</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">707</span></div>
      </div>
      <div class="block">
        <pre lo="709" lf="709">["2017-11-13T12:34:56.789Z", [ [1, 2, 3] [4, 5, 6] ] ]</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">709</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="711" lf="711">The <code type="md">[1,2,3]</code> are measurements from the first intrument and the <code type="md">[4, 5, 6]</code> are measurements from the second instrument.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">711</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="713" lf="713"><strong type="md">Allowed</strong> (scalar for <code type="md">units</code> and for <code type="md">label</code> applies to all elements in the array)</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">713</span></div>
      </div>
      <div class="block">
        <pre lo="715" lf="719" class="language-Javascript"><div class="block"><code lo="716" lf="716"><span class="hljs-string">"size"</span>: [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]</code></div><div class="block"><code lo="717" lf="717"><span class="hljs-string">"units"</span>: <span class="hljs-string">"m/s"</span>,</code></div><div class="block"><code lo="718" lf="718"><span class="hljs-string">"label"</span>: <span class="hljs-string">"velocity"</span></code></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">715-719</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="721" lf="721"><strong type="md">Allowed</strong> (scalar units applied to all 6 elements in the array; unique label for each element)</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">721</span></div>
      </div>
      <div class="block">
        <pre lo="723" lf="727" class="language-Javascript"><div class="block"><code lo="724" lf="724"><span class="hljs-string">"size"</span>: [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],</code></div><div class="block"><code lo="725" lf="725"><span class="hljs-string">"units"</span>: <span class="hljs-string">"m/s"</span>,</code></div><div class="block"><code lo="726" lf="726"><span class="hljs-string">"label"</span>: [[<span class="hljs-string">"V1x"</span>,<span class="hljs-string">"V1y"</span>,<span class="hljs-string">"V1z"</span>],[<span class="hljs-string">"V2x"</span>,<span class="hljs-string">"V2y"</span>,<span class="hljs-string">"V2z"</span>]]</code></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">723-727</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="729" lf="729"><strong type="md">Allowed</strong> (array of length 1 is treated like scalar; not preferred but allowed)</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">729</span></div>
      </div>
      <div class="block">
        <pre lo="731" lf="735" class="language-Javascript"><div class="block"><code lo="732" lf="732"><span class="hljs-string">"size"</span>: [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]</code></div><div class="block"><code lo="733" lf="733"><span class="hljs-string">"units"</span>: [<span class="hljs-string">"m/s"</span>],</code></div><div class="block"><code lo="734" lf="734"><span class="hljs-string">"label"</span>: [[<span class="hljs-string">"V1x"</span>,<span class="hljs-string">"V1y"</span>,<span class="hljs-string">"V1z"</span>],[<span class="hljs-string">"V2x"</span>,<span class="hljs-string">"V2y"</span>,<span class="hljs-string">"V2z"</span>]]</code></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">731-735</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="737" lf="737"><strong type="md">Allowed</strong> (all elements are properly given their own <code type="md">units</code> string)</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">737</span></div>
      </div>
      <div class="block">
        <pre lo="739" lf="743" class="language-Javascript"><div class="block"><code lo="740" lf="740"><span class="hljs-string">"size"</span>: [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],</code></div><div class="block"><code lo="741" lf="741"><span class="hljs-string">"units"</span>: [[<span class="hljs-string">"m/s"</span>,<span class="hljs-string">"m/s"</span>,<span class="hljs-string">"km/s"</span>],[<span class="hljs-string">"m/s"</span>,<span class="hljs-string">"m/s"</span>,<span class="hljs-string">"km/s"</span>]],</code></div><div class="block"><code lo="742" lf="742"><span class="hljs-string">"label"</span>: [[<span class="hljs-string">"V1x"</span>,<span class="hljs-string">"V1y"</span>,<span class="hljs-string">"V1z"</span>],[<span class="hljs-string">"V2x"</span>,<span class="hljs-string">"V2y"</span>,<span class="hljs-string">"V2z"</span>]]</code></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">739-743</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="745" lf="745"><strong type="md">Not Allowed</strong> (array size does not match parameter size – must specify all <code type="md">units</code> elements if not just giving a scalar)</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">745</span></div>
      </div>
      <div class="block">
        <pre lo="747" lf="751" class="language-Javascript"><div class="block"><code lo="748" lf="748"><span class="hljs-string">"size"</span>: [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>],</code></div><div class="block"><code lo="749" lf="749"><span class="hljs-string">"units"</span>: [<span class="hljs-string">"m/s"</span>,<span class="hljs-string">"m/s"</span>,<span class="hljs-string">"km/s"</span>],</code></div><div class="block"><code lo="750" lf="750"><span class="hljs-string">"label"</span>: [[<span class="hljs-string">"V1x"</span>,<span class="hljs-string">"V1y"</span>,<span class="hljs-string">"V1z"</span>],[<span class="hljs-string">"V2x"</span>,<span class="hljs-string">"V2y"</span>,<span class="hljs-string">"V2z"</span>]]</code></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">747-751</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="753" lf="753"><strong type="md">Not Allowed</strong> (<code type="md">units</code> array size does not match parameter size)</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">753</span></div>
      </div>
      <div class="block">
        <pre lo="755" lf="759" class="language-Javascript"><div class="block"><code lo="756" lf="756"><span class="hljs-string">"size"</span>: [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]</code></div><div class="block"><code lo="757" lf="757"><span class="hljs-string">"units"</span>: [<span class="hljs-string">"m/s"</span>,[<span class="hljs-string">"m/s"</span>,<span class="hljs-string">"m/s"</span>,<span class="hljs-string">"km/s"</span>]],</code></div><div class="block"><code lo="758" lf="758"><span class="hljs-string">"label"</span>: [[<span class="hljs-string">"V1x"</span>,<span class="hljs-string">"V1y"</span>,<span class="hljs-string">"V1z"</span>],[<span class="hljs-string">"V2x"</span>,<span class="hljs-string">"V2y"</span>,<span class="hljs-string">"V2z"</span>]]</code></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">755-759</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="762" lf="762"><a name="3610-specifying-vectorcomponents" number="3.6.10" lo="762" raw="### 3.6.10 Specifying vectorComponents" class="anchor hanchor" href="#3610-specifying-vectorcomponents" lf="762"><span class="hnumber">3.6.10</span>&nbsp;<span class="htext">Specifying vectorComponents</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">762</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="764" lf="767">For a <code type="md">parameter</code> that describes a vector quantity (position of spacecraft relative to a body, location of ground station, direction of measured vector quantity, detector look direction), the <code type="md">vectorComponents</code> keyword indicates the vector components present in the data. For a scalar <code type="md">parameter</code> that is associated with a vector component, this keyword contains a single string desribing the component. For non-scalar parameters, this keyword contains an array of strings naming the coordinate values present in the parameter.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">764-767</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="769" lf="769">The names represent the mathematical components typically found in vector or positional quantities. </p>
        <div class="block-info" style="display: none;"><span class="line-numbers">769</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="771" lf="771">Possible component names are constrained to be one of the following:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">771</span></div>
      </div>
      <div class="block">
        <table lo="773" lf="784">
          <thead>
            <tr>
              <th>Component Name</th>
              <th>Meaning</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">x</code></td>
              <td>Cartesian x component of vector</td>
            </tr>
            <tr>
              <td><code type="md">y</code></td>
              <td>Cartesian y component of vector</td>
            </tr>
            <tr>
              <td><code type="md">z</code></td>
              <td>Cartesian z component of vector</td>
            </tr>
            <tr>
              <td><code type="md">r</code></td>
              <td>Magnitude of vector</td>
            </tr>
            <tr>
              <td><code type="md">rho</code></td>
              <td>Magnitude of radial component (perpendicular distance from z-axis) in a Cylindrical coordinate representation</td>
            </tr>
            <tr>
              <td><code type="md">latitude</code></td>
              <td>Angle relative to x-y plane from -90° to 90°, or -π to π (90° corresponds to +z axis)</td>
            </tr>
            <tr>
              <td><code type="md">colatitude</code></td>
              <td>Angle relative to +z axis, from 0 to 180°, or 0 to π</td>
            </tr>
            <tr>
              <td><code type="md">longitude</code></td>
              <td>Angle relative to +x axis of a projection of the vector into the x-y plane, from -180° to 180°, or -π to π (90° corresponds to +y axis; this is also known as “East longitude”)</td>
            </tr>
            <tr>
              <td><code type="md">longitude0</code></td>
              <td>Angle relative to +x axis of a projection of the vector into the x-y plane, from 0° to 360°, or 0 to 2π (270° corresponds to -y axis; this is also known as “East longitude”)</td>
            </tr>
            <tr>
              <td><code type="md">other</code></td>
              <td>Any parameter element that cannot be described by a name in this list</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="block">
        <p padlength="0" lo="786" lf="790">Many angular quantities in datasets have different names than the ones here (azimuth instead of longitude, or elevation or inclination instead of latitude), but most quantities directly map to these commonly used component names, which come from spherical or cylindrical coordinate systems. A <a href="https://github.com/hapi-server/data-specification/issues/115">future version</a> of HAPI may offer a way to represent other angular components.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">786-790</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="792" lf="792">This example demonstrates how to represent directional quantities.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">792</span></div>
      </div>
      <div class="block">
        <pre lo="794" lf="843" class="language-json"><div class="block"><code lo="795" lf="795">{  <span class="hljs-attr">"parameters"</span>: [</code><div class="line-number">1</div></div><div class="block"><code lo="796" lf="796">     { <span class="hljs-attr">"name"</span> : <span class="hljs-string">"spacecraftLocationXYZ"</span>,</code><div class="line-number">2</div></div><div class="block"><code lo="797" lf="797">       <span class="hljs-attr">"description"</span>: <span class="hljs-string">"S/C location in X,Y,Z; vector direction from center of Earth to spacecraft"</span>,</code><div class="line-number">3</div></div><div class="block"><code lo="798" lf="798">       <span class="hljs-attr">"size"</span>: [<span class="hljs-number">3</span>],</code><div class="line-number">4</div></div><div class="block"><code lo="799" lf="799">       <span class="hljs-attr">"units"</span>: <span class="hljs-string">"km"</span>,</code><div class="line-number">5</div></div><div class="block"><code lo="800" lf="800">       <span class="hljs-attr">"coordinateSystemName"</span>: <span class="hljs-string">"GSM"</span>,</code><div class="line-number">6</div></div><div class="block"><code lo="801" lf="801">       <span class="hljs-attr">"vectorComponents"</span>: [<span class="hljs-string">"x"</span>, <span class="hljs-string">"y"</span>, <span class="hljs-string">"z"</span>] },</code><div class="line-number">7</div></div><div class="block"><code lo="802" lf="802"></code><div class="line-number">8</div></div><div class="block"><code lo="803" lf="803">    { <span class="hljs-attr">"name"</span> : <span class="hljs-string">"spacecraftLocationSpherical"</span>,</code><div class="line-number">9</div></div><div class="block"><code lo="804" lf="804">       <span class="hljs-attr">"description"</span>: <span class="hljs-string">"position in R, MLT and magnetic latitude"</span>,</code><div class="line-number">10</div></div><div class="block"><code lo="805" lf="805">       <span class="hljs-attr">"size"</span>: [<span class="hljs-number">3</span>],</code><div class="line-number">11</div></div><div class="block"><code lo="806" lf="806">       <span class="hljs-attr">"units"</span>: [<span class="hljs-string">"Re"</span>, <span class="hljs-string">"hours"</span>, <span class="hljs-string">"degrees"</span> ],</code><div class="line-number">12</div></div><div class="block"><code lo="807" lf="807">       <span class="hljs-attr">"coordinateSystemName"</span>: <span class="hljs-string">"GSM"</span>,</code><div class="line-number">13</div></div><div class="block"><code lo="808" lf="808">       <span class="hljs-attr">"vectorComponents"</span>: [<span class="hljs-string">"r"</span>, <span class="hljs-string">"longitude"</span>, <span class="hljs-string">"latitude"</span>] },</code><div class="line-number">14</div></div><div class="block"><code lo="809" lf="809"></code><div class="line-number">15</div></div><div class="block"><code lo="810" lf="810">    { <span class="hljs-attr">"name"</span> : <span class="hljs-string">"magnetic_field"</span>,</code><div class="line-number">16</div></div><div class="block"><code lo="811" lf="811">       <span class="hljs-attr">"description"</span>: <span class="hljs-string">"mag vector in Cartesian coords; components are x,y,z which is the assumed default for size [3]"</span>,</code><div class="line-number">17</div></div><div class="block"><code lo="812" lf="812">       <span class="hljs-attr">"size"</span>: [<span class="hljs-number">3</span>],</code><div class="line-number">18</div></div><div class="block"><code lo="813" lf="813">       <span class="hljs-attr">"units"</span>: <span class="hljs-string">"nT"</span>,</code><div class="line-number">19</div></div><div class="block"><code lo="814" lf="814">       <span class="hljs-attr">"coordinateSystemName"</span>: <span class="hljs-string">"GSM"</span> },</code><div class="line-number">20</div></div><div class="block"><code lo="815" lf="815"></code><div class="line-number">21</div></div><div class="block"><code lo="816" lf="816">    { <span class="hljs-attr">"name"</span> : <span class="hljs-string">"magnetic_field_cylindrical"</span>,</code><div class="line-number">22</div></div><div class="block"><code lo="817" lf="817">       <span class="hljs-attr">"description"</span>: <span class="hljs-string">"mag vector in cylindrical coords"</span>,</code><div class="line-number">23</div></div><div class="block"><code lo="818" lf="818">       <span class="hljs-attr">"size"</span>: [<span class="hljs-number">3</span>],</code><div class="line-number">24</div></div><div class="block"><code lo="819" lf="819">       <span class="hljs-attr">"units"</span>: [<span class="hljs-string">"nT"</span>,<span class="hljs-string">"degrees"</span>, <span class="hljs-string">"nT"</span>],</code><div class="line-number">25</div></div><div class="block"><code lo="820" lf="820">       <span class="hljs-attr">"coordinateSystemName"</span>: <span class="hljs-string">"GSM"</span>,</code><div class="line-number">26</div></div><div class="block"><code lo="821" lf="821">       <span class="hljs-attr">"vectorComponents"</span>: [<span class="hljs-string">"rho"</span>, <span class="hljs-string">"longitude"</span>, <span class="hljs-string">"z"</span>] },</code><div class="line-number">27</div></div><div class="block"><code lo="822" lf="822"></code><div class="line-number">28</div></div><div class="block"><code lo="823" lf="823">    {  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Bx"</span>,</code><div class="line-number">29</div></div><div class="block"><code lo="824" lf="824">       <span class="hljs-attr">"description"</span>: <span class="hljs-string">"mag X component"</span>,</code><div class="line-number">30</div></div><div class="block"><code lo="825" lf="825">       <span class="hljs-attr">"units"</span>: <span class="hljs-string">"nT"</span>,</code><div class="line-number">31</div></div><div class="block"><code lo="826" lf="826">       <span class="hljs-attr">"coordinateSystemName"</span>: <span class="hljs-string">"GSE"</span>,</code><div class="line-number">32</div></div><div class="block"><code lo="827" lf="827">       <span class="hljs-attr">"vectorComponents"</span>: <span class="hljs-string">"x"</span> },</code><div class="line-number">33</div></div><div class="block"><code lo="828" lf="828"></code><div class="line-number">34</div></div><div class="block"><code lo="829" lf="829">    {  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"By"</span>,</code><div class="line-number">35</div></div><div class="block"><code lo="830" lf="830">       <span class="hljs-attr">"description"</span>: <span class="hljs-string">"mag Y component"</span>,</code><div class="line-number">36</div></div><div class="block"><code lo="831" lf="831">       <span class="hljs-attr">"units"</span>: <span class="hljs-string">"nT"</span>,</code><div class="line-number">37</div></div><div class="block"><code lo="832" lf="832">       <span class="hljs-attr">"coordinateSystemName"</span>: <span class="hljs-string">"GSE"</span>,</code><div class="line-number">38</div></div><div class="block"><code lo="833" lf="833">       <span class="hljs-attr">"vectorComponents"</span>: <span class="hljs-string">"y"</span> },</code><div class="line-number">39</div></div><div class="block"><code lo="834" lf="834"></code><div class="line-number">40</div></div><div class="block"><code lo="835" lf="835">    {  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Bz"</span>,</code><div class="line-number">41</div></div><div class="block"><code lo="836" lf="836">       <span class="hljs-attr">"description"</span>: <span class="hljs-string">"mag Z component"</span>,</code><div class="line-number">42</div></div><div class="block"><code lo="837" lf="837">       <span class="hljs-attr">"units"</span>: <span class="hljs-string">"nT"</span>,</code><div class="line-number">43</div></div><div class="block"><code lo="838" lf="838">       <span class="hljs-attr">"coordinateSystemName"</span>: <span class="hljs-string">"GSE"</span>,</code><div class="line-number">44</div></div><div class="block"><code lo="839" lf="839">       <span class="hljs-attr">"vectorComponents"</span>: <span class="hljs-string">"z"</span> },</code><div class="line-number">45</div></div><div class="block"><code lo="840" lf="840"></code><div class="line-number">46</div></div><div class="block"><code lo="841" lf="841">    ]</code><div class="line-number">47</div></div><div class="block"><code lo="842" lf="842">}</code><div class="line-number">48</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">794-843</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="845" lf="852">In this example, the spacecraft position is provided two different ways, Cartesian and sperical. The default value for <code type="md">vectorComponents</code> is <code type="md">["x", "y", "z"]</code>, and so it may be included if desired, as is the case with the first position parameter, <code type="md">spacecraftLocationXYZ</code>, or omitted as is shown for the <code type="md">magnetic_field</code> parameter. If the <code type="md">units</code> provided is a scalar, it applies to all components of the parameter (this is true regardless of wether the <code type="md">parameter</code> is a vector or not). The parmeter <code type="md">magnetic_field_cylindrical</code> is indeed in cylindrical coordinates, so it does list specific vector components of <code type="md">["rho", "longitude", "z"]</code>, and since the units of each component are not the same, those are listed in an array as <code type="md">["nT","degrees", "nT"]</code>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">845-852</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="854" lf="857">Note that the <code type="md">longitude</code> units of the <code type="md">spacecraftLocationSpherical</code> parameter are <code type="md">hours</code>. This must be a floating point value to catpure fractions of hours, and not a string with hours, minutes, seconds. So within the data values for this parameter component, 20.5 would be an interpretable value for 20 hours 30 minutes, but 20:30:00 would not be ok.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">854-857</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="859" lf="859">[add description of scalars]</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">859</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="862" lf="862"><a name="3611-bins-object" number="3.6.11" lo="862" raw="### 3.6.11 Bins Object" class="anchor hanchor" href="#3611-bins-object" lf="862"><span class="hnumber">3.6.11</span>&nbsp;<span class="htext">Bins Object</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">862</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="864" lf="864">The bins attribute of a parameter is an array of JSON objects. These objects have the attributes described below. <strong type="md">NOTE: Even though</strong> <code type="md">ranges</code> <strong type="md">and</strong> <code type="md">centers</code> <strong type="md">are marked as required, only one of the two must be specified.</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">864</span></div>
      </div>
      <div class="block">
        <table lo="866" lf="873">
          <thead>
            <tr>
              <th>Bins Attribute</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">name</code></td>
              <td>string</td>
              <td><strong type="md">Required</strong> Name for the dimension (e.g. “Frequency”).</td>
            </tr>
            <tr>
              <td><code type="md">centers</code></td>
              <td>array of n doubles</td>
              <td><strong type="md">Required</strong> The centers of each bin.</td>
            </tr>
            <tr>
              <td><code type="md">ranges</code></td>
              <td>array of n arrays of 2 doubles</td>
              <td><strong type="md">Required</strong> The boundaries for each bin.</td>
            </tr>
            <tr>
              <td><code type="md">units</code></td>
              <td>string</td>
              <td><strong type="md">Required</strong> The units for the bin ranges and/or center values.</td>
            </tr>
            <tr>
              <td><code type="md">label</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> A label appropriate for a plot (use if <code type="md">name</code> is not appropriate)</td>
            </tr>
            <tr>
              <td><code type="md">description</code></td>
              <td>string</td>
              <td><strong type="md">Optional</strong> Brief comment explaining what the bins represent.</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="block">
        <p padlength="0" lo="875" lf="875">Note that some dimensions of a multi-dimensional parameter may not represent binned data. Each dimension must be described in the <code type="md">bins</code> object, but any dimension not representing binned data should indicate this by using <code type="md">'"centers": null'</code> and not including the <code type="md">'ranges'</code> attribute.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">875</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="877" lf="877">The data given for <code type="md">centers</code> and <code type="md">ranges</code> must not contain any <code type="md">null</code> or missing values. The number of valid numbers in the <code type="md">centers</code> array and the number of valid min/max pairs in the <code type="md">ranges</code> array must match the size of the parameter dimension being described. So this is not allowed:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">877</span></div>
      </div>
      <div class="block">
        <pre lo="879" lf="882" class="language-Javascript"><div class="block"><code lo="880" lf="880">centers = [<span class="hljs-number">2</span>, <span class="hljs-literal">null</span>, <span class="hljs-number">4</span>],</code></div><div class="block"><code lo="881" lf="881">ranges = [[<span class="hljs-number">1</span>,<span class="hljs-number">3</span>], <span class="hljs-literal">null</span>, [<span class="hljs-number">3</span>,<span class="hljs-number">5</span>]]</code></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">879-882</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="884" lf="884">If the bin centers or ranges change with time, then having static values for the centers or ranges in the <code type="md">info</code> response is inadequate. See the <a href="#3614-time-varying-bins">section below on time-varying bins</a> for how to handle this situation.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">884</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="886" lf="886"><a name="3612-subsetting-parameters" number="3.6.12" lo="886" raw="### 3.6.12 Subsetting Parameters" class="anchor hanchor" href="#3612-subsetting-parameters" lf="886"><span class="hnumber">3.6.12</span>&nbsp;<span class="htext">Subsetting Parameters</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">886</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="888" lf="888">Clients may request an <code type="md">info</code> response that includes only a subset of the parameters or a data stream for a subset of parameters (via the <code type="md">data</code> endpoint, described next). The logic on the server is the same for <code type="md">info</code> and <code type="md">data</code> requests in terms of what dataset parameters are included in the response. The primary time parameter (always required to be the first parameter in the list) is always included, even if not requested. These examples clarify the way a server must respond to various types of dataset parameter subsetting requests:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">888</span></div>
      </div>
      <div class="block">
        <ul lo="890" lf="909" class="loose">
          <li markerlength="2" padlength="0" lo="890" lf="893">
            <div class="block">
              <p padlength="0" lo="890" lf="893"><strong type="md">request:</strong> do not ask for any specific parameters (i.e., there is no request parameter called <code type="md">parameters</code>);<br> <strong type="md">example:</strong> <code type="md">http://server/hapi/data?dataset=MY_MAG_DATA&amp;start=1999Z&amp;stop=2000Z</code><br> <strong type="md">response:</strong> all columns</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">907-911</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="894" lf="897">
            <div class="block">
              <p padlength="0" lo="894" lf="897"><strong type="md">request:</strong> ask for just the primary time parameter;<br> <strong type="md">example:</strong> <code type="md">http://server/hapi/data?dataset=MY_MAG_DATA&amp;parameters=Epoch&amp;start=1999Z&amp;stop=2000Z</code>
                <strong type="md">response:</strong> just the primary time column
              </p>
              <div class="block-info" style="display: none;"><span class="line-numbers">907-911</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="898" lf="901">
            <div class="block">
              <p padlength="0" lo="898" lf="901"><strong type="md">request:</strong> ask for a single parameter other than the primary time column (like <code type="md">parameters=Bx</code>);<br> <strong type="md">example:</strong> <code type="md">http://server/hapi/data?dataset=MY_MAG_DATA&amp;parameters=Bx&amp;start=1999Z&amp;stop=2000Z</code><br> <strong type="md">response:</strong> primary time column and the one requested data column</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">907-911</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="902" lf="906">
            <div class="block">
              <p padlength="0" lo="902" lf="906"><strong type="md">request:</strong> ask for two or more parameters other than the primary time column;<br> <strong type="md">example:</strong> <code type="md">http://server/hapi/data?dataset=MY_MAG_DATA&amp;parameters=Bx,By&amp;start=1999Z&amp;stop=2000Z</code><br> <strong type="md">response:</strong> primary time column followed by the requested parameters in the order they occurred in the original, non-subsetted dataset header (note that the parameter ordering in the request must match the original ordering anyway - see just below)</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">907-911</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="907" lf="911">
            <div class="block">
              <p padlength="0" lo="907" lf="910"><strong type="md">request:</strong> including the <code type="md">parameters</code> option, but not specifying any parameter names;<br> <strong type="md">example:</strong> <code type="md">http://server/hapi/data?dataset=MY_MAG_DATA&amp;parameters=&amp;start=1999Z&amp;stop=2000Z</code><br> <strong type="md">response:</strong> the is an error condition; server should report a user input error</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">907-910</span></div>
            </div>
          </li>
        </ul>
        <div class="block-info" style="display: none;"><span class="line-numbers">890-909</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="911" lf="911">Note that the order in which parameters are listed in the request must not differ from the order that they appear in the response. For a data set with parameters <code type="md">Time,param1,param2,param3</code> this subset request</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">911</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="913" lf="913"><code type="md">?dataset=ID&amp;parameters=Time,param1,param3</code></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">913</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="915" lf="915">is acceptable, because <code type="md">param1</code> is before <code type="md">param3</code> in the <code type="md">parameters</code> array (as determined by the <code type="md">/info</code> response). However, asking for a subset of parameters in a different order, as in</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">915</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="917" lf="917"><code type="md">?dataset=ID&amp;parameters=Time,param3,param1</code></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">917</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="919" lf="919">is not allowed, and servers must respond with an error status. See <a href="#4-status-codes">HAPI Status Codes</a> for more about error conditions and codes.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">919</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="921" lf="921"><a name="3613-json-references" number="3.6.13" lo="921" raw="### 3.6.13 JSON References" class="anchor hanchor" href="#3613-json-references" lf="921"><span class="hnumber">3.6.13</span>&nbsp;<span class="htext">JSON References</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">921</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="923" lf="923">If the same information appears more than once within the <code type="md">info</code> response, it is better to represent this in a structured way rather than to copy and paste duplicate information. Consider a dataset with two parameters – one for the measurement values and one for the uncertainties. If the two parameters both have <code type="md">bins</code> associated with them, the bin definitions would likely be identical. Having each <code type="md">bins</code> entity refer back to a pre-defined, single entity ensures that the bins values are indeed identical, and it also more readily communicates the connection to users, who otherwise would have to do a value-by-value comparison to see if the bin values are indeed the same.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">923</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="925" lf="925">JSON has a built-in mechanism for handling references. HAPI utilizes a subset of these features, focusing on the simple aspects that are implemented in many existing JSON parsers. Also, using only simple features makes it easier for users to implement custom parsers. Note that familiarity with the full description of JSON references (<a href="#6-references">5</a>), is helpful in understanding the use of references in HAPI described below.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">925</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="927" lf="927">JSON objects placed within a <code type="md">definitions</code> block can be pointed to using the <code type="md">$ref</code> notation. We begin with an example. This <code type="md">definitions</code> block contains this object called <code type="md">angle_bins</code> that can be referred to using the JSON syntax <code type="md">#/definitions/angle_bins</code></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">927</span></div>
      </div>
      <div class="block">
        <pre lo="929" lf="946" class="language-json"><div class="block"><code lo="930" lf="930">{</code><div class="line-number">1</div></div><div class="block"><code lo="931" lf="931">  <span class="hljs-attr">"definitions"</span> : {</code><div class="line-number">2</div></div><div class="block"><code lo="932" lf="932">     <span class="hljs-attr">"pitch_angle_bins"</span>: {</code><div class="line-number">3</div></div><div class="block"><code lo="933" lf="933">         <span class="hljs-attr">"name"</span> : <span class="hljs-string">"angle_bins"</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="934" lf="934">         <span class="hljs-attr">"ranges"</span>: [ [  <span class="hljs-number">0</span>,   <span class="hljs-number">30</span> ],</code><div class="line-number">5</div></div><div class="block"><code lo="935" lf="935">                     [  <span class="hljs-number">30</span>,  <span class="hljs-number">60</span> ],</code><div class="line-number">6</div></div><div class="block"><code lo="936" lf="936">                     [  <span class="hljs-number">60</span>,  <span class="hljs-number">90</span> ],</code><div class="line-number">7</div></div><div class="block"><code lo="937" lf="937">                     [  <span class="hljs-number">90</span>,  <span class="hljs-number">120</span> ],</code><div class="line-number">8</div></div><div class="block"><code lo="938" lf="938">                     [  <span class="hljs-number">120</span>, <span class="hljs-number">150</span> ],</code><div class="line-number">9</div></div><div class="block"><code lo="939" lf="939">                     [  <span class="hljs-number">150</span>, <span class="hljs-number">180</span> ]</code><div class="line-number">10</div></div><div class="block"><code lo="940" lf="940">                   ],</code><div class="line-number">11</div></div><div class="block"><code lo="941" lf="941">         <span class="hljs-attr">"units"</span>: <span class="hljs-string">"degrees"</span>,</code><div class="line-number">12</div></div><div class="block"><code lo="942" lf="942">         <span class="hljs-attr">"label"</span>: <span class="hljs-string">"Pitch Angle"</span></code><div class="line-number">13</div></div><div class="block"><code lo="943" lf="943">      }</code><div class="line-number">14</div></div><div class="block"><code lo="944" lf="944">   }</code><div class="line-number">15</div></div><div class="block"><code lo="945" lf="945">}</code><div class="line-number">16</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">929-946</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="948" lf="948">Here is a parameter fragment showing the reference used in two places:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">948</span></div>
      </div>
      <div class="block">
        <pre lo="950" lf="980" class="language-json"><div class="block"><code lo="951" lf="951">{</code><div class="line-number">1</div></div><div class="block"><code lo="952" lf="952">   <span class="hljs-attr">"parameters"</span>: [</code><div class="line-number">2</div></div><div class="block"><code lo="953" lf="953">       { <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Time"</span>,</code><div class="line-number">3</div></div><div class="block"><code lo="954" lf="954">         <span class="hljs-attr">"type"</span>: <span class="hljs-string">"isotime"</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="955" lf="955">         <span class="hljs-attr">"units"</span>: <span class="hljs-string">"UTC"</span>,</code><div class="line-number">5</div></div><div class="block"><code lo="956" lf="956">         <span class="hljs-attr">"fill"</span>: <span class="hljs-literal">null</span>,</code><div class="line-number">6</div></div><div class="block"><code lo="957" lf="957">         <span class="hljs-attr">"length"</span>: <span class="hljs-number">24</span></code><div class="line-number">7</div></div><div class="block"><code lo="958" lf="958">       },</code><div class="line-number">8</div></div><div class="block"><code lo="959" lf="959">       { <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Protons_10_to_20_keV_pitch_angle_spectrogram"</span>,</code><div class="line-number">9</div></div><div class="block"><code lo="960" lf="960">         <span class="hljs-attr">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">10</div></div><div class="block"><code lo="961" lf="961">         <span class="hljs-attr">"units"</span>: <span class="hljs-string">"1/(cm^2 s^2 ster keV)"</span>,</code><div class="line-number">11</div></div><div class="block"><code lo="962" lf="962">         <span class="hljs-attr">"fill"</span>: <span class="hljs-string">"-1.0e38"</span>,</code><div class="line-number">12</div></div><div class="block"><code lo="963" lf="963">         <span class="hljs-attr">"size"</span>: [<span class="hljs-number">6</span>],</code><div class="line-number">13</div></div><div class="block"><code lo="964" lf="964">         <span class="hljs-attr">"bins"</span>: [</code><div class="line-number">14</div></div><div class="block"><code lo="965" lf="965">                  {<span class="hljs-attr">"$ref"</span> : <span class="hljs-string">"#/definitions/angle_bins"</span>}</code><div class="line-number">15</div></div><div class="block"><code lo="966" lf="966">                 ]</code><div class="line-number">16</div></div><div class="block"><code lo="967" lf="967">       },</code><div class="line-number">17</div></div><div class="block"><code lo="968" lf="968">       { <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Uncert_for_Protons_10_to_20_keV_pitch_angle_spectrogram"</span>,</code><div class="line-number">18</div></div><div class="block"><code lo="969" lf="969">         <span class="hljs-attr">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">19</div></div><div class="block"><code lo="970" lf="970">         <span class="hljs-attr">"units"</span>: <span class="hljs-string">"1/(cm^2 s^2 ster keV)"</span>,</code><div class="line-number">20</div></div><div class="block"><code lo="971" lf="971">         <span class="hljs-attr">"fill"</span>: <span class="hljs-string">"-1.0e38"</span>,</code><div class="line-number">21</div></div><div class="block"><code lo="972" lf="972">         <span class="hljs-attr">"size"</span>: [<span class="hljs-number">6</span>],</code><div class="line-number">22</div></div><div class="block"><code lo="973" lf="973">         <span class="hljs-attr">"bins"</span>: [</code><div class="line-number">23</div></div><div class="block"><code lo="974" lf="974">                  {<span class="hljs-attr">"$ref"</span> : <span class="hljs-string">"#/definitions/angle_bins"</span>}</code><div class="line-number">24</div></div><div class="block"><code lo="975" lf="975">                 ]</code><div class="line-number">25</div></div><div class="block"><code lo="976" lf="976"></code><div class="line-number">26</div></div><div class="block"><code lo="977" lf="977">       }</code><div class="line-number">27</div></div><div class="block"><code lo="978" lf="978">   ]</code><div class="line-number">28</div></div><div class="block"><code lo="979" lf="979">}</code><div class="line-number">29</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">950-980</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="982" lf="982">The following rules govern the use of JSON references a HAPI info response.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">982</span></div>
      </div>
      <div class="block">
        <ol lo="984" lf="987" class="compact">
          <li markerlength="3" padlength="0" lo="984" lf="984">
            <div class="block">
              <p padlength="0" lo="984" lf="984">Anything referenced must appear in a top-level node named <code type="md">definitions</code> (this is a JSON Schema convention [<a href="#6-references">5</a>] but a HAPI requirement).</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">987-989</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="985" lf="985">
            <div class="block">
              <p padlength="0" lo="985" lf="985">Objects in the <code type="md">definitions</code> node may not contain references (JSON Schema [<a href="#6-references">5</a>] allows this, HAPI does not)</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">987-989</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="986" lf="986">
            <div class="block">
              <p padlength="0" lo="986" lf="986">Referencing by <code type="md">id</code> is not allowed (JSON Schema [<a href="#6-references">5</a>] allows this, HAPI does not)</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">987-989</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="987" lf="989">
            <div class="block">
              <p padlength="0" lo="987" lf="987"><code type="md">name</code> may not be a reference (names must be unique anyway - this would make HAPI <code type="md">info</code> potentially very confusing).</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">987</span></div>
            </div>
          </li>
        </ol>
        <div class="block-info" style="display: none;"><span class="line-numbers">984-987</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="989" lf="989">By default, a server resolves these references and excludes the definitions node. Stated more directly, a server should not return a <code type="md">definitions</code> block unless the request URL includes</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">989</span></div>
      </div>
      <div class="block">
        <pre lo="991" lf="993">resolve_references=false</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">991-993</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="995" lf="995">in which case the response metadata should contain references to items in the <code type="md">definitions</code> node. Note these constraints on what can be in the <code type="md">definitions</code>:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">995</span></div>
      </div>
      <div class="block">
        <ol lo="997" lf="998" class="compact">
          <li markerlength="3" padlength="0" lo="997" lf="997">
            <div class="block">
              <p padlength="0" lo="997" lf="997">Any element found in the <code type="md">definitions</code> node must be used somewhere in the full set of metadata. Note that this full metadata can be obtained via an <code type="md">info</code> request or by a <code type="md">data</code> request to which the header is prepended (using <code type="md">include=header</code>).</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">998-1000</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="998" lf="1000">
            <div class="block">
              <p padlength="0" lo="998" lf="998">If an <code type="md">info</code> request or a <code type="md">data</code> request with <code type="md">include=header</code> is for a <em type="md" marker="*">subset</em> of parameters (e.g., <code type="md">/hapi/info?id=DATASETID&amp;parameters=p1,p2)</code>, the <code type="md">definitions</code> node may contain objects that are not referenced in the metadata for the requested subset of parameters; removal of unused definitions is optional in this case.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">998</span></div>
            </div>
          </li>
        </ol>
        <div class="block-info" style="display: none;"><span class="line-numbers">997-998</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1000" lf="1000">Here then is a complete example of an info response with references unresolved, showing a <code type="md">definitions</code> block and the use of references. The <code type="md">units</code> string is commonly used, so it is captured as a reference, as is the full bins definition. Note that this example shows how just a part of the <code type="md">bins</code> object could be represented – the <code type="md">centers</code> object in this case. The example is valid HAPI content, but normally, it would not make sense to use both of these approaches in a single <code type="md">info</code> response.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1000</span></div>
      </div>
      <div class="block">
        <pre lo="1002" lf="1060" class="language-json"><div class="block"><code lo="1003" lf="1003">{</code><div class="line-number">1</div></div><div class="block"><code lo="1004" lf="1004">    <span class="hljs-attr">"HAPI"</span>: <span class="hljs-string">"3.1"</span>,</code><div class="line-number">2</div></div><div class="block"><code lo="1005" lf="1005">    <span class="hljs-attr">"status"</span>: {</code><div class="line-number">3</div></div><div class="block"><code lo="1006" lf="1006">        <span class="hljs-attr">"code"</span>: <span class="hljs-number">1200</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="1007" lf="1007">        <span class="hljs-attr">"message"</span>: <span class="hljs-string">"OK"</span></code><div class="line-number">5</div></div><div class="block"><code lo="1008" lf="1008">    },</code><div class="line-number">6</div></div><div class="block"><code lo="1009" lf="1009">    <span class="hljs-attr">"startDate"</span>: <span class="hljs-string">"2016-01-01T00:00:00.000Z"</span>,</code><div class="line-number">7</div></div><div class="block"><code lo="1010" lf="1010">    <span class="hljs-attr">"stopDate"</span>: <span class="hljs-string">"2016-01-31T24:00:00.000Z"</span>,</code><div class="line-number">8</div></div><div class="block"><code lo="1011" lf="1011">    <span class="hljs-attr">"definitions"</span>: {</code><div class="line-number">9</div></div><div class="block"><code lo="1012" lf="1012">        <span class="hljs-attr">"spectrum_units"</span>: <span class="hljs-string">"particles/(sec ster cm^2 keV)"</span>,</code><div class="line-number">10</div></div><div class="block"><code lo="1013" lf="1013">        <span class="hljs-attr">"spectrum_units_explicit"</span>: [<span class="hljs-string">"particles/(sec ster cm^2 keV)"</span>,<span class="hljs-string">"particles/(sec ster cm^2 keV)"</span>,<span class="hljs-string">"particles/(sec ster cm^2 keV)"</span>,<span class="hljs-string">"particles/(sec ster cm^2 keV)"</span>],</code><div class="line-number">11</div></div><div class="block"><code lo="1014" lf="1014">        <span class="hljs-attr">"spectrum_bins_centers"</span>: [<span class="hljs-number">15</span>, <span class="hljs-number">25</span>, <span class="hljs-number">35</span>, <span class="hljs-number">45</span>],</code><div class="line-number">12</div></div><div class="block"><code lo="1015" lf="1015">        <span class="hljs-attr">"spectrum_bins"</span>: {</code><div class="line-number">13</div></div><div class="block"><code lo="1016" lf="1016">            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"energy"</span>,</code><div class="line-number">14</div></div><div class="block"><code lo="1017" lf="1017">            <span class="hljs-attr">"units"</span>: <span class="hljs-string">"keV"</span>,</code><div class="line-number">15</div></div><div class="block"><code lo="1018" lf="1018">            <span class="hljs-attr">"centers"</span>: [<span class="hljs-number">15</span>, <span class="hljs-number">25</span>, <span class="hljs-number">35</span>, <span class="hljs-number">45</span>]</code><div class="line-number">16</div></div><div class="block"><code lo="1019" lf="1019">        }</code><div class="line-number">17</div></div><div class="block"><code lo="1020" lf="1020">    },</code><div class="line-number">18</div></div><div class="block"><code lo="1021" lf="1021">    <span class="hljs-attr">"parameters"</span>: [{</code><div class="line-number">19</div></div><div class="block"><code lo="1022" lf="1022">            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Time"</span>,</code><div class="line-number">20</div></div><div class="block"><code lo="1023" lf="1023">            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"isotime"</span>,</code><div class="line-number">21</div></div><div class="block"><code lo="1024" lf="1024">            <span class="hljs-attr">"units"</span>: <span class="hljs-string">"UTC"</span>,</code><div class="line-number">22</div></div><div class="block"><code lo="1025" lf="1025">            <span class="hljs-attr">"fill"</span>: <span class="hljs-literal">null</span>,</code><div class="line-number">23</div></div><div class="block"><code lo="1026" lf="1026">            <span class="hljs-attr">"length"</span>: <span class="hljs-number">24</span></code><div class="line-number">24</div></div><div class="block"><code lo="1027" lf="1027">        },</code><div class="line-number">25</div></div><div class="block"><code lo="1028" lf="1028">        {</code><div class="line-number">26</div></div><div class="block"><code lo="1029" lf="1029">            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"proton_spectrum"</span>,</code><div class="line-number">27</div></div><div class="block"><code lo="1030" lf="1030">            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">28</div></div><div class="block"><code lo="1031" lf="1031">            <span class="hljs-attr">"size"</span>: [<span class="hljs-number">4</span>],</code><div class="line-number">29</div></div><div class="block"><code lo="1032" lf="1032">            <span class="hljs-attr">"units"</span>: {<span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/spectrum_units"</span>},</code><div class="line-number">30</div></div><div class="block"><code lo="1033" lf="1033">            <span class="hljs-attr">"fill"</span>: <span class="hljs-string">"-1e31"</span>,</code><div class="line-number">31</div></div><div class="block"><code lo="1034" lf="1034">            <span class="hljs-attr">"bins"</span>: [{</code><div class="line-number">32</div></div><div class="block"><code lo="1035" lf="1035">                <span class="hljs-attr">"name"</span>: <span class="hljs-string">"energy"</span>,</code><div class="line-number">33</div></div><div class="block"><code lo="1036" lf="1036">                <span class="hljs-attr">"units"</span>: <span class="hljs-string">"keV"</span>,</code><div class="line-number">34</div></div><div class="block"><code lo="1037" lf="1037">                <span class="hljs-attr">"centers"</span>: {<span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/spectrum_bins_centers"</span>}</code><div class="line-number">35</div></div><div class="block"><code lo="1038" lf="1038">            }]</code><div class="line-number">36</div></div><div class="block"><code lo="1039" lf="1039">        },</code><div class="line-number">37</div></div><div class="block"><code lo="1040" lf="1040">        {</code><div class="line-number">38</div></div><div class="block"><code lo="1041" lf="1041">            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"proton_spectrum2"</span>,</code><div class="line-number">39</div></div><div class="block"><code lo="1042" lf="1042">            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">40</div></div><div class="block"><code lo="1043" lf="1043">            <span class="hljs-attr">"size"</span>: [<span class="hljs-number">4</span>],</code><div class="line-number">41</div></div><div class="block"><code lo="1044" lf="1044">            <span class="hljs-attr">"units"</span>: {<span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/spectrum_units"</span>},</code><div class="line-number">42</div></div><div class="block"><code lo="1045" lf="1045">            <span class="hljs-attr">"bins"</span>: [</code><div class="line-number">43</div></div><div class="block"><code lo="1046" lf="1046">                     {<span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/spectrum_bins"</span>}</code><div class="line-number">44</div></div><div class="block"><code lo="1047" lf="1047">                    ]</code><div class="line-number">45</div></div><div class="block"><code lo="1048" lf="1048">        },</code><div class="line-number">46</div></div><div class="block"><code lo="1049" lf="1049">        {</code><div class="line-number">47</div></div><div class="block"><code lo="1050" lf="1050">            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"proton_spectrum3"</span>,</code><div class="line-number">48</div></div><div class="block"><code lo="1051" lf="1051">            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">49</div></div><div class="block"><code lo="1052" lf="1052">            <span class="hljs-attr">"size"</span>: [<span class="hljs-number">4</span>],</code><div class="line-number">50</div></div><div class="block"><code lo="1053" lf="1053">            <span class="hljs-attr">"units"</span>: {<span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/spectrum_units_explicit"</span>},</code><div class="line-number">51</div></div><div class="block"><code lo="1054" lf="1054">            <span class="hljs-attr">"bins"</span>: [</code><div class="line-number">52</div></div><div class="block"><code lo="1055" lf="1055">                     {<span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/spectrum_bins"</span>}</code><div class="line-number">53</div></div><div class="block"><code lo="1056" lf="1056">                    ]</code><div class="line-number">54</div></div><div class="block"><code lo="1057" lf="1057">        }</code><div class="line-number">55</div></div><div class="block"><code lo="1058" lf="1058">    ]</code><div class="line-number">56</div></div><div class="block"><code lo="1059" lf="1059">}</code><div class="line-number">57</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1002-1060</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="1062" lf="1062"><a name="3614-time-varying-bins" number="3.6.14" lo="1062" raw="### 3.6.14 Time-Varying Bins" class="anchor hanchor" href="#3614-time-varying-bins" lf="1062"><span class="hnumber">3.6.14</span>&nbsp;<span class="htext">Time-Varying Bins</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">1062</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1064" lf="1064">In some datasets, the bin centers and/or ranges may vary with time. The static values in the <code type="md">bins</code> object definition for <code type="md">ranges</code> or <code type="md">centers</code> are fixed arrays and therefore cannot represent bin boundaries that change over time. As of HAPI 3.0, the <code type="md">ranges</code> and <code type="md">centers</code> objects can be, instead of a numeric array, a string value that is the name of another parameter in the dataset. This allows the <code type="md">ranges</code> and <code type="md">centers</code> objects to point to a parameter that is then to be treated as the source of numbers for the bin <code type="md">centers</code> or <code type="md">ranges</code>. The size of the target parameter must match that of the bins being represented. And of course, each record of data can contain a different value for the parameter, effectively allowing the bin <code type="md">ranges</code> and <code type="md">centers</code> to change potentially at every time step.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1064</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1066" lf="1066">This kind of complex data structure for binned data will require some corresponding complexity on clients reading the data, but that it outside the scope of this specification.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1066</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1068" lf="1068">The following example shows a dataset of multi-dimensional values: proton intensities over multiple energies and at multiple pitch angles. The data parameter name is <code type="md">proton_spectrum</code>, and it has bins for both an energy dimension (16 different energy bins) and a pitch angle dimension (3 different pitch angle bins). For the bins in both of these dimensions, a parameter name is given instead of numeric values for the bin locations. The parameter <code type="md">energy_centers</code> contains an array of 16 values at each time step, and these are to be interpreted as the time-varying centers of the energies. Likewise, there is a <code type="md">pitch_angle_centers</code> parameter which serves as the source of numbers for the centers of the other bin dimension. There are also <code type="md">ranges</code> parameters that are two-dimensional elements since each range consists of a high and low value.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1068</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1070" lf="1070">Note that the comments embedded in the JSON (with a prefix of <code type="md">//</code>) are for human readers only since comments are not supported in JSON.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1070</span></div>
      </div>
      <div class="block">
        <pre lo="1072" lf="1131" class="language-JSON"><div class="block"><code lo="1073" lf="1073">{</code><div class="line-number">1</div></div><div class="block"><code lo="1074" lf="1074">    <span class="hljs-attr">"HAPI"</span>: <span class="hljs-string">"3.1"</span>,</code><div class="line-number">2</div></div><div class="block"><code lo="1075" lf="1075">    <span class="hljs-attr">"status"</span>: {<span class="hljs-attr">"code"</span>: <span class="hljs-number">1200</span>, <span class="hljs-attr">"message"</span>: <span class="hljs-string">"OK"</span>},</code><div class="line-number">3</div></div><div class="block"><code lo="1076" lf="1076">    <span class="hljs-attr">"startDate"</span>: <span class="hljs-string">"2016-01-01T00:00:00.000Z"</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="1077" lf="1077">    <span class="hljs-attr">"stopDate"</span>: <span class="hljs-string">"2016-01-31T24:00:00.000Z"</span>,</code><div class="line-number">5</div></div><div class="block"><code lo="1078" lf="1078">    <span class="hljs-attr">"parameters"</span>: </code><div class="line-number">6</div></div><div class="block"><code lo="1079" lf="1079">        [ { <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Time"</span>,</code><div class="line-number">7</div></div><div class="block"><code lo="1080" lf="1080">            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"isotime"</span>,</code><div class="line-number">8</div></div><div class="block"><code lo="1081" lf="1081">            <span class="hljs-attr">"units"</span>: <span class="hljs-string">"UTC"</span>,</code><div class="line-number">9</div></div><div class="block"><code lo="1082" lf="1082">            <span class="hljs-attr">"fill"</span>: <span class="hljs-literal">null</span>,</code><div class="line-number">10</div></div><div class="block"><code lo="1083" lf="1083">            <span class="hljs-attr">"length"</span>: <span class="hljs-number">24</span></code><div class="line-number">11</div></div><div class="block"><code lo="1084" lf="1084">          },</code><div class="line-number">12</div></div><div class="block"><code lo="1085" lf="1085">          { <span class="hljs-attr">"name"</span>: <span class="hljs-string">"proton_spectrum"</span>,</code><div class="line-number">13</div></div><div class="block"><code lo="1086" lf="1086">            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">14</div></div><div class="block"><code lo="1087" lf="1087">            <span class="hljs-attr">"size"</span>: [<span class="hljs-number">16</span>,<span class="hljs-number">3</span>],</code><div class="line-number">15</div></div><div class="block"><code lo="1088" lf="1088">            <span class="hljs-attr">"units"</span>: <span class="hljs-string">"particles/(sec ster cm^2 keV)"</span>,</code><div class="line-number">16</div></div><div class="block"><code lo="1089" lf="1089">            <span class="hljs-attr">"fill"</span>: <span class="hljs-string">"-1e31"</span>,</code><div class="line-number">17</div></div><div class="block"><code lo="1090" lf="1090">            <span class="hljs-attr">"bins"</span>:</code><div class="line-number">18</div></div><div class="block"><code lo="1091" lf="1091">            [</code><div class="line-number">19</div></div><div class="block"><code lo="1092" lf="1092">                { <span class="hljs-attr">"name"</span>: <span class="hljs-string">"energy"</span>,</code><div class="line-number">20</div></div><div class="block"><code lo="1093" lf="1093">                  <span class="hljs-attr">"units"</span>: <span class="hljs-string">"keV"</span>,</code><div class="line-number">21</div></div><div class="block"><code lo="1094" lf="1094">                  <span class="hljs-attr">"centers"</span>: <span class="hljs-string">"energy_centers"</span>,</code><div class="line-number">22</div></div><div class="block"><code lo="1095" lf="1095">                  <span class="hljs-attr">"ranges"</span>:  <span class="hljs-string">"energy_ranges"</span></code><div class="line-number">23</div></div><div class="block"><code lo="1096" lf="1096">                },</code><div class="line-number">24</div></div><div class="block"><code lo="1097" lf="1097">                { <span class="hljs-attr">"name"</span>: <span class="hljs-string">"pitch_angle"</span>,</code><div class="line-number">25</div></div><div class="block"><code lo="1098" lf="1098">                  <span class="hljs-attr">"units"</span>: <span class="hljs-string">"degrees"</span>,</code><div class="line-number">26</div></div><div class="block"><code lo="1099" lf="1099">                  <span class="hljs-attr">"centers"</span>: <span class="hljs-string">"pitch_angle_centers"</span>,</code><div class="line-number">27</div></div><div class="block"><code lo="1100" lf="1100">                  <span class="hljs-attr">"ranges"</span>:  <span class="hljs-string">"pitch_angle_ranges"</span></code><div class="line-number">28</div></div><div class="block"><code lo="1101" lf="1101">                }</code><div class="line-number">29</div></div><div class="block"><code lo="1102" lf="1102">            ]</code><div class="line-number">30</div></div><div class="block"><code lo="1103" lf="1103">          },</code><div class="line-number">31</div></div><div class="block"><code lo="1104" lf="1104">          {</code><div class="line-number">32</div></div><div class="block"><code lo="1105" lf="1105">            <span class="hljs-attr">"name"</span>: <span class="hljs-string">"energy_centers"</span>,</code><div class="line-number">33</div></div><div class="block"><code lo="1106" lf="1106">            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">34</div></div><div class="block"><code lo="1107" lf="1107">            <span class="hljs-attr">"size"</span>: [<span class="hljs-number">16</span>],   <span class="hljs-comment">// 16 matches size[0] in #/proton_spectrum/size</span></code><div class="line-number">35</div></div><div class="block"><code lo="1108" lf="1108">            <span class="hljs-attr">"units"</span>: <span class="hljs-string">"keV"</span>, <span class="hljs-comment">// Should match #/proton_spectrum/units</span></code><div class="line-number">36</div></div><div class="block"><code lo="1109" lf="1109">            <span class="hljs-attr">"fill"</span>: <span class="hljs-string">"-1e31"</span> <span class="hljs-comment">// Clients should interpret as meaning no measurement made in bin</span></code><div class="line-number">37</div></div><div class="block"><code lo="1110" lf="1110">          },</code><div class="line-number">38</div></div><div class="block"><code lo="1111" lf="1111">          { <span class="hljs-attr">"name"</span>: <span class="hljs-string">"energy_ranges"</span>,</code><div class="line-number">39</div></div><div class="block"><code lo="1112" lf="1112">            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">40</div></div><div class="block"><code lo="1113" lf="1113">            <span class="hljs-attr">"size"</span>: [<span class="hljs-number">16</span>,<span class="hljs-number">2</span>], <span class="hljs-comment">// 16 matches size[0] in #/proton_spectrum/size; size[1] must be 2</span></code><div class="line-number">41</div></div><div class="block"><code lo="1114" lf="1114">            <span class="hljs-attr">"units"</span>: <span class="hljs-string">"keV"</span>, <span class="hljs-comment">// Should match #/proton_spectrum/units</span></code><div class="line-number">42</div></div><div class="block"><code lo="1115" lf="1115">            <span class="hljs-attr">"fill"</span>: <span class="hljs-string">"-1e31"</span> <span class="hljs-comment">// Clients should interpret as meaning no measurement made in bin</span></code><div class="line-number">43</div></div><div class="block"><code lo="1116" lf="1116">          },</code><div class="line-number">44</div></div><div class="block"><code lo="1117" lf="1117">          { <span class="hljs-attr">"name"</span>: <span class="hljs-string">"pitch_angle_centers"</span>,</code><div class="line-number">45</div></div><div class="block"><code lo="1118" lf="1118">            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">46</div></div><div class="block"><code lo="1119" lf="1119">            <span class="hljs-attr">"size"</span>: [<span class="hljs-number">3</span>],        <span class="hljs-comment">// 3 matches size[1] in #/proton_spectrum/size</span></code><div class="line-number">47</div></div><div class="block"><code lo="1120" lf="1120">            <span class="hljs-attr">"units"</span>: <span class="hljs-string">"degrees"</span>, <span class="hljs-comment">// Should match #/proton_spectrum/units</span></code><div class="line-number">48</div></div><div class="block"><code lo="1121" lf="1121">            <span class="hljs-attr">"fill"</span>: <span class="hljs-string">"-1e31"</span>     <span class="hljs-comment">// Clients should interpret as meaning no measurement made in bin</span></code><div class="line-number">49</div></div><div class="block"><code lo="1122" lf="1122">          },</code><div class="line-number">50</div></div><div class="block"><code lo="1123" lf="1123">          { <span class="hljs-attr">"name"</span>: <span class="hljs-string">"pitch_angle_ranges"</span>,</code><div class="line-number">51</div></div><div class="block"><code lo="1124" lf="1124">            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">52</div></div><div class="block"><code lo="1125" lf="1125">            <span class="hljs-attr">"size"</span>: [<span class="hljs-number">3</span>,<span class="hljs-number">2</span>],      <span class="hljs-comment">// 3 matches size[1] in #/proton_spectrum/size; size[1] must be 2</span></code><div class="line-number">53</div></div><div class="block"><code lo="1126" lf="1126">            <span class="hljs-attr">"units"</span>: <span class="hljs-string">"degrees"</span>, <span class="hljs-comment">// Should match #/proton_spectrum/units</span></code><div class="line-number">54</div></div><div class="block"><code lo="1127" lf="1127">            <span class="hljs-attr">"fill"</span>: <span class="hljs-string">"-1e31"</span>     <span class="hljs-comment">// Clients should interpret as meaning no measurement made in bin</span></code><div class="line-number">55</div></div><div class="block"><code lo="1128" lf="1128">          }</code><div class="line-number">56</div></div><div class="block"><code lo="1129" lf="1129">        ]</code><div class="line-number">57</div></div><div class="block"><code lo="1130" lf="1130">}</code><div class="line-number">58</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1072-1131</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="1133" lf="1133"><a name="3615-time-varying-size" number="3.6.15" lo="1133" raw="### 3.6.15 Time-Varying size" class="anchor hanchor" href="#3615-time-varying-size" lf="1133"><span class="hnumber">3.6.15</span>&nbsp;<span class="htext">Time-Varying size</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">1133</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1135" lf="1135">If the size of a dimension in a multi-dimensional parameter changes over time, the only way to represent this in HAPI is to define the parameter as having the largest potential <code type="md">size</code>, and then use a <code type="md">fill</code> value for any data elements which are no longer actually being provided. </p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1135</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1137" lf="1137">If this size-changing parameter has bins, then the number of bins would also presumably change over time. Servers can indicate the absence of one or more bins by using the time-varying bin mechanism described above and then providing all fill values for the <code type="md">ranges</code> and <code type="md">centers</code> of the records where those bins are absent.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1137</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1139" lf="1139">The following example shows a conceptual data block (not in HAPI format) where there is an array parameter whose values are in columns <code type="md">d0</code> through <code type="md">d3</code>. The corresponding bin centers are in the columns <code type="md">c0</code> through <code type="md">c3</code>. The data block shows what happens in the data if the size of the parameter changes from 4 to 3 after the third time step. The data values change to fill (<code type="md">-1.0e31</code> in this case), and the values for the centers also change to fill to indicate that the corresponding array elements are no longer valid elements in the array.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1139</span></div>
      </div>
      <div class="block">
        <pre lo="1141" lf="1149"><div class="block"><code lo="1142" lf="1142">time                     data0 data1 data2 data3     center0 center1 center1 center3 </code><div class="line-number">1</div></div><div class="block"><code lo="1143" lf="1143">2019-01-01T14:10:30.5    1.2   3.4   5.4   8.9       10.0    20.0    30.0    40.0</code><div class="line-number">2</div></div><div class="block"><code lo="1144" lf="1144">2019-01-01T14:10:31.5    1.1   3.6   5.8   8.4       10.0    20.0    30.0    40.0</code><div class="line-number">3</div></div><div class="block"><code lo="1145" lf="1145">2019-01-01T14:10:32.5    1.4   3.8   5.9   8.3       10.0    20.0    30.0    40.0</code><div class="line-number">4</div></div><div class="block"><code lo="1146" lf="1146">2019-01-01T14:10:33.5    1.3   3.1   5.3   -1.0e31   15.0    25.0    35.0    -1.0e31</code><div class="line-number">5</div></div><div class="block"><code lo="1147" lf="1147">2019-01-01T14:10:34.5    1.2   3.0   5.4   -1.0e31   15.0    25.0    35.0    -1.0e31</code><div class="line-number">6</div></div><div class="block"><code lo="1148" lf="1148">2019-01-01T14:10:35.5    1.2   3.0   5.4   -1.0e31   15.0    25.0    35.0    -1.0e31</code><div class="line-number">7</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1141-1149</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1151" lf="1151">Note that the fill value in the bin centers column indicates that this <code type="md">data3</code> array element is gone in a more permanent sense than just finding a fill value in <code type="md">data3</code>. Just finding some fill values in an array parameter would not necessarily indicate that the column was permanently gone, while the bin center being fill indicates that the array size has effectively changed. If a bin center is fill, the corresponding data column should also be fill, even though this is duplicate information (since having a fill <code type="md">center3</code> in a record already indicates a non-usable <code type="md">data3</code> in that record.)</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1151</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1153" lf="1153">Recall that the static <code type="md">centers</code> and <code type="md">ranges</code> objects in the JSON <code type="md">info</code> header cannot contain null or fill values.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1153</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="1155" lf="1155"><a name="37-data" number="3.7" lo="1155" raw="## 3.7 `data`" class="anchor hanchor" href="#37-data" lf="1155"><span class="hnumber">3.7</span>&nbsp;<span class="htext"><code type="md">data</code></span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">1155</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1157" lf="1157">Provides access to a dataset and allows for selecting time ranges and parameters to return. Data is returned as a CSV [<a href="#6-references">2</a>], binary, or JSON- stream. The <a href="#374-response-formats">Data Stream Content</a> section describes the stream structure and layout for each format.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1157</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1159" lf="1159">The resulting data stream can be thought of as a stream of records, where each record contains one value for each of the dataset parameters. Each data record must contain a data value or a fill value (of the same data type) for each parameter.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1159</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="1161" lf="1161"><a name="371-request-parameters" number="3.7.1" lo="1161" raw="### 3.7.1 Request Parameters" class="anchor hanchor" href="#371-request-parameters" lf="1161"><span class="hnumber">3.7.1</span>&nbsp;<span class="htext">Request Parameters</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">1161</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1163" lf="1163">Items with a * superscript in the following table have been modified from version 2 to 3; see <a href="#1-significant-changes-to-specification">change notes</a>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1163</span></div>
      </div>
      <div class="block">
        <table lo="1165" lf="1172">
          <thead>
            <tr>
              <th>Name</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">dataset</code><a href="#1-significant-changes-to-specification"><sup>&nbsp;*&nbsp;</sup></a></td>
              <td><strong type="md">Required</strong> The identifier for the dataset (<a href="#82-allowed-characters-in-id-dataset-and-parameter">allowed characters</a>).</td>
            </tr>
            <tr>
              <td><code type="md">start</code><a href="#1-significant-changes-to-specification"><sup>&nbsp;*&nbsp;</sup></a></td>
              <td><strong type="md">Required</strong> The inclusive begin time for the data to include in the response.</td>
            </tr>
            <tr>
              <td><code type="md">stop</code><a href="#1-significant-changes-to-specification"><sup>&nbsp;*&nbsp;</sup></a></td>
              <td><strong type="md">Required</strong> The exclusive end time for the data to include in the response.</td>
            </tr>
            <tr>
              <td><code type="md">parameters</code></td>
              <td><strong type="md">Optional</strong> A comma-separated list of parameters to include in the response (<a href="#82-allowed-characters-in-id-dataset-and-parameter">allowed characters</a>). Default is all parameters.</td>
            </tr>
            <tr>
              <td><code type="md">include</code></td>
              <td><strong type="md">Optional</strong> Has one possible value of “header” to indicate that the info header should precede the data. The header lines will be prefixed with the “#“ character.</td>
            </tr>
            <tr>
              <td><code type="md">format</code></td>
              <td><strong type="md">Optional</strong> The desired format for the data stream. Possible values are “csv”, “binary”, and “json”.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="1174" lf="1174"><a name="372-response" number="3.7.2" lo="1174" raw="### 3.7.2 Response" class="anchor hanchor" href="#372-response" lf="1174"><span class="hnumber">3.7.2</span>&nbsp;<span class="htext">Response</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">1174</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1176" lf="1176">Response is in one of three formats: CSV format as defined by [<a href="#6-references">2</a>] with a mime type of <code type="md">text/csv</code>; binary format where floating points number are in IEEE 754 [<a href="#6-references">4</a>] format and byte order is LSB and a mime type of <code type="md">application/octet-stream</code>; JSON format with the structure as described below and a mime type of <code type="md">application/json</code>. The default data format is CSV. See the <a href="#374-response-formats">Data Stream Content</a> section for more details.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1176</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1178" lf="1178">If the header is requested, then for binary and CSV formats, each line of the header must begin with a hash (#) character. For JSON output, no prefix character should be used, because the data object will just be another JSON element within the response. Other than the possible prefix character, the contents of the header should be the same as returned from the info endpoint. When a data stream has an attached header, the header must contain an additional “format” attribute to indicate if the content after the header is <code type="md">csv</code>, <code type="md">binary</code>, or <code type="md">json</code>. Note that when a header is included in a CSV response, the data stream is not strictly in CSV format.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1178</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1180" lf="1180">The first parameter in the data must be a time column (type of <code type="md">isotime</code>) and this must be the independent variable for the dataset. If a subset of parameters is requested, the time column is always provided, even if it is not requested.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1180</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1182" lf="1182">Note that the <code type="md">start</code> request parameter represents an inclusive lower bound and <code type="md">stop</code> request parameter is the exclusive upper bound. The server must return data records within these time constraints, i.e., no extra records outside the requested time range. This enables the concatenation of results from adjacent time ranges.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1182</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1184" lf="1184">There is an interaction between the <code type="md">info</code> endpoint and the <code type="md">data</code> endpoint because the header from the <code type="md">info</code> endpoint describes the record structure of data emitted by the <code type="md">data</code> endpoint. Thus after a single call to the <code type="md">info</code> endpoint, a client could make multiple calls to the <code type="md">data</code> endpoint (for multiple time ranges, for example) with the expectation that each data response would contain records described by the single call to the <code type="md">info</code> endpoint. The <code type="md">data</code> endpoint can optionally prefix the data stream with header information, potentially obviating the need for the <code type="md">info</code> endpoint. But the <code type="md">info</code> endpoint is useful in that it allows clients to learn about a dataset without having to make a data request.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1184</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1186" lf="1186">Both the <code type="md">info</code> and <code type="md">data</code> endpoints take an optional request parameter (recall the definition of request parameter in the introduction) called <code type="md">parameters</code> that allows users to restrict the dataset parameters listed in the header and data stream, respectively. This enables clients (that already have a list of dataset parameters from a previous info or data request) to request a header for a subset of parameters that will match a data stream for the same subset of parameters. The parameters in the subset request must be ordered according to the original order of the parameters in the metadata, i.e., the subset can contain fewer parameters but must not rearrange the order of any parameters. Duplicates are not allowed.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1186</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1188" lf="1188">Consider the following dataset header for a fictional dataset with the identifier <code type="md">MY_MAG_DATA</code>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1188</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1190" lf="1190">An <code type="md">info</code> request for this dataset<a href="#1-significant-changes-to-specification"><sup>*</sup></a></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1190</span></div>
      </div>
      <div class="block">
        <pre lo="1192" lf="1194">http://server/hapi/info?dataset=MY_MAG_DATA</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1192-1194</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1196" lf="1196">results in a header listing of all the dataset parameters:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1196</span></div>
      </div>
      <div class="block">
        <pre lo="1198" lf="1215" class="language-javascript"><div class="block"><code lo="1199" lf="1199">{  </code><div class="line-number">1</div></div><div class="block"><code lo="1200" lf="1200">    <span class="hljs-string">"HAPI"</span>: <span class="hljs-string">"3.1"</span>,</code><div class="line-number">2</div></div><div class="block"><code lo="1201" lf="1201">   <span class="hljs-string">"status"</span>: { <span class="hljs-string">"code"</span>: <span class="hljs-number">1200</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"OK"</span>},</code><div class="line-number">3</div></div><div class="block"><code lo="1202" lf="1202">   <span class="hljs-string">"startDate"</span>: <span class="hljs-string">"2005-01-21T12:05:00.000Z"</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="1203" lf="1203">   <span class="hljs-string">"stopDate"</span> : <span class="hljs-string">"2010-10-18T00:00:00Z"</span>,</code><div class="line-number">5</div></div><div class="block"><code lo="1204" lf="1204">   <span class="hljs-string">"parameters"</span>: [</code><div class="line-number">6</div></div><div class="block"><code lo="1205" lf="1205">       { <span class="hljs-string">"name"</span>: <span class="hljs-string">"Time"</span>,</code><div class="line-number">7</div></div><div class="block"><code lo="1206" lf="1206">         <span class="hljs-string">"type"</span>: <span class="hljs-string">"isotime"</span>,</code><div class="line-number">8</div></div><div class="block"><code lo="1207" lf="1207">         <span class="hljs-string">"units"</span>: <span class="hljs-string">"UTC"</span>,</code><div class="line-number">9</div></div><div class="block"><code lo="1208" lf="1208">         <span class="hljs-string">"fill"</span>: <span class="hljs-literal">null</span>,</code><div class="line-number">10</div></div><div class="block"><code lo="1209" lf="1209">         <span class="hljs-string">"length"</span>: <span class="hljs-number">24</span> },</code><div class="line-number">11</div></div><div class="block"><code lo="1210" lf="1210">       { <span class="hljs-string">"name"</span>: <span class="hljs-string">"Bx"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"double"</span>, <span class="hljs-string">"units"</span>: <span class="hljs-string">"nT"</span>, <span class="hljs-string">"fill"</span>: <span class="hljs-string">"-1e31"</span>},</code><div class="line-number">12</div></div><div class="block"><code lo="1211" lf="1211">       { <span class="hljs-string">"name"</span>: <span class="hljs-string">"By"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"double"</span>, <span class="hljs-string">"units"</span>: <span class="hljs-string">"nT"</span>, <span class="hljs-string">"fill"</span>: <span class="hljs-string">"-1e31"</span>},</code><div class="line-number">13</div></div><div class="block"><code lo="1212" lf="1212">       { <span class="hljs-string">"name"</span>: <span class="hljs-string">"Bz"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"double"</span>, <span class="hljs-string">"units"</span>: <span class="hljs-string">"nT"</span>, <span class="hljs-string">"fill"</span>: <span class="hljs-string">"-1e31"</span>},</code><div class="line-number">14</div></div><div class="block"><code lo="1213" lf="1213">    ]</code><div class="line-number">15</div></div><div class="block"><code lo="1214" lf="1214">}</code><div class="line-number">16</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1198-1215</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1217" lf="1217">An <code type="md">info</code> request for a single parameter has the form</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1217</span></div>
      </div>
      <div class="block">
        <pre lo="1219" lf="1221">http://server/hapi/info?dataset=MY_MAG_DATA&amp;parameters=Bx</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1219-1221</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1223" lf="1223">and would result in the following header:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1223</span></div>
      </div>
      <div class="block">
        <pre lo="1225" lf="1240" class="language-javascript"><div class="block"><code lo="1226" lf="1226">{  </code><div class="line-number">1</div></div><div class="block"><code lo="1227" lf="1227">    <span class="hljs-string">"HAPI"</span>: <span class="hljs-string">"3.1"</span>,</code><div class="line-number">2</div></div><div class="block"><code lo="1228" lf="1228">   <span class="hljs-string">"status"</span>: { <span class="hljs-string">"code"</span>: <span class="hljs-number">1200</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"OK"</span>},</code><div class="line-number">3</div></div><div class="block"><code lo="1229" lf="1229">   <span class="hljs-string">"startDate"</span>: <span class="hljs-string">"2005-01-21T12:05:00.000Z"</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="1230" lf="1230">   <span class="hljs-string">"stopDate"</span> : <span class="hljs-string">"2010-10-18T00:00:00Z"</span>,</code><div class="line-number">5</div></div><div class="block"><code lo="1231" lf="1231">   <span class="hljs-string">"parameters"</span>: [</code><div class="line-number">6</div></div><div class="block"><code lo="1232" lf="1232">       { <span class="hljs-string">"name"</span>: <span class="hljs-string">"Time"</span>,</code><div class="line-number">7</div></div><div class="block"><code lo="1233" lf="1233">         <span class="hljs-string">"type"</span>: <span class="hljs-string">"isotime"</span>,</code><div class="line-number">8</div></div><div class="block"><code lo="1234" lf="1234">         <span class="hljs-string">"units"</span>: <span class="hljs-string">"UTC"</span>,</code><div class="line-number">9</div></div><div class="block"><code lo="1235" lf="1235">         <span class="hljs-string">"fill"</span>: <span class="hljs-literal">null</span>,</code><div class="line-number">10</div></div><div class="block"><code lo="1236" lf="1236">         <span class="hljs-string">"length"</span>: <span class="hljs-number">24</span> },</code><div class="line-number">11</div></div><div class="block"><code lo="1237" lf="1237">       { <span class="hljs-string">"name"</span>: <span class="hljs-string">"Bx"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"double"</span>, <span class="hljs-string">"units"</span>: <span class="hljs-string">"nT"</span>, <span class="hljs-string">"fill"</span>: <span class="hljs-string">"-1e31"</span> },</code><div class="line-number">12</div></div><div class="block"><code lo="1238" lf="1238">    ]</code><div class="line-number">13</div></div><div class="block"><code lo="1239" lf="1239">}</code><div class="line-number">14</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1225-1240</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1242" lf="1242">Note that the time parameter is included even though it was not requested.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1242</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1244" lf="1244">In this request<a href="#1-significant-changes-to-specification"><sup>*</sup></a>,</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1244</span></div>
      </div>
      <div class="block">
        <pre lo="1246" lf="1248">http://server/hapi/info?dataset=MY_MAG_DATA&amp;parameters=By,Bx</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1246-1248</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1250" lf="1250">the parameters are out of order. So the server should respond with an error code. See <a href="#4-status-codes">HAPI Status Codes</a> for more about error conditions.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1250</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="1252" lf="1252"><a name="373-examples" number="3.7.3" lo="1252" raw="### 3.7.3 Examples" class="anchor hanchor" href="#373-examples" lf="1252"><span class="hnumber">3.7.3</span>&nbsp;<span class="htext">Examples</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">1252</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1254" lf="1254">Two examples of data requests and responses are given – one with the header and one without.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1254</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h4 lo="1256" lf="1256"><a name="3731-data-with-header" number="3.7.3.1" lo="1256" raw="#### 3.7.3.1 Data with Header" class="anchor hanchor" href="#3731-data-with-header" lf="1256"><span class="hnumber">3.7.3.1</span>&nbsp;<span class="htext">Data with Header</span></a></h4>
        <div class="block-info" style="display: none;"><span class="line-numbers">1256</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1258" lf="1258">Note that in the following request, the header is to be included, so the same header from the <code type="md">info</code> endpoint will be prepended to the data but with a ‘#’ character as a prefix for every header line.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1258</span></div>
      </div>
      <div class="block">
        <pre lo="1260" lf="1262">http://server/hapi/data?dataset=path/to/ACE_MAG&amp;start=2016-01-01Z&amp;stop=2016-02-01Z&amp;include=header</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1260-1262</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1264" lf="1264">Response</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1264</span></div>
      </div>
      <div class="block">
        <pre lo="1267" lf="1307"><div class="block"><code lo="1268" lf="1268">#{</code><div class="line-number">1</div></div><div class="block"><code lo="1269" lf="1269">#  "HAPI": "3.1",</code><div class="line-number">2</div></div><div class="block"><code lo="1270" lf="1270">#  "status": { "code": 1200, "message": "OK"},</code><div class="line-number">3</div></div><div class="block"><code lo="1271" lf="1271">#  "format": "csv",</code><div class="line-number">4</div></div><div class="block"><code lo="1272" lf="1272">#  "startDate": "1998-001Z",</code><div class="line-number">5</div></div><div class="block"><code lo="1273" lf="1273">#  "stopDate" : "2017-001Z",</code><div class="line-number">6</div></div><div class="block"><code lo="1274" lf="1274">#  "parameters": [</code><div class="line-number">7</div></div><div class="block"><code lo="1275" lf="1275">#       { "name": "Time",</code><div class="line-number">8</div></div><div class="block"><code lo="1276" lf="1276">#         "type": "isotime",</code><div class="line-number">9</div></div><div class="block"><code lo="1277" lf="1277">#         "units": "UTC",</code><div class="line-number">10</div></div><div class="block"><code lo="1278" lf="1278">#         "fill": null,</code><div class="line-number">11</div></div><div class="block"><code lo="1279" lf="1279">#         "length": 24</code><div class="line-number">12</div></div><div class="block"><code lo="1280" lf="1280">#       },</code><div class="line-number">13</div></div><div class="block"><code lo="1281" lf="1281">#       { "name": "radial_position",</code><div class="line-number">14</div></div><div class="block"><code lo="1282" lf="1282">#         "type": "double",</code><div class="line-number">15</div></div><div class="block"><code lo="1283" lf="1283">#         "units": "km",</code><div class="line-number">16</div></div><div class="block"><code lo="1284" lf="1284">#         "fill": null,</code><div class="line-number">17</div></div><div class="block"><code lo="1285" lf="1285">#         "description": "radial position of the spacecraft"</code><div class="line-number">18</div></div><div class="block"><code lo="1286" lf="1286">#       },</code><div class="line-number">19</div></div><div class="block"><code lo="1287" lf="1287">#       { "name": "quality flag",</code><div class="line-number">20</div></div><div class="block"><code lo="1288" lf="1288">#         "type": "integer",</code><div class="line-number">21</div></div><div class="block"><code lo="1289" lf="1289">#         "units ": null,</code><div class="line-number">22</div></div><div class="block"><code lo="1290" lf="1290">#         "fill": null,</code><div class="line-number">23</div></div><div class="block"><code lo="1291" lf="1291">#         "description ": "0=OK and 1=bad " </code><div class="line-number">24</div></div><div class="block"><code lo="1292" lf="1292">#       },</code><div class="line-number">25</div></div><div class="block"><code lo="1293" lf="1293">#       { "name": "mag_GSE",</code><div class="line-number">26</div></div><div class="block"><code lo="1294" lf="1294">#         "type": "double",</code><div class="line-number">27</div></div><div class="block"><code lo="1295" lf="1295">#         "units": "nT",</code><div class="line-number">28</div></div><div class="block"><code lo="1296" lf="1296">#         "fill": "-1e31",</code><div class="line-number">29</div></div><div class="block"><code lo="1297" lf="1297">#         "size" : [3],</code><div class="line-number">30</div></div><div class="block"><code lo="1298" lf="1298">#         "description": "hourly average Cartesian magnetic field in nT in GSE"</code><div class="line-number">31</div></div><div class="block"><code lo="1299" lf="1299">#       }</code><div class="line-number">32</div></div><div class="block"><code lo="1300" lf="1300">#   ]</code><div class="line-number">33</div></div><div class="block"><code lo="1301" lf="1301">#}</code><div class="line-number">34</div></div><div class="block"><code lo="1302" lf="1302">2016-01-01T00:00:00.000Z,6.848351,0,0.05,0.08,-50.98</code><div class="line-number">35</div></div><div class="block"><code lo="1303" lf="1303">2016-01-01T01:00:00.000Z,6.890149,0,0.04,0.07,-45.26</code><div class="line-number">36</div></div><div class="block"><code lo="1304" lf="1304">        ...</code><div class="line-number">37</div></div><div class="block"><code lo="1305" lf="1305">        ... </code><div class="line-number">38</div></div><div class="block"><code lo="1306" lf="1306">2016-01-01T02:00:00.000Z,8.142253,0,2.74,0.17,-28.62</code><div class="line-number">39</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1267-1307</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h4 lo="1309" lf="1309"><a name="3732-data-only" number="3.7.3.2" lo="1309" raw="#### 3.7.3.2 Data Only" class="anchor hanchor" href="#3732-data-only" lf="1309"><span class="hnumber">3.7.3.2</span>&nbsp;<span class="htext">Data Only</span></a></h4>
        <div class="block-info" style="display: none;"><span class="line-numbers">1309</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1311" lf="1312">The following example is the same, except it lacks the request to include the header.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1311-1312</span></div>
      </div>
      <div class="block">
        <pre lo="1314" lf="1316">http://server/hapi/data?dataset=path/to/ACE_MAG&amp;start=2016-01-01&amp;stop=2016-02-01</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1314-1316</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1318" lf="1318">Response</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1318</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1320" lf="1320">Consider a dataset that contains a time field, two scalar fields, and one array field of length 3. The response will have the form:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1320</span></div>
      </div>
      <div class="block">
        <pre lo="1322" lf="1328"><div class="block"><code lo="1323" lf="1323">2016-01-01T00:00:00.000Z,6.848351,0,0.05,0.08,-50.98</code><div class="line-number">1</div></div><div class="block"><code lo="1324" lf="1324">2016-01-01T01:00:00.000Z,6.890149,0,0.04,0.07,-45.26</code><div class="line-number">2</div></div><div class="block"><code lo="1325" lf="1325">...</code><div class="line-number">3</div></div><div class="block"><code lo="1326" lf="1326">...</code><div class="line-number">4</div></div><div class="block"><code lo="1327" lf="1327">2016-01-01T02:00:00.000Z,8.142253,0,2.74,0.17,-28.62</code><div class="line-number">5</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1322-1328</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1330" lf="1330">Note that there is no leading row with column names. The RFC 4180 CSV standard [<a href="#6-references">2</a>] indicates that such a header row is optional. Leaving out this row avoids the complication of having to name individual columns representing array elements within an array parameter. Recall that an array parameter has only a single name. The place HAPI specifies parameter names is via the <code type="md">info</code> endpoint, which also provides size details for each parameter (scalar or array, and array size if needed). The size of each parameter must be used to determine how many columns it will use in the CSV data. By not specifying a row of column names, HAPI avoids the need to have a naming convention for columns representing elements within an array parameter.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1330</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="1332" lf="1332"><a name="374-response-formats" number="3.7.4" lo="1332" raw="### 3.7.4 Response formats" class="anchor hanchor" href="#374-response-formats" lf="1332"><span class="hnumber">3.7.4</span>&nbsp;<span class="htext">Response formats</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">1332</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1334" lf="1334">The three possible output formats are <code type="md">csv</code>, <code type="md">binary</code>, and <code type="md">json</code>. A HAPI server must support <code type="md">csv</code>, while <code type="md">binary</code> and <code type="md">json</code> are optional. We emphasize that this is simple and ephemeral streaming transport format and should not be considered or used in the same way as standard file formats such as FITS, HDF, CDF, and netCDF, which were not designed for streaming.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1334</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h4 lo="1336" lf="1336"><a name="3741-csv" number="3.7.4.1" lo="1336" raw="#### 3.7.4.1 CSV" class="anchor hanchor" href="#3741-csv" lf="1336"><span class="hnumber">3.7.4.1</span>&nbsp;<span class="htext">CSV</span></a></h4>
        <div class="block-info" style="display: none;"><span class="line-numbers">1336</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1338" lf="1338">The format of the CSV stream should follow the guidelines for CSV data as described by RFC 4180 [<a href="#6-references">2</a>]. Each CSV record is one line of text, with commas between the values for each dataset parameter. Any value containing a comma must be surrounded with double quotes, and any double-quote within a value must be escaped by a preceding double quote. An array parameter (i.e., the value of a parameter within one record is an array) will have multiple columns resulting from placing each element in the array into its own column. For 1-D arrays, the ordering of the unwound columns is just the index ordering of the array elements. For 2-D arrays or higher, the right-most array index is the fastest moving index when mapping array elements to columns.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1338</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1340" lf="1340">It is up to the server to decide how much precision to include in the ASCII values when generating CSV output.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1340</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1342" lf="1342">Clients programs interpreting the HAPI CSV stream are encouraged to use existing CSV parsing libraries to be able to interpret the full range of possible CSV values, including quoted commas and escaped quotes. However, it is expected that a simple CSV parser would probably handle more than 90% of known cases.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1342</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h4 lo="1344" lf="1344"><a name="3742-binary" number="3.7.4.2" lo="1344" raw="#### 3.7.4.2 Binary" class="anchor hanchor" href="#3742-binary" lf="1344"><span class="hnumber">3.7.4.2</span>&nbsp;<span class="htext">Binary</span></a></h4>
        <div class="block-info" style="display: none;"><span class="line-numbers">1344</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1346" lf="1346">The binary data output is best described as a binary translation of the CSV stream, with full numerical precision and no commas or newlines. Recall that the dataset header provides type information for each dataset parameter, and this definitively indicates the number of bytes and the byte structure of each parameter, and thus of each binary record in the stream. Array parameters are unwound in the same way for binary as for CSV data as described above. All numeric values are little-endian (LSB), integers are always signed and four-byte and floating-point values are always IEEE 754 double-precision values.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1346</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1348" lf="1348">Dataset parameters of type <code type="md">string</code> and <code type="md">isotime</code> (which are just strings of ISO 8601 dates) have a maximum length specified in the info header. This length indicates how many bytes to read for each string value. If the string content is less than the length, the remaining bytes must be padded with ASCII null bytes. If a string uses all the bytes specified in the <code type="md">length</code>, no null terminator or padding is needed.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1348</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h4 lo="1350" lf="1350"><a name="3743-json" number="3.7.4.3" lo="1350" raw="#### 3.7.4.3 JSON" class="anchor hanchor" href="#3743-json" lf="1350"><span class="hnumber">3.7.4.3</span>&nbsp;<span class="htext">JSON</span></a></h4>
        <div class="block-info" style="display: none;"><span class="line-numbers">1350</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1352" lf="1352">For the JSON output, an additional <code type="md">data</code> element added to the header contains the array of data records. These records are very similar to the CSV output, except that strings must be quoted and arrays must be delimited with array brackets in standard JSON fashion. An example helps to illustrate what the JSON format looks like. Consider a dataset with four parameters: time, a scalar value, a 1-D array value with an array length of 3, and a string value. The header with the data object might look like this:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1352</span></div>
      </div>
      <div class="block">
        <pre lo="1354" lf="1375" class="language-javascript"><div class="block"><code lo="1355" lf="1355">{  <span class="hljs-string">"HAPI"</span>: <span class="hljs-string">"3.1"</span>,</code><div class="line-number">1</div></div><div class="block"><code lo="1356" lf="1356">   <span class="hljs-string">"status"</span>: { <span class="hljs-string">"code"</span>: <span class="hljs-number">1200</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"OK"</span>},</code><div class="line-number">2</div></div><div class="block"><code lo="1357" lf="1357">   <span class="hljs-string">"startDate"</span>: <span class="hljs-string">"2005-01-21T12:05:00.000Z"</span>,</code><div class="line-number">3</div></div><div class="block"><code lo="1358" lf="1358">   <span class="hljs-string">"stopDate"</span> : <span class="hljs-string">"2010-10-18T00:00:00Z"</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="1359" lf="1359">   <span class="hljs-string">"parameters"</span>: [</code><div class="line-number">5</div></div><div class="block"><code lo="1360" lf="1360">       { <span class="hljs-string">"name"</span>: <span class="hljs-string">"Time"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"isotime"</span>, <span class="hljs-string">"units"</span>: <span class="hljs-string">"UTC"</span>, <span class="hljs-string">"fill"</span>: <span class="hljs-literal">null</span>, <span class="hljs-string">"length"</span>: <span class="hljs-number">24</span> },</code><div class="line-number">6</div></div><div class="block"><code lo="1361" lf="1361">       { <span class="hljs-string">"name"</span>: <span class="hljs-string">"quality_flag"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"integer"</span>, <span class="hljs-string">"description"</span>: <span class="hljs-string">"0=ok; 1=bad"</span>, <span class="hljs-string">"fill"</span>: <span class="hljs-literal">null</span> },</code><div class="line-number">7</div></div><div class="block"><code lo="1362" lf="1362">       { <span class="hljs-string">"name"</span>: <span class="hljs-string">"mag_GSE"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"double"</span>, <span class="hljs-string">"units"</span>: <span class="hljs-string">"nT"</span>,  <span class="hljs-string">"fill"</span>: <span class="hljs-string">"-1e31"</span>, <span class="hljs-string">"size"</span> : [<span class="hljs-number">3</span>],</code><div class="line-number">8</div></div><div class="block"><code lo="1363" lf="1363">           <span class="hljs-string">"description"</span>: <span class="hljs-string">"hourly average Cartesian magnetic field in nT in GSE"</span> },</code><div class="line-number">9</div></div><div class="block"><code lo="1364" lf="1364">       { <span class="hljs-string">"name"</span>: <span class="hljs-string">"region"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>, <span class="hljs-string">"length"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"fill"</span>: <span class="hljs-string">"???"</span>, <span class="hljs-string">"units"</span> : <span class="hljs-literal">null</span>}</code><div class="line-number">10</div></div><div class="block"><code lo="1365" lf="1365">   ],</code><div class="line-number">11</div></div><div class="block"><code lo="1366" lf="1366"><span class="hljs-string">"format"</span>: <span class="hljs-string">"json"</span>,</code><div class="line-number">12</div></div><div class="block"><code lo="1367" lf="1367"><span class="hljs-string">"data"</span> : [</code><div class="line-number">13</div></div><div class="block"><code lo="1368" lf="1368">[<span class="hljs-string">"2010-001T12:01:00Z"</span>,<span class="hljs-number">0</span>,[<span class="hljs-number">0.44302</span>,<span class="hljs-number">0.398</span>,-<span class="hljs-number">8.49</span>],<span class="hljs-string">"sheath"</span>],</code><div class="line-number">14</div></div><div class="block"><code lo="1369" lf="1369">[<span class="hljs-string">"2010-001T12:02:00Z"</span>,<span class="hljs-number">0</span>,[<span class="hljs-number">0.44177</span>,<span class="hljs-number">0.393</span>,-<span class="hljs-number">9.45</span>],<span class="hljs-string">"sheath"</span>],</code><div class="line-number">15</div></div><div class="block"><code lo="1370" lf="1370">[<span class="hljs-string">"2010-001T12:03:00Z"</span>,<span class="hljs-number">0</span>,[<span class="hljs-number">0.44003</span>,<span class="hljs-number">0.397</span>,-<span class="hljs-number">9.38</span>],<span class="hljs-string">"sheath"</span>],</code><div class="line-number">16</div></div><div class="block"><code lo="1371" lf="1371">[<span class="hljs-string">"2010-001T12:04:00Z"</span>,<span class="hljs-number">1</span>,[<span class="hljs-number">0.43904</span>,<span class="hljs-number">0.399</span>,-<span class="hljs-number">9.16</span>],<span class="hljs-string">"sheath"</span>]</code><div class="line-number">17</div></div><div class="block"><code lo="1372" lf="1372">]</code><div class="line-number">18</div></div><div class="block"><code lo="1373" lf="1373"></code><div class="line-number">19</div></div><div class="block"><code lo="1374" lf="1374">}</code><div class="line-number">20</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1354-1375</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1377" lf="1377">The data element is a JSON array of records. Each record is itself an array of parameters. The time and string values are in quotes, and any data parameter in the record that is an array must be inside square brackets. This data element appears as the last JSON element in the header.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1377</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1379" lf="1379">The record-oriented arrangement of the JSON format is designed to allow a streaming client reader to begin reading (and processing) the JSON data stream before it is complete. Note also that servers can start streaming the data as soon as records are available. In other words, the JSON format can be read and written without first having to hold all the records in memory. This may require some custom elements in the JSON parser, but preserving this streaming capability is important for keeping the HAPI spec scalable. Note that if pulling all the data content into memory is not a problem, then ordinary JSON parsers will also have no trouble with this JSON arrangement.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1379</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="1381" lf="1381"><a name="375-errors-while-streaming" number="3.7.5" lo="1381" raw="### 3.7.5 Errors While Streaming" class="anchor hanchor" href="#375-errors-while-streaming" lf="1381"><span class="hnumber">3.7.5</span>&nbsp;<span class="htext">Errors While Streaming</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">1381</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1383" lf="1383">If the server encounters an error while streaming the data and can no longer continue, it will have to terminate the stream. The <code type="md">status</code> code (both HTTP and HAPI) and message will already have been set in the header and is unlikely to represent the error. Clients will have to be able to detect an abnormally terminated stream and should treat this aborted condition the same as an internal server error. See <a href="#4-status-codes">HAPI Status Codes</a> for more about error conditions.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1383</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h3 lo="1385" lf="1385"><a name="376-representation-of-time" number="3.7.6" lo="1385" raw="### 3.7.6 Representation of Time" class="anchor hanchor" href="#376-representation-of-time" lf="1385"><span class="hnumber">3.7.6</span>&nbsp;<span class="htext">Representation of Time</span></a></h3>
        <div class="block-info" style="display: none;"><span class="line-numbers">1385</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1387" lf="1387">Time values are always strings, and the HAPI Time format is a subset of the ISO 8601 date and time format [<a href="#6-references">1</a>].</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1387</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1389" lf="1389">The restriction on the ISO 8601 standard is that time must be represented as</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1389</span></div>
      </div>
      <div class="block">
        <pre lo="1391" lf="1393">yyyy-mm-ddThh:mm:ss.sssZ</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1391-1393</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1395" lf="1395">or</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1395</span></div>
      </div>
      <div class="block">
        <pre lo="1397" lf="1399">yyyy-dddThh:mm:ss.sssZ</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1397-1399</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1401" lf="1401">and the trailing <code type="md">Z</code> is required. Strings with less precision are allowed as per ISO 8601, e.g., <code type="md">1999-01Z</code> and <code type="md">1999-001Z</code>. The <a href="https://github.com/hapi-server/verifier-nodejs/blob/master/schemas/HAPI-data-access-schema-2.1.json">HAPI JSON schema</a> lists a series of regular expressions that codifies the intention of the HAPI Time specification. The schema allows leap seconds and hour=24, but it should be expected that not all clients will be able to properly interpret such time stamps.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1401</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1403" lf="1403">The name of the time parameter is not constrained by this specification. However, it is strongly recommended that the time column name be “Time” or “Epoch” or some easily recognizable label.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1403</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h4 lo="1405" lf="1405"><a name="3761-incoming-time-values" number="3.7.6.1" lo="1405" raw="#### 3.7.6.1 Incoming time values" class="anchor hanchor" href="#3761-incoming-time-values" lf="1405"><span class="hnumber">3.7.6.1</span>&nbsp;<span class="htext">Incoming time values</span></a></h4>
        <div class="block-info" style="display: none;"><span class="line-numbers">1405</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1408" lf="1408">Servers must require incoming time values from clients (i.e., the <code type="md">start</code> and <code type="md">stop</code> values on a data request) to be valid ISO 8601 time values. The full ISO 8601 specification allows many esoteric options, but servers must only accept a subset of the full ISO 8601 specification, namely one of either year-month-day (<code type="md">yyyy-mm-ddThh:mm:ss.sssZ</code>) or day-of-year (<code type="md">yyyy-dddThh:mm:ss.sssZ</code>). Any date or time elements missing from the string are assumed to take on their smallest possible value. For example, the string <code type="md">2017-01-15T23:00:00.000Z</code> could be given in truncated form as <code type="md">2017-01-15T23Z</code>. Servers should be able to parse and properly interpret these truncated time strings. When clients provide a date at day resolution only, the <code type="md">T</code> must not be included, so servers should be able to parse day-level time strings without the <code type="md">T</code>, as in <code type="md">2017-01-15Z</code>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1408</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1410" lf="1410">Note that in the ISO 8601 specification, a trailing <code type="md">Z</code> on the time string indicates that no time zone offset should be applied (so the time zone is GMT+0). If a server receives an input value without the trailing <code type="md">Z</code>, it should still interpret the time zone as GMT+0 rather than a local time zone. This is true for time strings with all fields present and for truncated time strings with some fields missing.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1410</span></div>
      </div>
      <div class="block">
        <table lo="1412" lf="1416">
          <thead>
            <tr>
              <th>Example time range request</th>
              <th>comments</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">start=2017-01-15T00:00:00.000Z&amp;stop=2017-01-16T00:00.000Z</code></td>
              <td>OK - fully specified time value with proper trailing Z</td>
            </tr>
            <tr>
              <td><code type="md">start=2017-01-15Z&amp;stop=2017-01-16Z</code></td>
              <td>OK - truncated time value that assumes 00:00.000 for the time</td>
            </tr>
            <tr>
              <td><code type="md">start=2017-01-15&amp;stop=2017-01-16</code></td>
              <td>OK - truncated with missing trailing Z, but GMT+0 should be assumed</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="block">
        <p padlength="0" lo="1418" lf="1418">There is no restriction on the earliest date or latest date a HAPI server can accept, but as a practical limit, clients are likely to be written to handle dates only in the range from years 1700 to 2100.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1418</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h4 lo="1420" lf="1420"><a name="3762-outgoing-time-values" number="3.7.6.2" lo="1420" raw="#### 3.7.6.2 Outgoing time values" class="anchor hanchor" href="#3762-outgoing-time-values" lf="1420"><span class="hnumber">3.7.6.2</span>&nbsp;<span class="htext">Outgoing time values</span></a></h4>
        <div class="block-info" style="display: none;"><span class="line-numbers">1420</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1422" lf="1422">Time values in the outgoing data stream must be ISO 8601 strings. A server may use one of either the <code type="md">yyyy-mm-ddThh:mm:ss.sssZ</code> or the <code type="md">yyyy-dddThh:mm:ss.sssZ</code> form, but must use one format and length within any given dataset. The time values must not have any local time zone offset, and they must indicate this by including the trailing <code type="md">Z</code>. Time or date elements may be omitted from the end to indicate that the missing time or date elements should be given their lowest possible value. For date values at day resolution (i.e., no time values), the <code type="md">T</code> must be omitted, but the <code type="md">Z</code> is still required. Note that this implies that clients must be able to parse potentially truncated ISO strings of both Year-Month-Day and Year-Day-of-year styles. </p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1422</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1424" lf="1424">For <code type="md">binary</code> and <code type="md">csv</code> data, the length of time string, truncated or not, is indicated with the <code type="md">length</code> attribute for the time parameter, which refers to the number of printable characters in the string. Every time string must have the same length and so padding of time strings is not needed.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1424</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1426" lf="1426">The data returned from a request should strictly fall within the limits of <code type="md">start</code> and <code type="md">stop</code>, i.e., servers should not pad the data with extra records outside the requested time range. Furthermore, note that the <code type="md">start</code> value is inclusive (data at or beyond this time can be included), while <code type="md">stop</code> is exclusive (data at or beyond this time shall not be included in the response).</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1426</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1428" lf="1428">The primary time column is not allowed to contain any fill values. Each record must be identified with a valid time value. If other columns contain parameters of type <code type="md">isotime</code> (i.e., time columns that are not the primary time column), there may be fill values in these columns. Note that the <code type="md">fill</code> definition is required for all types, including <code type="md">isotime</code> parameters. The fill value for a (non-primary) <code type="md">isotime</code> parameter does not have to be a valid time string - it can be any string, but it must be the same length string as the time variable.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1428</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1430" lf="1430">Note that the ISO 8601 time format allows arbitrary precision on the time values. HAPI servers should therefore also accept time values with high precision. As a practical limit, servers should at least handle time values down to the nanosecond or picosecond level.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1430</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1432" lf="1432">HAPI metadata (in the <code type="md">info</code> header for a dataset) allows a server to specify where timestamps fall within the measurement window. The <code type="md">timeStampLocation</code> attribute for a dataset is an enumeration with possible values of <code type="md">begin</code>, <code type="md">center</code>, <code type="md">end</code>, or <code type="md">other</code>. This attribute is optional, but the default value is <code type="md">center</code>, which refers to the exact middle of the measurement window. If the location of the timestamp is not known or is more complex than any of the allowed options, the server can report <code type="md">other</code> for the <code type="md">timeStampLocation</code>. Clients are likely to use <code type="md">center</code> for <code type="md">other</code>, simply because there is not much else they can do. Note that the optional <code type="md">cadence</code> attribute is not meant to be accurate enough to use as a way to compute an alternate time stamp location. In other words, given a <code type="md">timeStampLocation</code> of <code type="md">begin</code> and a <code type="md">cadence</code> of 10 seconds, it may not always work to just add 5 seconds to get to the center of the measurement interval for this dataset. This is because the <code type="md">cadence</code> provides a nominal duration, and the actual duration of each measurement may vary significantly throughout the dataset. Some datasets may have specific parameters devoted to accumulation time or other measurement window parameters, but HAPI metadata does not capture this level of measurement window details. Suggestions on handling the issues discussed in this paragraph are given on the <a href="https://github.com/hapi-server/data-specification/wiki/Implementation-Notes#Durations">implementation notes</a> page.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1432</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h4 lo="1434" lf="1434"><a name="3763-time-range-with-no-data" number="3.7.6.3" lo="1434" raw="#### 3.7.6.3 Time Range With No Data" class="anchor hanchor" href="#3763-time-range-with-no-data" lf="1434"><span class="hnumber">3.7.6.3</span>&nbsp;<span class="htext">Time Range With No Data</span></a></h4>
        <div class="block-info" style="display: none;"><span class="line-numbers">1434</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1436" lf="1436">If a request is made for a time range in which there are no data, the server must respond with an HTTP 200 status code. The HAPI <a href="#4-status-codes">status-code</a> must be either <code type="md">HAPI 1201</code> (the explicit no-data code) or <code type="md">HAPI 1200</code> (OK). While the more specific <code type="md">HAPI 1201</code> code is preferred, servers may have a difficult time recognizing the lack of data before issuing the header, in which case the issuing of <code type="md">HAPI 1200</code> and the subsequent absence of any data records communicates to clients that everything worked but no data was present in the given interval. Any response that includes a header (JSON always does, and CSV and binary when requested) must have this same HAPI status set in the header. For CSV or binary responses without a header, the message body should be empty to indicate no data records.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1436</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1438" lf="1438">This example clarifies the ideal case. If servers have no data, the OK header</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1438</span></div>
      </div>
      <div class="block">
        <pre lo="1440" lf="1442">HTTP/1.1 200 OK</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1440-1442</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1444" lf="1444">is acceptable, but a more specific header</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1444</span></div>
      </div>
      <div class="block">
        <pre lo="1446" lf="1448">HTTP/1.1 200 OK HAPI 1201 - no data in the interval</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1446-1448</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1450" lf="1450">is preferred if the server can detect in time that there is no data. This allows clients to verify that the empty body was intended.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1450</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h4 lo="1452" lf="1452"><a name="3764-time-range-with-all-fill-values" number="3.7.6.4" lo="1452" raw="#### 3.7.6.4 Time Range With All Fill Values" class="anchor hanchor" href="#3764-time-range-with-all-fill-values" lf="1452"><span class="hnumber">3.7.6.4</span>&nbsp;<span class="htext">Time Range With All Fill Values</span></a></h4>
        <div class="block-info" style="display: none;"><span class="line-numbers">1452</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1454" lf="1454">If a request is made with a time range in which the response will contain all fill values, the server must respond with all fill values and not an empty body.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1454</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h1 lo="1456" lf="1456"><a name="4-status-codes" number="4" lo="1456" raw="# 4 Status Codes" class="anchor hanchor" href="#4-status-codes" lf="1456"><span class="hnumber">4</span>&nbsp;<span class="htext">Status Codes</span></a></h1>
        <div class="block-info" style="display: none;"><span class="line-numbers">1456</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1458" lf="1458">There are two ways that HAPI servers must report errors, and these must be consistent. Because every HAPI server response is an HTTP response, an appropriate HTTP status and message must be set for each response. The HTTP integer status codes to use are the standard ones (200 means OK, 404 means not found, etc), and these are listed below.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1458</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1460" lf="1460">The text message in the HTTP status should not just be the standard HTTP message but should include a HAPI-specific message, and this text should include the HAPI integer code along with the corresponding HAPI status message for that code. These HAPI codes and messages are also are described below. Note the careful use of “must” and “should” here. The use of the HTTP header message to include HAPI-specific details is optional, but the setting of the HTTP integer code status is required.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1460</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1462" lf="1463"><a name="HTTPStatusExample"></a> As an example, it is recommended that a status message such as</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1462-1463</span></div>
      </div>
      <div class="block">
        <pre lo="1465" lf="1467">HTTP/1.1 404 Not Found</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1465-1467</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1469" lf="1469">is modified to include the HAPI error code and error message (as described below)</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1469</span></div>
      </div>
      <div class="block">
        <pre lo="1471" lf="1473">HTTP/1.1 404 Not Found; HAPI 1402 Bad request - error in start time</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1471-1473</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1475" lf="1475">Although the HTTP status mechanism is robust, it is more difficult for some clients to access – a HAPI client using a high-level URL retrieving mechanism may not have easy access to HTTP header content. Therefore the HAPI response itself must also include a status indicator. This indicator appears as a <code type="md">status</code> object in the HAPI header. The two status indicators (HAPI and HTTP) must be consistent, i.e., if one indicates success, so must the other. Note that some HAPI responses do not include a header, and in these cases, the HTTP header is the only place to obtain the status.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1475</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="1477" lf="1477"><a name="41-status-object" number="4.1" lo="1477" raw="## 4.1 `status` Object" class="anchor hanchor" href="#41-status-object" lf="1477"><span class="hnumber">4.1</span>&nbsp;<span class="htext"><code type="md">status</code> Object</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">1477</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1479" lf="1479">The HAPI <code type="md">status</code> object is described as follows:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1479</span></div>
      </div>
      <div class="block">
        <table lo="1481" lf="1484">
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">code</code></td>
              <td>integer</td>
              <td>Specific value indicating the category of the outcome of the request - see <a href="#4-status-codes">HAPI Status Codes</a>.</td>
            </tr>
            <tr>
              <td><code type="md">message</code></td>
              <td>string</td>
              <td>Human readable description of the status - must conceptually match the intent of the integer code.</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="block">
        <p padlength="0" lo="1486" lf="1486">HAPI servers must categorize the response status using at least the following three status codes: <code type="md">1200 - OK</code>, <code type="md">1400 - Bad Request</code>, and <code type="md">1500 - Internal Server Error</code>. These are intentionally analogous to the similar HTTP codes <code type="md">200 - OK</code>, <code type="md">400 - Bad Request</code>, and <code type="md">500 - Internal Server Error</code>. Note that HAPI code numbers are 1000 higher than the HTTP codes to avoid collisions. For these three simple subtracting 1000. The following table summarizes the minimum required status response categories.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1486</span></div>
      </div>
      <div class="block">
        <table lo="1488" lf="1492">
          <thead>
            <tr>
              <th>HTTP code</th>
              <th>HAPI status <code type="md">code</code></th>
              <th>HAPI status <code type="md">message</code></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">200</code></td>
              <td>1200</td>
              <td>OK</td>
            </tr>
            <tr>
              <td><code type="md">400</code></td>
              <td>1400</td>
              <td>Bad request - user input error</td>
            </tr>
            <tr>
              <td><code type="md">500</code></td>
              <td>1500</td>
              <td>Internal server error</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="block">
        <p padlength="0" lo="1494" lf="1494">The exact wording in the HAPI message does not need to match what is shown here. The conceptual message must be consistent with the status, but the wording is allowed to be different (or in another language, for example). If the server is also including the HAPI error message in the HTTP status message (recommended, not required), the HTTP status wording should be as similar as possible to the HAPI message wording.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1494</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1496" lf="1496">The <code type="md">about</code>, <code type="md">capabilities</code>, and <code type="md">catalog</code> endpoints just need to indicate <code type="md">1200 - OK</code> or <code type="md">1500 - Internal Server Error</code> since they do not take any request parameters. The <code type="md">info</code> and <code type="md">data</code> endpoints do take request parameters, so their status response must include <code type="md">1400 - Bad Request</code> when appropriate.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1496</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1498" lf="1498">A response of <code type="md">1400 - Bad Request</code> must also be given when the user requests an endpoint that does not exist.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1498</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="1500" lf="1500"><a name="42-status-error-codes" number="4.2" lo="1500" raw="## 4.2 `status` Error Codes" class="anchor hanchor" href="#42-status-error-codes" lf="1500"><span class="hnumber">4.2</span>&nbsp;<span class="htext"><code type="md">status</code> Error Codes</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">1500</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1502" lf="1502">Servers may optionally provide a more specific error code for the following common types of input processing problems. For convenience, a JSON object with these error codes is given in <a href="#83-json-object-of-status-codes">the Appendix</a>. It is recommended but not required that a server implement this more complete set of status responses. Servers may add their own codes but must use numbers outside the <code type="md">1200</code>s, <code type="md">1400</code>s, and <code type="md">1500</code>s to avoid collisions with possible future HAPI codes.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1502</span></div>
      </div>
      <div class="block">
        <table lo="1504" lf="1520">
          <thead>
            <tr>
              <th>HTTP code</th>
              <th>HAPI status <code type="md">code</code></th>
              <th>HAPI status <code type="md">message</code></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code type="md">200</code></td>
              <td><code type="md">1200</code></td>
              <td>OK</td>
            </tr>
            <tr>
              <td><code type="md">200</code></td>
              <td><code type="md">1201</code></td>
              <td>OK - no data for time range</td>
            </tr>
            <tr>
              <td><code type="md">400</code></td>
              <td><code type="md">1400</code></td>
              <td>Bad request - user input error</td>
            </tr>
            <tr>
              <td><code type="md">400</code></td>
              <td><code type="md">1401</code></td>
              <td>Bad request - unknown API parameter name</td>
            </tr>
            <tr>
              <td><code type="md">400</code></td>
              <td><code type="md">1402</code></td>
              <td>Bad request - error in start time</td>
            </tr>
            <tr>
              <td><code type="md">400</code></td>
              <td><code type="md">1403</code></td>
              <td>Bad request - error in stop time</td>
            </tr>
            <tr>
              <td><code type="md">400</code></td>
              <td><code type="md">1404</code></td>
              <td>Bad request - start time equal to or after stop time</td>
            </tr>
            <tr>
              <td><code type="md">400</code></td>
              <td><code type="md">1405</code></td>
              <td>Bad request - time outside valid range</td>
            </tr>
            <tr>
              <td><code type="md">404</code></td>
              <td><code type="md">1406</code></td>
              <td>Bad request - unknown dataset id</td>
            </tr>
            <tr>
              <td><code type="md">404</code></td>
              <td><code type="md">1407</code></td>
              <td>Bad request - unknown dataset parameter</td>
            </tr>
            <tr>
              <td><code type="md">400</code></td>
              <td><code type="md">1408</code></td>
              <td>Bad request - too much time or data requested</td>
            </tr>
            <tr>
              <td><code type="md">400</code></td>
              <td><code type="md">1409</code></td>
              <td>Bad request - unsupported output format</td>
            </tr>
            <tr>
              <td><code type="md">400</code></td>
              <td><code type="md">1410</code></td>
              <td>Bad request - unsupported include value</td>
            </tr>
            <tr>
              <td><code type="md">500</code></td>
              <td><code type="md">1500</code></td>
              <td>Internal server error</td>
            </tr>
            <tr>
              <td><code type="md">500</code></td>
              <td><code type="md">1501</code></td>
              <td>Internal server error - upstream request error</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="block">
        <p padlength="0" lo="1522" lf="1522">Note that there is an OK status to indicate that the request was properly fulfilled, but that no data was found. This can be very useful feedback to clients and users, who may otherwise suspect server problems if no data is returned.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1522</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1524" lf="1524">Note also the response <code type="md">1408</code> indicating that the server will not fulfill the request since it is too large. This gives a HAPI server a way to let clients know about internal limits within the server.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1524</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1526" lf="1526">For errors that prevent any HAPI content from being returned (such as a <code type="md">400 - not found</code> or <code type="md">500 - internal server error</code>) the HAPI server should return a JSON object that is basically a HAPI header with just the status information. The JSON object should be returned even if the request was for non-JSON data. Returning server-specified content for an error response is also how HTTP servers handle error messages – think about custom HTML content that accompanies the <code type="md">404 - not found</code> response when asking a server for a data file that does not exist.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1526</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1528" lf="1529">In cases where the server cannot create a full response (such as an <code type="md">info</code> request or <code type="md">data</code> request for an unknown dataset), the JSON header response must include the HAPI version and a HAPI status object indicating that an error has occurred.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1528-1529</span></div>
      </div>
      <div class="block">
        <pre lo="1531" lf="1536" class="language-javascript"><div class="block"><code lo="1532" lf="1532">{</code></div><div class="block"><code lo="1533" lf="1533">  <span class="hljs-string">"HAPI"</span>: <span class="hljs-string">"3.1"</span>,</code></div><div class="block"><code lo="1534" lf="1534">  <span class="hljs-string">"status"</span>: { <span class="hljs-string">"code"</span>: <span class="hljs-number">1401</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"Bad request - unknown request parameter"</span>}</code></div><div class="block"><code lo="1535" lf="1535">}</code></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1531-1536</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1538" lf="1538">For the <code type="md">data</code> endpoint, clients may request data with no JSON header, and in the case of an error, the HTTP status is the only place a client can determine the response status.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1538</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="1540" lf="1540"><a name="43-client-error-handling" number="4.3" lo="1540" raw="## 4.3 Client Error Handling" class="anchor hanchor" href="#43-client-error-handling" lf="1540"><span class="hnumber">4.3</span>&nbsp;<span class="htext">Client Error Handling</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">1540</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1542" lf="1542">Because web servers are not required to limit HTTP return codes to those in the above table, HAPI clients should be able to handle the full range of HTTP responses. Also, the HAPI server code may not be the only software to interact with a URL-based request from a HAPI server. There may be a load balancer or upstream request routing or caching mechanism in place. Therefore, it is a good client-side practice to be able to handle any HTTP errors.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1542</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1544" lf="1544">Also, recall that in a three-digit HTTP error code, the first digit is the main one client code should examine for determining the response status. Subsequent digits give a finer nuance to the error, but there may be variability between servers for the exact values of the seconds and third digits. HAPI servers are allowed to use more specific values for these second and third digits but must keep the first digit consistent with the table above.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1544</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1546" lf="1546">Consider the HTTP <code type="md">204</code> error code, which represents “No data.” A HAPI server is allowed to return this code when no data was present over the time range indicated, but (per HTTP rules) it must only do so in cases where the HTTP body truly contains no data. A HAPI header would count as HTTP data, so the HTTP 204 code can only be sent by a server when the clients requested CSV or binary data with no header. Here is a sample HTTP response for this case:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1546</span></div>
      </div>
      <div class="block">
        <pre lo="1548" lf="1550">HTTP/1.1 204 OK - no content; HAPI 1201 OK - no data for the time range</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1548-1550</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1552" lf="1552">Regardless of whether the server uses a more specific HTTP code, the HAPI code embedded in the HTTP message must properly indicate the HAPI status.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1552</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h1 lo="1554" lf="1554"><a name="5-implementation-details" number="5" lo="1554" raw="# 5 Implementation Details" class="anchor hanchor" href="#5-implementation-details" lf="1554"><span class="hnumber">5</span>&nbsp;<span class="htext">Implementation Details</span></a></h1>
        <div class="block-info" style="display: none;"><span class="line-numbers">1554</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="1556" lf="1556"><a name="51-cross-origin-resource-sharing" number="5.1" lo="1556" raw="## 5.1 Cross-Origin Resource Sharing" class="anchor hanchor" href="#51-cross-origin-resource-sharing" lf="1556"><span class="hnumber">5.1</span>&nbsp;<span class="htext">Cross-Origin Resource Sharing</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">1556</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1558" lf="1558">Because of the increasing importance of JavaScript clients that use AJAX requests, HAPI servers are strongly encouraged to implement Cross-Origin Resource Sharing <a href="https://www.w3.org/TR/cors/">CORS</a>. This will allow AJAX requests by browser clients from any domain. For servers with only public data, enabling CORS is fairly common, and not implementing CORS limits the type of clients that can interface with a HAPI server. Server implementors are strongly encouraged to pursue a deeper understanding before proceeding with CORS. For testing purposes, the following headers have been sufficient for browser clients to HAPI servers:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1558</span></div>
      </div>
      <div class="block">
        <pre lo="1560" lf="1564"><div class="block"><code lo="1561" lf="1561">Access-Control-Allow-Origin: *</code></div><div class="block"><code lo="1562" lf="1562">Access-Control-Allow-Methods: GET</code></div><div class="block"><code lo="1563" lf="1563">Access-Control-Allow-Headers: Content-Type</code></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1560-1564</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="1566" lf="1566"><a name="52-security-notes" number="5.2" lo="1566" raw="## 5.2 Security Notes" class="anchor hanchor" href="#52-security-notes" lf="1566"><span class="hnumber">5.2</span>&nbsp;<span class="htext">Security Notes</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">1566</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1568" lf="1568">When the server sees a request parameter that it does not recognize, it should throw an error.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1568</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1570" lf="1570">So given this query</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1570</span></div>
      </div>
      <div class="block">
        <pre lo="1572" lf="1574">http://server/hapi/data?dataset=DATA&amp;start=T1&amp;stop=T2&amp;fields=mag_GSE&amp;avg=5s</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1572-1574</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1576" lf="1576">the server should throw an error with a status of <code type="md">1400 - Bad Request</code> with an HTTP status of <code type="md">400</code>. The server could optionally be more specific with <code type="md">1401 - misspelled or invalid request parameter</code> with an HTTP code of <code type="md">404 - Not Found</code>.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1576</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1578" lf="1578">In following general security practices, HAPI servers should carefully screen incoming request parameter name values. Unknown request parameters and values, including incorrectly formatted time values, should <strong type="md">not</strong> be echoed in the error response.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1578</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="1580" lf="1580"><a name="53-head-requests-and-efficiency" number="5.3" lo="1580" raw="## 5.3 HEAD Requests and Efficiency" class="anchor hanchor" href="#53-head-requests-and-efficiency" lf="1580"><span class="hnumber">5.3</span>&nbsp;<span class="htext">HEAD Requests and Efficiency</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">1580</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1582" lf="1587">Although HEAD requests are allowed (and required by the HTTP specification), the HAPI specification does not define any additional or new aspects to the response of a HEAD request. Note that many server frameworks will respond to a HEAD request by making a GET request and then omitting the body in the response, since this is a simple way to guarantee that the meta-information in the HEAD request is the same as that in the GET request (as is required by the HTTP specification). As a result, HAPI server developers may want to modify this default behavior to prevent unnecessary processing for HEAD requests.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1582-1587</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h1 lo="1589" lf="1589"><a name="6-references" number="6" lo="1589" raw="# 6 References" class="anchor hanchor" href="#6-references" lf="1589"><span class="hnumber">6</span>&nbsp;<span class="htext">References</span></a></h1>
        <div class="block-info" style="display: none;"><span class="line-numbers">1589</span></div>
      </div>
      <div class="block">
        <ol lo="1591" lf="1595" class="compact">
          <li markerlength="3" padlength="0" lo="1591" lf="1591">
            <div class="block">
              <p padlength="0" lo="1591" lf="1591">ISO 8601:2019 Date Time Format Standard, <a href="https://www.iso.org/standard/70908.html">https://www.iso.org/standard/70908.html</a></p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1595-1597</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="1592" lf="1592">
            <div class="block">
              <p padlength="0" lo="1592" lf="1592">CSV format, <a href="https://tools.ietf.org/html/rfc4180">https://tools.ietf.org/html/rfc4180</a> </p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1595-1597</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="1593" lf="1593">
            <div class="block">
              <p padlength="0" lo="1593" lf="1593">JSON Format, <a href="https://tools.ietf.org/html/rfc7159">https://tools.ietf.org/html/rfc7159</a>; <a href="http://json-schema.org/">http://json-schema.org/</a> </p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1595-1597</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="1594" lf="1594">
            <div class="block">
              <p padlength="0" lo="1594" lf="1594">IEEE Standard for Floating-Point Arithmetic, <a href="http://doi.org/10.1109/IEEESTD.2008.4610935">http://doi.org/10.1109/IEEESTD.2008.4610935</a></p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1595-1597</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="1595" lf="1597">
            <div class="block">
              <p padlength="0" lo="1595" lf="1595">Understanding JSON Schema - Structuring a Complex Schema, <a href="https://json-schema.org/understanding-json-schema/structuring.html">https://json-schema.org/understanding-json-schema/structuring.html</a></p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1595</span></div>
            </div>
          </li>
        </ol>
        <div class="block-info" style="display: none;"><span class="line-numbers">1591-1595</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h1 lo="1597" lf="1597"><a name="7-contact" number="7" lo="1597" raw="# 7 Contact" class="anchor hanchor" href="#7-contact" lf="1597"><span class="hnumber">7</span>&nbsp;<span class="htext">Contact</span></a></h1>
        <div class="block-info" style="display: none;"><span class="line-numbers">1597</span></div>
      </div>
      <div class="block">
        <ul lo="1599" lf="1606" class="compact">
          <li markerlength="2" padlength="0" lo="1599" lf="1599">
            <div class="block">
              <p padlength="0" lo="1599" lf="1599">Jon Vandegriff (<a href="mailto:jon.vandegriff@jhuapl.edu">jon.vandegriff@jhuapl.edu</a>) </p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1606-1608</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="1600" lf="1600">
            <div class="block">
              <p padlength="0" lo="1600" lf="1600">Robert Weigel (<a href="mailto:rweigel@gmu.edu">rweigel@gmu.edu</a>) </p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1606-1608</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="1601" lf="1601">
            <div class="block">
              <p padlength="0" lo="1601" lf="1601">Aaron Roberts (<a href="mailto:aaron.roberts@nasa.gov">aaron.roberts@nasa.gov</a>) </p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1606-1608</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="1602" lf="1602">
            <div class="block">
              <p padlength="0" lo="1602" lf="1602">Jeremy Faden (<a href="mailto:faden@cottagesystems.com">faden@cottagesystems.com</a>)</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1606-1608</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="1603" lf="1603">
            <div class="block">
              <p padlength="0" lo="1603" lf="1603">Todd King (<a href="mailto:tking@igpp.ucla.edu">tking@igpp.ucla.edu</a>) </p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1606-1608</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="1604" lf="1604">
            <div class="block">
              <p padlength="0" lo="1604" lf="1604">Robert Candey (<a href="mailto:Robert.M.Candey@nasa.gov">Robert.M.Candey@nasa.gov</a>) </p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1606-1608</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="1605" lf="1605">
            <div class="block">
              <p padlength="0" lo="1605" lf="1605">Bernard Harris (<a href="mailto:bernard.t.harris@nasa.gov">bernard.t.harris@nasa.gov</a>) </p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1606-1608</span></div>
            </div>
          </li>
          <li markerlength="2" padlength="0" lo="1606" lf="1608">
            <div class="block">
              <p padlength="0" lo="1606" lf="1606">Nand Lal (<a href="mailto:nand.lal-1@nasa.gov">nand.lal-1@nasa.gov</a>) </p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1606</span></div>
            </div>
          </li>
        </ul>
        <div class="block-info" style="display: none;"><span class="line-numbers">1599-1606</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h1 lo="1608" lf="1608"><a name="8-appendix" number="8" lo="1608" raw="# 8 Appendix" class="anchor hanchor" href="#8-appendix" lf="1608"><span class="hnumber">8</span>&nbsp;<span class="htext">Appendix</span></a></h1>
        <div class="block-info" style="display: none;"><span class="line-numbers">1608</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="1610" lf="1610"><a name="81-sample-landing-page" number="8.1" lo="1610" raw="## 8.1 Sample Landing Page" class="anchor hanchor" href="#81-sample-landing-page" lf="1610"><span class="hnumber">8.1</span>&nbsp;<span class="htext">Sample Landing Page</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">1610</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1612" lf="1612">See <a href="https://github.com/hapi-server/server-ui">https://github.com/hapi-server/server-ui</a></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1612</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="1614" lf="1614"><a name="82-allowed-characters-in-id-dataset-and-parameter" number="8.2" lo="1614" raw="## 8.2 Allowed Characters in `id`, `dataset`, and `parameter`" class="anchor hanchor" href="#82-allowed-characters-in-id-dataset-and-parameter" lf="1614"><span class="hnumber">8.2</span>&nbsp;<span class="htext">Allowed Characters in <code type="md">id</code>, <code type="md">dataset</code>, and <code type="md">parameter</code></span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">1614</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1616" lf="1616">HAPI allows the use of UTF-8 encoded Unicode characters for <code type="md">id</code>, <code type="md">dataset</code>, and <code type="md">parameter</code>. (<code type="md">id</code> is used in the <a href="#35-catalog"><code type="md">/catalog</code></a> request and <code type="md">dataset</code> and <code type="md">parameter</code> are used in <a href="#36-info"><code type="md">/info</code></a> and <a href="#37-data"><code type="md">/data</code></a> requests.)</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1616</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1618" lf="1618"><strong type="md">Not allowed</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1618</span></div>
      </div>
      <div class="block">
        <ul lo="1620" lf="1620" class="compact">
          <li markerlength="2" padlength="0" lo="1620" lf="1622">
            <div class="block">
              <p padlength="0" lo="1620" lf="1620">Comma (ASCII decimal code 44)</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1620</span></div>
            </div>
          </li>
        </ul>
        <div class="block-info" style="display: none;"><span class="line-numbers">1620</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1622" lf="1622"><strong type="md">Recommended</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1622</span></div>
      </div>
      <div class="block">
        <ol lo="1624" lf="1626" class="compact">
          <li markerlength="3" padlength="0" lo="1624" lf="1624">
            <div class="block">
              <p padlength="0" lo="1624" lf="1624">strings that match the regular expression <code type="md">[_a-zA-Z][_a-zA-Z0-9]{0,30}</code> so that URL encoding is not required and names can be mapped directly to a variable name in most programming languages and a file name on modern operating systems;</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1626-1628</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="1625" lf="1625">
            <div class="block">
              <p padlength="0" lo="1625" lf="1625">strings with any of <code type="md">a-z</code>, <code type="md">A-Z</code>, <code type="md">-</code>, <code type="md">.</code>, <code type="md">_</code>, and <code type="md">~</code> so that URL encoding is not required; and</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1626-1628</span></div>
            </div>
          </li>
          <li markerlength="3" padlength="0" lo="1626" lf="1628">
            <div class="block">
              <p padlength="0" lo="1626" lf="1626">strings that are short - the number of bytes required to write a comma separated list all parameters in a dataset and all other parts of a request URL (i.e., <code type="md">http://.../hapi/data?dataset=...</code>) should be less than 2048 bytes, which is a limitation on a URL length for most web browsers.</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1626</span></div>
            </div>
          </li>
        </ol>
        <div class="block-info" style="display: none;"><span class="line-numbers">1624-1626</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1628" lf="1628"><strong type="md">Allowed</strong></p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1628</span></div>
      </div>
      <div class="block">
        <ul lo="1630" lf="1630" class="compact">
          <li markerlength="2" padlength="0" lo="1630" lf="1633">
            <div class="block">
              <p padlength="0" lo="1630" lf="1630">Any non-control Unicode characters (but we recommend against using Unicode characters that look like a comma)</p>
              <div class="block-info" style="display: none;"><span class="line-numbers">1630</span></div>
            </div>
          </li>
        </ul>
        <div class="block-info" style="display: none;"><span class="line-numbers">1630</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="1633" lf="1633"><a name="83-json-object-of-status-codes" number="8.3" lo="1633" raw="## 8.3 JSON Object of Status Codes" class="anchor hanchor" href="#83-json-object-of-status-codes" lf="1633"><span class="hnumber">8.3</span>&nbsp;<span class="htext">JSON Object of Status Codes</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">1633</span></div>
      </div>
      <div class="block">
        <pre lo="1635" lf="1655" class="language-javascript"><div class="block"><code lo="1636" lf="1636">{</code><div class="line-number">1</div></div><div class="block"><code lo="1637" lf="1637">  <span class="hljs-string">"1200"</span>: {<span class="hljs-string">"status"</span>:{<span class="hljs-string">"code"</span>: <span class="hljs-number">1200</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"HAPI 1200: OK"</span>}},</code><div class="line-number">2</div></div><div class="block"><code lo="1638" lf="1638">  <span class="hljs-string">"1201"</span>: {<span class="hljs-string">"status"</span>:{<span class="hljs-string">"code"</span>: <span class="hljs-number">1201</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"HAPI 1201: OK - no data"</span>}},</code><div class="line-number">3</div></div><div class="block"><code lo="1639" lf="1639">  <span class="hljs-string">"1400"</span>: {<span class="hljs-string">"status"</span>:{<span class="hljs-string">"code"</span>: <span class="hljs-number">1400</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"HAPI error 1400: user input error"</span>}},</code><div class="line-number">4</div></div><div class="block"><code lo="1640" lf="1640">  <span class="hljs-string">"1401"</span>: {<span class="hljs-string">"status"</span>:{<span class="hljs-string">"code"</span>: <span class="hljs-number">1401</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"HAPI error 1401: unknown API parameter name"</span>}},</code><div class="line-number">5</div></div><div class="block"><code lo="1641" lf="1641">  <span class="hljs-string">"1402"</span>: {<span class="hljs-string">"status"</span>:{<span class="hljs-string">"code"</span>: <span class="hljs-number">1402</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"HAPI error 1402: error in start"</span>}},</code><div class="line-number">6</div></div><div class="block"><code lo="1642" lf="1642">  <span class="hljs-string">"1403"</span>: {<span class="hljs-string">"status"</span>:{<span class="hljs-string">"code"</span>: <span class="hljs-number">1403</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"HAPI error 1403: error in stop"</span>}},</code><div class="line-number">7</div></div><div class="block"><code lo="1643" lf="1643">  <span class="hljs-string">"1404"</span>: {<span class="hljs-string">"status"</span>:{<span class="hljs-string">"code"</span>: <span class="hljs-number">1404</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"HAPI error 1404: start equal to or after stop"</span>}},</code><div class="line-number">8</div></div><div class="block"><code lo="1644" lf="1644">  <span class="hljs-string">"1405"</span>: {<span class="hljs-string">"status"</span>:{<span class="hljs-string">"code"</span>: <span class="hljs-number">1405</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"HAPI error 1405: time outside valid range"</span>}},</code><div class="line-number">9</div></div><div class="block"><code lo="1645" lf="1645">  <span class="hljs-string">"1406"</span>: {<span class="hljs-string">"status"</span>:{<span class="hljs-string">"code"</span>: <span class="hljs-number">1406</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"HAPI error 1406: unknown dataset id"</span>}},</code><div class="line-number">10</div></div><div class="block"><code lo="1646" lf="1646">  <span class="hljs-string">"1407"</span>: {<span class="hljs-string">"status"</span>:{<span class="hljs-string">"code"</span>: <span class="hljs-number">1407</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"HAPI error 1407: unknown dataset parameter"</span>}},</code><div class="line-number">11</div></div><div class="block"><code lo="1647" lf="1647">  <span class="hljs-string">"1408"</span>: {<span class="hljs-string">"status"</span>:{<span class="hljs-string">"code"</span>: <span class="hljs-number">1408</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"HAPI error 1408: too much time or data requested"</span>}},</code><div class="line-number">12</div></div><div class="block"><code lo="1648" lf="1648">  <span class="hljs-string">"1409"</span>: {<span class="hljs-string">"status"</span>:{<span class="hljs-string">"code"</span>: <span class="hljs-number">1409</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"HAPI error 1409: unsupported output format"</span>}},</code><div class="line-number">13</div></div><div class="block"><code lo="1649" lf="1649">  <span class="hljs-string">"1410"</span>: {<span class="hljs-string">"status"</span>:{<span class="hljs-string">"code"</span>: <span class="hljs-number">1410</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"HAPI error 1410: unsupported include value"</span>}},</code><div class="line-number">14</div></div><div class="block"><code lo="1650" lf="1650">  <span class="hljs-string">"1411"</span>: {<span class="hljs-string">"status"</span>:{<span class="hljs-string">"code"</span>: <span class="hljs-number">1411</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"HAPI error 1411: out-of-order or duplicate parameters"</span>}},</code><div class="line-number">15</div></div><div class="block"><code lo="1651" lf="1651">  <span class="hljs-string">"1412"</span>: {<span class="hljs-string">"status"</span>:{<span class="hljs-string">"code"</span>: <span class="hljs-number">1412</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"HAPI error 1412: unsupported resolve_references value"</span>}},</code><div class="line-number">16</div></div><div class="block"><code lo="1652" lf="1652">  <span class="hljs-string">"1500"</span>: {<span class="hljs-string">"status"</span>:{<span class="hljs-string">"code"</span>: <span class="hljs-number">1500</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"HAPI error 1500: internal server error"</span>}},</code><div class="line-number">17</div></div><div class="block"><code lo="1653" lf="1653">  <span class="hljs-string">"1501"</span>: {<span class="hljs-string">"status"</span>:{<span class="hljs-string">"code"</span>: <span class="hljs-number">1501</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"HAPI error 1501: upstream request error"</span>}}</code><div class="line-number">18</div></div><div class="block"><code lo="1654" lf="1654">}</code><div class="line-number">19</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1635-1655</span></div>
      </div>
    </div>
    <div class="section">
      <div class="block">
        <h2 lo="1657" lf="1657"><a name="84-examples" number="8.4" lo="1657" raw="## 8.4 Examples" class="anchor hanchor" href="#84-examples" lf="1657"><span class="hnumber">8.4</span>&nbsp;<span class="htext">Examples</span></a></h2>
        <div class="block-info" style="display: none;"><span class="line-numbers">1657</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1659" lf="1659">The following two examples illustrate two different ways to represent a magnetic field dataset. The first lists a time column and three scalar data columns, Bx, By, and Bz for the Cartesian components.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1659</span></div>
      </div>
      <div class="block">
        <pre lo="1661" lf="1674" class="language-javascript"><div class="block"><code lo="1662" lf="1662">{</code><div class="line-number">1</div></div><div class="block"><code lo="1663" lf="1663">   <span class="hljs-string">"HAPI"</span>: <span class="hljs-string">"3.1"</span>,</code><div class="line-number">2</div></div><div class="block"><code lo="1664" lf="1664">   <span class="hljs-string">"status"</span>: { <span class="hljs-string">"code"</span>: <span class="hljs-number">1200</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"OK"</span>},</code><div class="line-number">3</div></div><div class="block"><code lo="1665" lf="1665">   <span class="hljs-string">"startDate"</span>: <span class="hljs-string">"2016-01-01T00:00:00.000Z"</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="1666" lf="1666">   <span class="hljs-string">"stopDate"</span>: <span class="hljs-string">"2016-01-31T24:00:00.000Z"</span>,</code><div class="line-number">5</div></div><div class="block"><code lo="1667" lf="1667">   <span class="hljs-string">"parameters"</span>: [</code><div class="line-number">6</div></div><div class="block"><code lo="1668" lf="1668">      {<span class="hljs-string">"name"</span> : <span class="hljs-string">"timestamp"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"isotime"</span>, <span class="hljs-string">"units"</span>: <span class="hljs-string">"UTC"</span>, <span class="hljs-string">"fill"</span>: <span class="hljs-literal">null</span>, <span class="hljs-string">"length"</span>: <span class="hljs-number">24</span>},</code><div class="line-number">7</div></div><div class="block"><code lo="1669" lf="1669">      {<span class="hljs-string">"name"</span> : <span class="hljs-string">"bx"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"double"</span>, <span class="hljs-string">"units"</span>: <span class="hljs-string">"nT"</span>, <span class="hljs-string">"fill"</span>: <span class="hljs-string">"-1e31"</span>},</code><div class="line-number">8</div></div><div class="block"><code lo="1670" lf="1670">      {<span class="hljs-string">"name"</span> : <span class="hljs-string">"by"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"double"</span>, <span class="hljs-string">"units"</span>: <span class="hljs-string">"nT"</span>, <span class="hljs-string">"fill"</span>: <span class="hljs-string">"-1e31"</span>},</code><div class="line-number">9</div></div><div class="block"><code lo="1671" lf="1671">      {<span class="hljs-string">"name"</span> : <span class="hljs-string">"bz"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"double"</span>, <span class="hljs-string">"units"</span>: <span class="hljs-string">"nT"</span>, <span class="hljs-string">"fill"</span>: <span class="hljs-string">"-1e31"</span>}</code><div class="line-number">10</div></div><div class="block"><code lo="1672" lf="1672">   ]</code><div class="line-number">11</div></div><div class="block"><code lo="1673" lf="1673">}</code><div class="line-number">12</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1661-1674</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1676" lf="1676">This example shows a header for the same conceptual data (time and three magnetic field components), but with the three components grouped into a one-dimensional array of size 3.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1676</span></div>
      </div>
      <div class="block">
        <pre lo="1678" lf="1689" class="language-javascript"><div class="block"><code lo="1679" lf="1679">{</code><div class="line-number">1</div></div><div class="block"><code lo="1680" lf="1680">   <span class="hljs-string">"HAPI"</span>: <span class="hljs-string">"3.1"</span>,</code><div class="line-number">2</div></div><div class="block"><code lo="1681" lf="1681">   <span class="hljs-string">"status"</span>: { <span class="hljs-string">"code"</span>: <span class="hljs-number">1200</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"OK"</span>},</code><div class="line-number">3</div></div><div class="block"><code lo="1682" lf="1682">   <span class="hljs-string">"startDate"</span>: <span class="hljs-string">"2016-01-01T00:00:00.000Z"</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="1683" lf="1683">   <span class="hljs-string">"stopDate"</span>: <span class="hljs-string">"2016-01-31T24:00:00.000Z"</span>,</code><div class="line-number">5</div></div><div class="block"><code lo="1684" lf="1684">   <span class="hljs-string">"parameters"</span>: [</code><div class="line-number">6</div></div><div class="block"><code lo="1685" lf="1685">      { <span class="hljs-string">"name"</span> : <span class="hljs-string">"timestamp"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"isotime"</span>, <span class="hljs-string">"units"</span>: <span class="hljs-string">"UTC"</span>, , <span class="hljs-string">"fill"</span>: <span class="hljs-literal">null</span>, <span class="hljs-string">"length"</span>: <span class="hljs-number">24</span> },</code><div class="line-number">7</div></div><div class="block"><code lo="1686" lf="1686">      { <span class="hljs-string">"name"</span> : <span class="hljs-string">"b_field"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"double"</span>, <span class="hljs-string">"units"</span>: <span class="hljs-string">"nT"</span>,, <span class="hljs-string">"fill"</span>: <span class="hljs-string">"-1e31"</span>, <span class="hljs-string">"size"</span>: [<span class="hljs-number">3</span>] }</code><div class="line-number">8</div></div><div class="block"><code lo="1687" lf="1687">   ]</code><div class="line-number">9</div></div><div class="block"><code lo="1688" lf="1688">}</code><div class="line-number">10</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1678-1689</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1691" lf="1691">These two different representations affect how a subset of parameters could be requested from a server. The first example, by listing Bx, By, and Bz as separate parameters, allows clients to request individual components:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1691</span></div>
      </div>
      <div class="block">
        <pre lo="1693" lf="1695">http://server/hapi/data?dataset=MY_MAG_DATA&amp;start=2001Z&amp;stop=2010Z&amp;parameters=Bx</pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1693-1695</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1697" lf="1697">This request would just return a time column (always included as the first column) and a Bx column. But in the second example, the components are all inside a single parameter named <code type="md">b_field</code> and so a request for this parameter must always return all the components of the parameter. There is no way to request individual elements of an array parameter.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1697</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1699" lf="1699">The following example shows a proton energy spectrum and illustrates the use of the ‘bins’ element. Note also that the uncertainty of the values associated with the proton spectrum is a separate variable. There is currently no way in the HAPI spec to explicitly link a variable to its uncertainties.</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1699</span></div>
      </div>
      <div class="block">
        <pre lo="1701" lf="1755" class="language-javascript"><div class="block"><code lo="1702" lf="1702">{<span class="hljs-string">"HAPI"</span>: <span class="hljs-string">"3.1"</span>,</code><div class="line-number">1</div></div><div class="block"><code lo="1703" lf="1703"> <span class="hljs-string">"status"</span>: { <span class="hljs-string">"code"</span>: <span class="hljs-number">1200</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"OK"</span>},</code><div class="line-number">2</div></div><div class="block"><code lo="1704" lf="1704"> <span class="hljs-string">"startDate"</span>: <span class="hljs-string">"2016-01-01T00:00:00.000Z"</span>,</code><div class="line-number">3</div></div><div class="block"><code lo="1705" lf="1705"> <span class="hljs-string">"stopDate"</span>: <span class="hljs-string">"2016-01-31T24:00:00.000Z"</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="1706" lf="1706"> <span class="hljs-string">"parameters"</span>: [</code><div class="line-number">5</div></div><div class="block"><code lo="1707" lf="1707">   { <span class="hljs-string">"name"</span>: <span class="hljs-string">"Time"</span>,</code><div class="line-number">6</div></div><div class="block"><code lo="1708" lf="1708">     <span class="hljs-string">"type"</span>: <span class="hljs-string">"isotime"</span>,</code><div class="line-number">7</div></div><div class="block"><code lo="1709" lf="1709">     <span class="hljs-string">"units"</span>: <span class="hljs-string">"UTC"</span>,</code><div class="line-number">8</div></div><div class="block"><code lo="1710" lf="1710">     <span class="hljs-string">"fill"</span>: <span class="hljs-literal">null</span>,</code><div class="line-number">9</div></div><div class="block"><code lo="1711" lf="1711">     <span class="hljs-string">"length"</span>: <span class="hljs-number">24</span></code><div class="line-number">10</div></div><div class="block"><code lo="1712" lf="1712">   },</code><div class="line-number">11</div></div><div class="block"><code lo="1713" lf="1713">   { <span class="hljs-string">"name"</span>: <span class="hljs-string">"qual_flag"</span>,</code><div class="line-number">12</div></div><div class="block"><code lo="1714" lf="1714">     <span class="hljs-string">"type"</span>: <span class="hljs-string">"int"</span>,</code><div class="line-number">13</div></div><div class="block"><code lo="1715" lf="1715">     <span class="hljs-string">"units"</span>: <span class="hljs-literal">null</span>,</code><div class="line-number">14</div></div><div class="block"><code lo="1716" lf="1716">     <span class="hljs-string">"fill"</span>: <span class="hljs-literal">null</span></code><div class="line-number">15</div></div><div class="block"><code lo="1717" lf="1717">   },</code><div class="line-number">16</div></div><div class="block"><code lo="1718" lf="1718">   { <span class="hljs-string">"name"</span>: <span class="hljs-string">"maglat"</span>,</code><div class="line-number">17</div></div><div class="block"><code lo="1719" lf="1719">     <span class="hljs-string">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">18</div></div><div class="block"><code lo="1720" lf="1720">     <span class="hljs-string">"units"</span>: <span class="hljs-string">"degrees"</span>,</code><div class="line-number">19</div></div><div class="block"><code lo="1721" lf="1721">     <span class="hljs-string">"fill"</span>: <span class="hljs-literal">null</span>,</code><div class="line-number">20</div></div><div class="block"><code lo="1722" lf="1722">     <span class="hljs-string">"description"</span>: <span class="hljs-string">"magnetic latitude"</span></code><div class="line-number">21</div></div><div class="block"><code lo="1723" lf="1723">   },</code><div class="line-number">22</div></div><div class="block"><code lo="1724" lf="1724">   { <span class="hljs-string">"name"</span>: <span class="hljs-string">"MLT"</span>,</code><div class="line-number">23</div></div><div class="block"><code lo="1725" lf="1725">     <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,</code><div class="line-number">24</div></div><div class="block"><code lo="1726" lf="1726">     <span class="hljs-string">"length"</span>: <span class="hljs-number">5</span>,</code><div class="line-number">25</div></div><div class="block"><code lo="1727" lf="1727">     <span class="hljs-string">"units"</span>: <span class="hljs-string">"hours:minutes"</span>,</code><div class="line-number">26</div></div><div class="block"><code lo="1728" lf="1728">     <span class="hljs-string">"fill"</span>: <span class="hljs-string">"??:??"</span>,</code><div class="line-number">27</div></div><div class="block"><code lo="1729" lf="1729">     <span class="hljs-string">"description"</span>: <span class="hljs-string">"magnetic local time in HH:MM"</span></code><div class="line-number">28</div></div><div class="block"><code lo="1730" lf="1730">   },</code><div class="line-number">29</div></div><div class="block"><code lo="1731" lf="1731">   { <span class="hljs-string">"name"</span>: <span class="hljs-string">"proton_spectrum"</span>,</code><div class="line-number">30</div></div><div class="block"><code lo="1732" lf="1732">     <span class="hljs-string">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">31</div></div><div class="block"><code lo="1733" lf="1733">     <span class="hljs-string">"size"</span>: [<span class="hljs-number">3</span>],</code><div class="line-number">32</div></div><div class="block"><code lo="1734" lf="1734">     <span class="hljs-string">"units"</span>: <span class="hljs-string">"particles/(sec ster cm^2 keV)"</span>,</code><div class="line-number">33</div></div><div class="block"><code lo="1735" lf="1735">     <span class="hljs-string">"fill"</span>: <span class="hljs-string">"-1e31"</span>,</code><div class="line-number">34</div></div><div class="block"><code lo="1736" lf="1736">     <span class="hljs-string">"bins"</span>: [ {</code><div class="line-number">35</div></div><div class="block"><code lo="1737" lf="1737">         <span class="hljs-string">"name"</span>: <span class="hljs-string">"energy"</span>,</code><div class="line-number">36</div></div><div class="block"><code lo="1738" lf="1738">         <span class="hljs-string">"units"</span>: <span class="hljs-string">"keV"</span>,</code><div class="line-number">37</div></div><div class="block"><code lo="1739" lf="1739">         <span class="hljs-string">"centers"</span>: [ <span class="hljs-number">15</span>, <span class="hljs-number">25</span>, <span class="hljs-number">35</span> ],</code><div class="line-number">38</div></div><div class="block"><code lo="1740" lf="1740">          } ],</code><div class="line-number">39</div></div><div class="block"><code lo="1741" lf="1741">   { <span class="hljs-string">"name"</span>: <span class="hljs-string">"proton_spectrum_uncerts"</span>,</code><div class="line-number">40</div></div><div class="block"><code lo="1742" lf="1742">     <span class="hljs-string">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">41</div></div><div class="block"><code lo="1743" lf="1743">     <span class="hljs-string">"size"</span>: [<span class="hljs-number">3</span>],</code><div class="line-number">42</div></div><div class="block"><code lo="1744" lf="1744">     <span class="hljs-string">"units"</span>: <span class="hljs-string">"particles/(sec ster cm^2 keV)"</span>,</code><div class="line-number">43</div></div><div class="block"><code lo="1745" lf="1745">     <span class="hljs-string">"fill"</span>: <span class="hljs-string">"-1e31"</span>,</code><div class="line-number">44</div></div><div class="block"><code lo="1746" lf="1746">     <span class="hljs-string">"bins"</span>: [ {</code><div class="line-number">45</div></div><div class="block"><code lo="1747" lf="1747">         <span class="hljs-string">"name"</span>: <span class="hljs-string">"energy"</span>,</code><div class="line-number">46</div></div><div class="block"><code lo="1748" lf="1748">         <span class="hljs-string">"units"</span>: <span class="hljs-string">"keV"</span>,</code><div class="line-number">47</div></div><div class="block"><code lo="1749" lf="1749">         <span class="hljs-string">"centers"</span>: [ <span class="hljs-number">15</span>, <span class="hljs-number">25</span>, <span class="hljs-number">35</span> ],</code><div class="line-number">48</div></div><div class="block"><code lo="1750" lf="1750">          } ]</code><div class="line-number">49</div></div><div class="block"><code lo="1751" lf="1751">   }</code><div class="line-number">50</div></div><div class="block"><code lo="1752" lf="1752"></code><div class="line-number">51</div></div><div class="block"><code lo="1753" lf="1753">  ]</code><div class="line-number">52</div></div><div class="block"><code lo="1754" lf="1754">}</code><div class="line-number">53</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1701-1755</span></div>
      </div>
      <div class="block">
        <p padlength="0" lo="1757" lf="1757">This shows how “ranges” can specify the bins:</p>
        <div class="block-info" style="display: none;"><span class="line-numbers">1757</span></div>
      </div>
      <div class="block">
        <pre lo="1759" lf="1793" class="language-javascript"><div class="block"><code lo="1760" lf="1760">{</code><div class="line-number">1</div></div><div class="block"><code lo="1761" lf="1761">    <span class="hljs-string">"HAPI"</span>: <span class="hljs-string">"3.1"</span>,</code><div class="line-number">2</div></div><div class="block"><code lo="1762" lf="1762">    <span class="hljs-string">"status"</span>: { <span class="hljs-string">"code"</span>: <span class="hljs-number">1200</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"OK"</span>},</code><div class="line-number">3</div></div><div class="block"><code lo="1763" lf="1763">    <span class="hljs-string">"startDate"</span>: <span class="hljs-string">"2016-01-01T00:00:00.000Z"</span>,</code><div class="line-number">4</div></div><div class="block"><code lo="1764" lf="1764">    <span class="hljs-string">"stopDate"</span>: <span class="hljs-string">"2016-01-31T24:00:00.000Z"</span>,</code><div class="line-number">5</div></div><div class="block"><code lo="1765" lf="1765">    <span class="hljs-string">"parameters"</span>: [</code><div class="line-number">6</div></div><div class="block"><code lo="1766" lf="1766">        {</code><div class="line-number">7</div></div><div class="block"><code lo="1767" lf="1767">            <span class="hljs-string">"length"</span>: <span class="hljs-number">24</span>,</code><div class="line-number">8</div></div><div class="block"><code lo="1768" lf="1768">            <span class="hljs-string">"name"</span>: <span class="hljs-string">"Time"</span>,</code><div class="line-number">9</div></div><div class="block"><code lo="1769" lf="1769">            <span class="hljs-string">"type"</span>: <span class="hljs-string">"isotime"</span>,</code><div class="line-number">10</div></div><div class="block"><code lo="1770" lf="1770">            <span class="hljs-string">"fill"</span>: <span class="hljs-literal">null</span>,</code><div class="line-number">11</div></div><div class="block"><code lo="1771" lf="1771">            <span class="hljs-string">"units"</span>: <span class="hljs-string">"UTC"</span></code><div class="line-number">12</div></div><div class="block"><code lo="1772" lf="1772">        },</code><div class="line-number">13</div></div><div class="block"><code lo="1773" lf="1773">        {</code><div class="line-number">14</div></div><div class="block"><code lo="1774" lf="1774">            <span class="hljs-string">"bins"</span>: [{</code><div class="line-number">15</div></div><div class="block"><code lo="1775" lf="1775">                <span class="hljs-string">"ranges"</span>: [</code><div class="line-number">16</div></div><div class="block"><code lo="1776" lf="1776">                    [  <span class="hljs-number">0</span>,  <span class="hljs-number">30</span> ],</code><div class="line-number">17</div></div><div class="block"><code lo="1777" lf="1777">                    [  <span class="hljs-number">30</span>,  <span class="hljs-number">60</span> ],</code><div class="line-number">18</div></div><div class="block"><code lo="1778" lf="1778">                    [  <span class="hljs-number">60</span>,  <span class="hljs-number">90</span> ],</code><div class="line-number">19</div></div><div class="block"><code lo="1779" lf="1779">                    [  <span class="hljs-number">90</span>,  <span class="hljs-number">120</span> ],</code><div class="line-number">20</div></div><div class="block"><code lo="1780" lf="1780">                    [  <span class="hljs-number">120</span>,  <span class="hljs-number">150</span> ],</code><div class="line-number">21</div></div><div class="block"><code lo="1781" lf="1781">                    [  <span class="hljs-number">150</span>,  <span class="hljs-number">180</span> ]</code><div class="line-number">22</div></div><div class="block"><code lo="1782" lf="1782">                ],</code><div class="line-number">23</div></div><div class="block"><code lo="1783" lf="1783">                <span class="hljs-string">"units"</span>: <span class="hljs-string">"degrees"</span></code><div class="line-number">24</div></div><div class="block"><code lo="1784" lf="1784">            }],</code><div class="line-number">25</div></div><div class="block"><code lo="1785" lf="1785">            <span class="hljs-string">"fill"</span>: <span class="hljs-string">"-1e31"</span>,</code><div class="line-number">26</div></div><div class="block"><code lo="1786" lf="1786">            <span class="hljs-string">"name"</span>: <span class="hljs-string">"pitchAngleSpectrum"</span>,</code><div class="line-number">27</div></div><div class="block"><code lo="1787" lf="1787">            <span class="hljs-string">"size"</span>: [<span class="hljs-number">6</span>],</code><div class="line-number">28</div></div><div class="block"><code lo="1788" lf="1788">            <span class="hljs-string">"type"</span>: <span class="hljs-string">"double"</span>,</code><div class="line-number">29</div></div><div class="block"><code lo="1789" lf="1789">        <span class="hljs-string">"units"</span>: <span class="hljs-string">"particles/sec/cm^2/ster/keV"</span></code><div class="line-number">30</div></div><div class="block"><code lo="1790" lf="1790">        }</code><div class="line-number">31</div></div><div class="block"><code lo="1791" lf="1791">    ]</code><div class="line-number">32</div></div><div class="block"><code lo="1792" lf="1792">}</code><div class="line-number">33</div></div></pre>
        <div class="block-info" style="display: none;"><span class="line-numbers">1759-1793</span></div>
      </div>
    </div>
  </div>
</body>

</html>